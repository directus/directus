---
description: Finish task - commit + PR + analytics in one command
argument-hint: [optional: task-id]
model: claude-sonnet-4-5-20250929
allowed-tools: Read, Edit, Bash, Grep, mcp__github__*
---

# /done - Finish Task

**Combines:** task-submit + PR creation + session-end + analytics

One command to finish your work.

## What It Does

1. **Commit Changes**
   - Stages all modified files
   - Creates structured commit message
   - Includes task reference

2. **Create Pull Request**
   - Pushes branch to origin
   - Creates PR with template
   - Links to issue
   - Triggers CI automatically

3. **Update Status**
   - Sets GitHub Project status to "Review"
   - Updates KANBAN.md
   - Logs analytics

4. **Session End**
   - Calculates session duration
   - Logs task completion
   - Updates streak
   - Archives CLAUDE.md history if needed

## Usage

```bash
# Finish current task (auto-detects from branch)
/done

# Finish specific task
/done 142

# With custom summary
/done 142 "Added dark mode with system preference detection"
```

## Output Example

```
ğŸ“ Committing changes...
âœ“ Staged 5 files
âœ“ Committed: feat: add dark mode toggle (#142)

ğŸ“¤ Creating Pull Request...
âœ“ Pushed to origin/feature/issue-142-add-dark-mode-toggle
âœ“ PR #156 created: Add dark mode toggle
âœ“ Linked to issue #142
âœ“ CI triggered

ğŸ“Š GitHub Project updated:
âœ“ Status: Review
âœ“ PR linked

â±ï¸  Task completed:
   Estimated: 2.5h
   Actual: 2.1h
   âœ… Under estimate (+16% efficiency)

ğŸ¯ Session #15 complete:
   Duration: 2.1h
   Tasks: 1 completed
   Files: 5 modified
   Streak: 13 days ğŸ”¥

---
Next steps:
1. /task-review-status 142  # Monitor CI
2. /task-finalize 142       # After approval
3. /work                    # Start next task
```

## Commit Message Format

```
<type>: <description> (#<issue>)

WHY: <reason for changes>
IMPACT: <what changes>
FILES: <key files modified>

Co-Authored-By: Claude <noreply@anthropic.com>
```

## PR Template (Auto-populated)

```markdown
## Summary
<Auto-generated from issue description>

## Changes
- <List of key changes>

## Test Plan
- [ ] Manual testing completed
- [ ] CI checks passing
- [ ] No breaking changes

Closes #<issue>
```

## Error Handling

- **No changes detected:** Warns and exits
- **Git conflicts:** Shows conflicts, suggests resolution
- **CI failures:** Creates PR anyway, shows failure log
- **GitHub offline:** Creates local commit, queues PR for later

## See Also

- `/work` - Start next task
- `/check` - Validate before committing
- `/status` - Check current state
