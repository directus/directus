{"version":3,"sources":["webpack:///./src/layouts/cards/options.vue?e527","webpack:///src/layouts/cards/options.vue","webpack:///./src/layouts/cards/options.vue?d89d","webpack:///./src/layouts/cards/options.vue","webpack:///./node_modules/@directus/extension-toolkit/mixins/layout.js","webpack:///./src/layouts/cards/options.vue?2dfc"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","staticClass","_v","_s","$t","attrs","sortedOn","setSort","_l","fieldInfo","name","key","domProps","$helpers","formatTitle","sortDirection","setSortDirection","viewOptions","src","fileOptions","setOption","fit","crop","contain","title","primaryKeyField","titleFieldOptions","subtitle","fieldOptions","icon","staticRenderFns","mixins","computed","__none__","sortableFields","_","pickBy","fields","fieldName","viewQuerySort","sortableFieldNames","startsWith","substring","viewQuery","sort","field","type","toLowerCase","collection","options","data","methods","$emit","direction","component","module","exports","props","String","required","Object","items","Array","default","loading","Boolean","lazyLoading","selection","link","sortField"],"mappings":"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","file":"js/chunk-6714d3b0.0bd57ead.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('label',{staticClass:\"type-label\"},[_vm._v(_vm._s(_vm.$t(\"sort_by\")))]),_c('v-simple-select',{attrs:{\"value\":_vm.sortedOn},on:{\"input\":function($event){return _vm.setSort($event)}}},_vm._l((_vm.sortableFields),function(fieldInfo,name){return _c('option',{key:name,domProps:{\"value\":name}},[_vm._v(\"\\n      \"+_vm._s(_vm.$helpers.formatTitle(name))+\"\\n    \")])}),0),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"src\"}},[_vm._v(_vm._s(_vm.$t(\"sort_direction\")))]),_c('v-simple-select',{attrs:{\"value\":_vm.sortDirection},on:{\"input\":function($event){return _vm.setSortDirection($event)}}},[_c('option',{attrs:{\"value\":\"asc\"}},[_vm._v(_vm._s(_vm.$t(\"ASC\")))]),_c('option',{attrs:{\"value\":\"desc\"}},[_vm._v(_vm._s(_vm.$t(\"DESC\")))])]),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"src\"}},[_vm._v(_vm._s(_vm.$t(\"layouts.cards.src\")))]),_c('v-select',{attrs:{\"id\":\"src\",\"value\":_vm.viewOptions.src || '__none__',\"options\":_vm.fileOptions,\"icon\":\"image\"},on:{\"input\":function($event){return _vm.setOption('src', $event === '__none__' ? null : $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"fit\"}},[_vm._v(_vm._s(_vm.$t(\"layouts.cards.fit\")))]),_c('v-select',{attrs:{\"id\":\"fit\",\"value\":_vm.viewOptions.fit || 'crop',\"options\":{\n      crop: 'Crop',\n      contain: 'Contain'\n    },\"icon\":_vm.viewOptions.fit === 'crop' ? 'crop' : 'crop_free'},on:{\"input\":function($event){return _vm.setOption('fit', $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"title\"}},[_vm._v(_vm._s(_vm.$t(\"layouts.cards.title\")))]),_c('v-select',{attrs:{\"id\":\"title\",\"value\":_vm.viewOptions.title || _vm.primaryKeyField,\"options\":_vm.titleFieldOptions,\"icon\":\"title\"},on:{\"input\":function($event){return _vm.setOption('title', $event === '__none__' ? null : $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"subtitle\"}},[_vm._v(\"\\n    \"+_vm._s(_vm.$t(\"layouts.cards.subtitle\"))+\"\\n  \")]),_c('v-select',{attrs:{\"id\":\"subtitle\",\"value\":_vm.viewOptions.subtitle || '__none__',\"options\":_vm.fieldOptions,\"icon\":\"title\"},on:{\"input\":function($event){return _vm.setOption('subtitle', $event === '__none__' ? null : $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"icon\"}},[_vm._v(\"Fallback Icon\")]),_c('v-input',{attrs:{\"value\":_vm.viewOptions.icon || 'photo',\"icon-left\":\"broken_image\"},on:{\"input\":function($event){return _vm.setOption('icon', $event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <form @submit.prevent>\n    <label class=\"type-label\">{{ $t(\"sort_by\") }}</label>\n    <v-simple-select :value=\"sortedOn\" @input=\"setSort($event)\">\n      <option v-for=\"(fieldInfo, name) in sortableFields\" :key=\"name\" :value=\"name\">\n        {{ $helpers.formatTitle(name) }}\n      </option>\n    </v-simple-select>\n\n    <label for=\"src\" class=\"type-label\">{{ $t(\"sort_direction\") }}</label>\n    <v-simple-select :value=\"sortDirection\" @input=\"setSortDirection($event)\">\n      <option value=\"asc\">{{ $t(\"ASC\") }}</option>\n      <option value=\"desc\">{{ $t(\"DESC\") }}</option>\n    </v-simple-select>\n\n    <label for=\"src\" class=\"type-label\">{{ $t(\"layouts.cards.src\") }}</label>\n    <v-select\n      id=\"src\"\n      :value=\"viewOptions.src || '__none__'\"\n      :options=\"fileOptions\"\n      icon=\"image\"\n      @input=\"setOption('src', $event === '__none__' ? null : $event)\"\n    ></v-select>\n\n    <label for=\"fit\" class=\"type-label\">{{ $t(\"layouts.cards.fit\") }}</label>\n    <v-select\n      id=\"fit\"\n      :value=\"viewOptions.fit || 'crop'\"\n      :options=\"{\n        crop: 'Crop',\n        contain: 'Contain'\n      }\"\n      :icon=\"viewOptions.fit === 'crop' ? 'crop' : 'crop_free'\"\n      @input=\"setOption('fit', $event)\"\n    ></v-select>\n\n    <label for=\"title\" class=\"type-label\">{{ $t(\"layouts.cards.title\") }}</label>\n    <v-select\n      id=\"title\"\n      :value=\"viewOptions.title || primaryKeyField\"\n      :options=\"titleFieldOptions\"\n      icon=\"title\"\n      @input=\"setOption('title', $event === '__none__' ? null : $event)\"\n    ></v-select>\n\n    <label for=\"subtitle\" class=\"type-label\">\n      {{ $t(\"layouts.cards.subtitle\") }}\n    </label>\n    <v-select\n      id=\"subtitle\"\n      :value=\"viewOptions.subtitle || '__none__'\"\n      :options=\"fieldOptions\"\n      icon=\"title\"\n      @input=\"setOption('subtitle', $event === '__none__' ? null : $event)\"\n    ></v-select>\n\n    <label for=\"icon\" class=\"type-label\">Fallback Icon</label>\n    <v-input\n      :value=\"viewOptions.icon || 'photo'\"\n      icon-left=\"broken_image\"\n      @input=\"setOption('icon', $event)\"\n    ></v-input>\n  </form>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/layout\";\n\nexport default {\n  mixins: [mixin],\n  computed: {\n    titleFieldOptions() {\n      return {\n        ..._.mapValues(this.fields, info => info.name)\n      };\n    },\n    fieldOptions() {\n      return {\n        __none__: `(${this.$t(\"dont_show\")})`,\n        ..._.mapValues(this.fields, info => info.name)\n      };\n    },\n    sortableFields() {\n      return _.pickBy(this.fields, field => field.datatype);\n    },\n    sortedOn() {\n      let fieldName;\n      const sortableFieldNames = Object.keys(this.sortableFields);\n      const viewQuerySort = this.viewQuery.sort;\n      if (\n        sortableFieldNames &&\n        viewQuerySort &&\n        sortableFieldNames.some(sortableFieldName => sortableFieldName === viewQuerySort)\n      ) {\n        fieldName = viewQuerySort;\n      } else if (sortableFieldNames && sortableFieldNames.length > 0) {\n        // If the user didn't sort, default to the first field\n        fieldName = sortableFieldNames[0];\n      } else {\n        return null;\n      }\n\n      // If the sort viewQuery was already descending, remove the - so we don't\n      // run into server errors with double direction characters\n      if (fieldName.startsWith(\"-\")) fieldName = fieldName.substring(1);\n\n      return fieldName;\n    },\n    sortDirection() {\n      if (!this.viewQuery.sort) return \"asc\";\n\n      if (this.viewQuery.sort.substring(0, 1) === \"-\") return \"desc\";\n\n      return \"asc\";\n    },\n    fileOptions() {\n      const fileTypeFields = _.filter(this.fields, info => info.type.toLowerCase() === \"file\");\n      const fields = _.keyBy(fileTypeFields, \"field\");\n      const options = {\n        __none__: `(${this.$t(\"dont_show\")})`,\n        ..._.mapValues(fields, info => info.name)\n      };\n\n      // Check if one of the fields is `data`. If that's the case, make sure that this\n      //   field is for the directus_files collection and it's an ALIAS type\n      //\n      // This is a hardcoded addition to make sure that directus_files can be used in the cards view preview\n      if (\"data\" in this.fields) {\n        const field = this.fields.data;\n\n        if (field.type.toLowerCase() === \"alias\" && field.collection === \"directus_files\") {\n          options.data = this.$t(\"file\");\n        }\n      }\n\n      return options;\n    }\n  },\n  methods: {\n    setOption(field, value) {\n      this.$emit(\"options\", {\n        ...this.viewOptions,\n        [field]: value\n      });\n    },\n    setSort(fieldName) {\n      this.$emit(\"query\", {\n        sort: fieldName\n      });\n    },\n    setSortDirection(direction) {\n      this.$emit(\"query\", {\n        sort: (direction === \"desc\" ? \"-\" : \"\") + this.sortedOn\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.type-label {\n  margin-top: var(--form-vertical-gap);\n  margin-bottom: var(--input-label-margin);\n  &:first-of-type {\n    margin-top: 0;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./options.vue?vue&type=template&id=0de6b5a9&scoped=true&\"\nimport script from \"./options.vue?vue&type=script&lang=js&\"\nexport * from \"./options.vue?vue&type=script&lang=js&\"\nimport style0 from \"./options.vue?vue&type=style&index=0&id=0de6b5a9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0de6b5a9\",\n  null\n  \n)\n\nexport default component.exports","module.exports = {\n  props: {\n    primaryKeyField: {\n      type: String,\n      required: true\n    },\n    fields: {\n      type: Object,\n      required: true\n    },\n    items: {\n      type: Array,\n      default: () => ([])\n    },\n    viewOptions: {\n      type: Object,\n      default: () => ({})\n    },\n    viewQuery: {\n      type: Object,\n      default: () => ({})\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    lazyLoading: {\n      type: Boolean,\n      default: false\n    },\n    selection: {\n      type: Array,\n      default: () => []\n    },\n    link: {\n      type: String,\n      default: null\n    },\n    sortField: {\n      type: String,\n      default: null\n    },\n    collection: {\n      type: String,\n      default: null\n    }\n  }\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=style&index=0&id=0de6b5a9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=style&index=0&id=0de6b5a9&lang=scss&scoped=true&\""],"sourceRoot":""}