(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27dab218"],{"0c82":function(e,t,n){"use strict";var i=n("f163"),r=n.n(i);r.a},1581:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("a481"),n("4917");function i(e){var t=/{{(.*?)}}/g,n=e.match(t);return n=n.map((function(e){return e.replace(/{{/g,"").replace(/}}/g,"").trim()})),n}},"2cb0":function(e,t,n){"use strict";var i=n("3e69"),r=n.n(i);r.a},"32cb":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interface-repeater"},[n("draggable",{staticClass:"row-container",class:{dragging:e.dragging},attrs:{handle:".drag-handle"},on:{start:function(t){e.dragging=!0},end:e.endDrag},model:{value:e.rows,callback:function(t){e.rows=t},expression:"rows"}},e._l(e.rows,(function(t,i){return n("repeater-row",{key:t.__key,attrs:{row:t,fields:e.repeaterFields,inline:e.inline,template:e.options.template,open:e.open===i,placeholder:e.options.placeholder},on:{open:function(t){return e.toggleOpen(i)},input:function(t){return e.updateRow(i,t)},remove:function(t){return e.removeRow(i)}}})})),1),e.addButtonVisible?n("div",{staticClass:"add-new",on:{click:e.addRow}},[n("v-icon",{attrs:{name:"add",color:"input-icon-color"}}),e._v("\n    "+e._s(e.options.createItemText)+"\n  ")],1):e._e()],1)},r=[],o=(n("8e6e"),n("8615"),n("75fc")),l=n("bd86"),a=(n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("8db2")),s=n.n(a),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{ref:"interfaceRoot",staticClass:"repeater-row"},[n("div",{staticClass:"header"},[n("div",{staticClass:"drag-handle"},[n("v-icon",{attrs:{name:"drag_handle"}})],1),n("div",{staticClass:"content",class:{"two-up":e.inline&&2===e.fields.length}},[e.inline?e._l(e.fields,(function(t){return n("v-ext-input",{key:t.field,attrs:{id:t.interface||"text-input",name:t.field,required:t.required,readonly:t.readonly,options:t.options,type:t.type,datatype:t.datatype,value:e.row[t.field],fields:e.fields,values:e.row,length:t.length},on:{input:function(n){return e.$emit("input",{field:t.field,value:n})}}})})):n("button",{class:e.showPlaceholder?"placeholder":"preview",attrs:{type:"button"},on:{click:function(t){return e.$emit("open")}}},[e._v("\n        "+e._s(e.showPlaceholder?e.placeholder:e.displayValue)+"\n      ")])],2),n("button",{attrs:{type:"button"},on:{click:function(t){return e.$emit("remove")}}},[n("v-icon",{staticClass:"remove",attrs:{name:"delete_outline"}})],1)]),!1===e.inline?n("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"body"},[n("v-form",{attrs:{"full-width":"",fields:e.fields,values:e.row},on:{"stage-value":function(t){return e.$emit("input",t)}}})],1):e._e()])},c=[],d=n("1581"),p={name:"RepeaterRow",props:{row:{type:Object,required:!0},fields:{type:Array,required:!0},inline:{type:Boolean,default:!1},template:{type:String,default:null},open:{type:Boolean,default:!1},placeholder:{type:String,required:!0}},computed:{displayValue:function(){if(!this.template)return null;var e=this.$helpers.micromustache.render(this.template,this.row);return e},showPlaceholder:function(){var e=this,t=Object(d["a"])(this.template),n=t.every((function(t){var n;return null!==e.row[t]&&(null===(n=e.row[t])||void 0===n?void 0:n.length)>0}));return!1===n}}},f=p,h=(n("2cb0"),n("2877")),v=Object(h["a"])(f,u,c,!1,null,"428ad4f6",null),w=v.exports,g=n("8dee"),y=n.n(g);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={name:"Repeater",components:{RepeaterRow:w},mixins:[s.a],data:function(){return{rows:[],dragging:!1,open:null}},computed:{inline:function(){return!(this.repeaterFields.length>2)&&(1===this.repeaterFields.length||!1!==["full","fill"].includes(this.width)&&this.repeaterFields.every((function(e){return"half"===e.width})))},addButtonVisible:function(){return!this.options.limit||0===this.options.limit||this.rows.length<this.options.limit},repeaterFields:function(){var e=this;return Array.isArray(this.options.fields)?this.options.fields:Object.keys(this.options.fields).map((function(t){return b({},e.options.fields[t],{field:t})}))}},created:function(){this.setRows()},methods:{addRow:function(){this.rows=[].concat(Object(o["a"])(this.rows),[this.getNewRow()]),this.open=this.rows.length-1,this.emitValue()},updateRow:function(e,t){var n=t.field,i=t.value,r=_.clone(this.rows),o=r[e],a=b({},o,Object(l["a"])({},n,i));r[e]=a,this.rows=r,this.emitValue()},removeRow:function(e){var t=_.clone(this.rows);t.splice(e,1),this.rows=t,this.emitValue()},emitValue:function(){var e=_.clone(this.rows).map((function(e){return delete e.__key,e}));"object"===this.options.structure?this.$emit("input",_.keyBy(e,this.options.structure_key)):this.$emit("input",e)},getNewRow:function(){var e={__key:y.a.generate()};return this.repeaterFields.forEach((function(t){e[t.field]=t.default})),e},setRows:function(){if(null!==this.value)if(Array.isArray(this.value))this.rows=this.value;else if("string"===typeof this.value)try{this.rows=JSON.parse(this.value)}catch(e){console.warn("Invalid JSON passed to repeater")}else this.rows=Object.values(this.value);else this.rows=[]},endDrag:function(){this.dragging=!1,this.emitValue()},toggleOpen:function(e){this.open===e?this.open=null:this.open=e}}},j=O,R=(n("0c82"),Object(h["a"])(j,i,r,!1,null,"0007dda8",null));t["default"]=R.exports},"3e69":function(e,t,n){},4917:function(e,t,n){"use strict";var i=n("cb7c"),r=n("9def"),o=n("0390"),l=n("5f1b");n("214f")("match",1,(function(e,t,n,a){return[function(n){var i=e(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=i(e),u=String(this);if(!s.global)return l(s,u);var c=s.unicode;s.lastIndex=0;var d,p=[],f=0;while(null!==(d=l(s,u))){var h=String(d[0]);p[f]=h,""===h&&(s.lastIndex=o(u,r(s.lastIndex),c)),f++}return 0===f?null:p}]}))},"8db2":function(e,t){e.exports={props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},collection:{type:String,default:null},required:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null},width:{type:String,default:null,validator(e){return["half","half-left","half-right","full","fill"].includes(e)}}}}},f163:function(e,t,n){}}]);
//# sourceMappingURL=chunk-27dab218.87b66820.js.map