(function(e){function t(t){for(var s,o,l=t[0],r=t[1],c=t[2],d=0,h=[];d<l.length;d++)o=l[d],n[o]&&h.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,o=1;o<i.length;o++){var r=i[o];0!==n[r]&&(s=!1)}s&&(a.splice(t--,1),e=l(l.s=i[0]))}return e}var s={},n={app:0},a=[];function o(e){return l.p+"js/"+({"lang-cs-CZ":"lang-cs-CZ","lang-de-DE":"lang-de-DE","lang-fr-FR":"lang-fr-FR","lang-it-IT":"lang-it-IT","lang-nl-NL":"lang-nl-NL"}[e]||e)+"."+{"lang-cs-CZ":"f23541c8","lang-de-DE":"08018715","lang-fr-FR":"2ff4e622","lang-it-IT":"ecd67158","lang-nl-NL":"3ddd2734"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var s=new Promise(function(t,s){i=n[e]=[t,s]});t.push(i[2]=s);var a,r=document.getElementsByTagName("head")[0],c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=o(e),a=function(t){c.onerror=c.onload=null,clearTimeout(d);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+s+": "+a+")");o.type=s,o.request=a,i[1](o)}n[e]=void 0}};var d=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,r.appendChild(c)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(i,s,function(t){return e[t]}.bind(null,s));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var u=c;a.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"018c":function(e,t,i){"use strict";var s=i("9972"),n=i.n(s);n.a},"0191":function(e,t,i){"use strict";var s=i("55bd"),n=i.n(s);n.a},"04bd":function(e,t,i){"use strict";var s=i("cdfb"),n=i.n(s);n.a},"04ee":function(e,t,i){},"06e4":function(e,t,i){},"06ec":function(e,t,i){},"08a6":function(e,t,i){"use strict";var s=i("19bf"),n=i.n(s);n.a},"0a2d":function(e,t,i){},"0ae0":function(e,t,i){"use strict";var s=i("5865"),n=i.n(s);n.a},"0e6c":function(e,t,i){"use strict";var s=i("8e30"),n=i.n(s);n.a},"0ffd":function(e,t,i){"use strict";var s=i("dc98"),n=i.n(s);n.a},1054:function(e,t,i){"use strict";var s=i("d38e"),n=i.n(s);n.a},"10e3":function(e,t,i){"use strict";var s=i("ebe3"),n=i.n(s);n.a},"10f8":function(e,t,i){"use strict";var s=i("13f0"),n=i.n(s);n.a},1218:function(e,t,i){},1271:function(e,t,i){"use strict";i.r(t),i.d(t,"dateTimeFormats",function(){return s});const s={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",hour12:!0}};t["default"]={about_directus:"About Directus",activity:"Activity",my_activity:"My Activity",activity_log:"Activity Log",activity_outside_directus:"This item was created outside of Directus.",admin_email:"Admin Email",admin_password:"Admin Password",additional_info:"Additional Info",add_new:"Add new",add_field_filter:"Add a field filter",add_note:"Add a helpful note for users...",admin_settings:"Admin Settings",almost_done_options:"Almost Done! Now just review the interface options below.",almost_done_copy:"Every interface can be perfectly tailored to your needs. Below are the available options for this field, but only some are required.",all:"All",statuses:"Statuses",api_url:"API URL",api_installed:"API Successfully Installed",auto_generated:"Automatically generated...",batch:"Batch",batch_edit:"Batch Editing Items: {collection}",batch_delete:"Batch Delete",batch_delete_confirm:"No items have been selected | Are you sure you want to delete this item? This action can not be undone. | Are you sure you want to delete these {count} items? This action can not be undone.",between:"Between",both:"Both",bookmarks:"Bookmarks",cancel:"Cancel",change_project:"Change Project",choose_one:"Choose One",choose_project:"Choose Project",choose_interface:"Choose an interface for how this data should be managed.",clear:"Clear",click_to_toggle_all_none:"Click to toggle entire column on/off",connection:"Connection",collection:"Collection",collections_and_fields:"Collection & Fields",collection_updated:"{collection} Collection Updated",collection_removed:"{collection} Collection Removed",collection_names_cannot_be_changed:"Collection names cannot be edited at this time.",collections:"Collections",collection_count:"No Collections | One Collection | {count} Collections","collections-directus_files":"Files","collections-directus_users":"Users","collections-directus_activity":"Activity",comment:"Comment",comments:"Comments",coming_soon:"Coming Soon",contains:"Contains",config_error:"Missing Config",config_error_copy:"Make sure you've created the application's configuration file",collection_contains_items:"{collection} contains {count} items",currently_selected:"Currently selected: {thing}",create:"Create",creating_item:"Creating Item",creating_item_page_title:"Creating Item: {collection}",creating_role:"Creating Role",create_role:"Create Role",create_field:"Create Field",update_field:"Update Field",create_collection:"Create Collection",database_connection:"Database Connection",database_connection_copy:"Next, we need to know how to connect to the database where this project will be managed.",datatype:"Datatype",db_datatype:"{db} Datatype",editing_my_profile:"Editing My Profile",fieldtypes:{alias:"Fields that do not save data or do not have corresponding database columns",array:"Standard array format in API response",datetime:"A date and time in ISO format, eg: 2018-09-19T14:00:43.381Z",date:"Date, eg: 2018-09-19",time:"Time, eg: 14:09:22",file:"Foreign key to directus_files.id",group:"Groups fields together visually, children save group into directus_fields.group",integer:"Whole number",decimal:"Number that includes a decimal",json:"Standard JSON format in API response",lang:"Specific to translation interfaces, this stores the language key",m2o:"Many-to-One Relationship",o2m:"One-to-Many Relationship",sort:"System field used in drag-and-drop item reordering",status:"System field used for publishing workflows",string:"Any text, numbers, spaces, or symbols; defined and limited by its length (number of characters)",translation:"Specific to translation interfaces, this o2m is stores multi-lingual content",uuid:"A Universally Unique Identifier",datetime_created:"System field to track the datetime an item was created, used by revisions",datetime_updated:"System field to track the datetime an item was updated, used by revisions",user_created:"System field to track the user who created an item, used by revisions",user_updated:"System field to track the user who updated an item, used by revisions"},datatypes:{mysql:{CHAR:"A fixed-length non-binary string right-padded with spaces. Length can be 0 to 255 characters.",VARCHAR:"A variable-length non-binary string. Length can be 0 to 65,535 characters (MySQL 5.0.3+).",TINYTEXT:"A string with a max length of 255 characters.",TEXT:"A string with a max length of 65,535 characters.",MEDIUMTEXT:"A string with a max length of 16,777,215 characters.",LONGTEXT:"A string with a max length of 4,294,967,295 characters.",BOOLEAN:"True or false. Is saved as either 1 or 0 respectively.",TINYINT:"An integer. When signed (allows negative) length is -128 to 127, otherwise the max is 255.",SMALLINT:"An integer. When signed (allows negative) length is -32,768 to 32,767, otherwise the max is 65,535.",MEDIUMINT:"An integer. When signed (allows negative) length is -8,388,608 to 8,388,607, otherwise the max is 16,777,215.",INT:"An integer. When signed (allows negative) length is -2,147,483,648 to 2,147,483,647, otherwise the max is 4,294,967,295.",BIGINT:"An integer. When signed (allows negative) length is -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807, otherwise the max is 18,446,744,073,709,551,615.",DECIMAL:"An accurate number (eg: for currency), with 1 to 65 digits length (L) and 0 to 30 digits decimal (D). Length format: `L,D`",FLOAT:"An approximate binary number, 4 bytes with a floating decimal point.",DOUBLE:"An approximate binary number, 8 bytes with a floating decimal point.",DATE:"A date. Allows `1000-01-01` to `9999-12-31`.",DATETIME:"A date and time. Allows `1000-01-01 00:00:00` to `9999-12-31 23:59:59`.",TIMESTAMP:"A date and time. Allows `1970-01-01 00:00:01` UTC to `2038-01-19 03:14:07` UTC.",TIME:"A time. Allows `-838:59:59` to `838:59:59`.",YEAR:"A year. Allows `1901` to `2155` or `0000`"}},date_and_time:"Date & Time",db_user:"Database User",db_password:"Database User Password",db_name:"Database Name",db_type:"Database Type",db_column_name:"Database column name...",db_updated:"Database successfully updated",db_update_failed:"The database couldn't be updated.",default:"Default",delete:"Delete",delete_are_you_sure:"Are you sure you want to delete this item? This action can not be undone.",delete_collection_are_you_sure:"Are you sure you want to delete this collection? This action can not be undone.",delete_field_are_you_sure:'Are you sure you want to delete the field "{field}"? This action can not be undone.',delete_role_are_you_sure:'Are you sure to delete the role "{name}"? This action cannot be undone.',delete_bookmark:"Delete Bookmark",delete_bookmark_body:"Are you sure you want to delete this bookmark? This action cannot be undone.",description:"Description",delete_confirmation:"Delete Confirmation",dialog_beginning:"Beginning of dialog window.",discard_changes:"Discard Changes",display_name:"Display Name",drop_files:"Can't Drop Files | Drop file here... | Drop files here...",dont_show:"Don't Show",editing:"Editing Item: {collection}",editing_item:"Editing Item",editing_items:"Batch Editing {count} Items",editing_single:"Editing {collection}",email_address:"Email Address",email:"Email",empty_collection:"Empty Collection",empty_collection_body:"There are no items in this collection yet",enable_manual_sorting:"Enable manual sorting",enter_value:"Enter Value",enter_collection_name:"Enter collection name...",enter_role_name:"Enter role name...",environment:"Environment",project_key:"Project Key",errors:{"-1":"Couldn't reach API",11:"Can't connect to database",100:"Wrong username and/or password",101:"Logged out due to inactivity",102:"Logged out due to inactivity",103:"User inactive",106:"Wrong username and/or password",107:"User not found"},error_unknown:"Unknown error. Try again later.",esc_cancel:"Escape will cancel and close the window.",equal_to:"Equal to",existing:"Existing",fetching_data:"Fetching Data",field:"Field",field_type:"Field Type",field_created:"{field} Field Created",field_updated:"{field} Field Updated",field_removed:"{field} Field Removed",fields:"Fields",fields_are_saved_instantly:"Changes saved instantly",file:"File",file_library:"File Library",file_upload:"Upload File(s)",forgot_password:"Forgot Password",greater_than_equal:"Greater than or equal to",greater_than:"Greater than",help_and_docs:"Help & Docs",keep_editing:"Keep editing",hidden_detail:"Hidden on Detail",hidden_browse:"Hidden on Browse",host:"Host",in_list:"One of these",initial_schema:"Choose an Initial Schema",initial_schema_copy:"Choose from existing database architectures or start fresh. You can always extend and tweak this later.",interface:"Interface",interface_count:"No Interfaces | One Interface | {count} Interfaces",interfaces:"Interfaces",info:"Info",intelligent_defaults:"Advanced options lets you configure how data will be stored in the database and tweak additional app settings.",interface_settings:"Every interface can be perfectly tailored to your needs. Below are the available options for this interface, but only some are required.",install:"Install",install_copy:"This API has not been setup yet. Would you like to install and configure it now?",is_empty:"Is empty",is_not_null:"Is not NULL",is_null:"Is NULL",item_count:"No Items | One Item | {count} Items",event_count:"No Events | One Event | {count} Events",role_count:"No Roles | One Role | {count} Roles",item_count_filter:"No Filtered Items | One Filtered Item | {count} Filtered Items",item_deleted:"Item Deleted",item_saved:"Item Saved | {count} Items Saved",junction_collection:"Junction Collection",cant_disable_primary:"You can't disable primary key on an existing field. Remove this field instead.",extension_error:"There was a problem loading the {ext} extension.",extensions_missing:"No Extensions Found",extensions_missing_copy:"Make sure you have the system extensions installed.",latency:"Latency",learn_more:"Learn More",leave_comment:"Leave a comment...",length:"Length",length_disabled_placeholder:"Length is determined by the datatype",less_than_equal:"Less than or equal to",less_than:"Less than",limited:"Limited",loading:"Loading...",loading_more:"Loading more items...",login:"Log in",m2m:"Many-to-Many (M2M)",m2o:"Many-to-One (M2O)",o2m:"One-to-Many (O2M)",name:"Name",name_field:"Let’s name this {field} field and add a helpful note for users.",navigate_changes:"Are you sure you want to leave this page? The changes you made will be lost if you navigate away from this page.",new:"New",new_file:"New File",no_related_entries:"Has no related entries",not_between:"Not between",not_contains:"Doesn't contain",note:"Note",note_note:"An internal description...",note_hidden:"[Learn More](https://docs.directus.io/app/admin/collections.html#hidden)",note_icon:"The icon shown in the App's navigation sidebar",note_managed:"[Learn More](https://docs.directus.io/app/admin/collections.html#managing-collections)",note_single:"[Learn More](https://docs.directus.io/app/admin/collections.html#single)",no_results:"No Results",no_results_body:"The current filters do not match any collection items",no_collections:"No Collections Setup",no_collections_body:"It seems like there aren't any collections setup yet",no_fields:"No Fields Setup",no_fields_body:"It seems like this collection doesn't have any fields setup yet",no_files:"No Files",no_files_body:"It seems like there haven't been any files uploaded yet",numeric:"Numeric",page_not_found:"Page Not Found",page_not_found_body:"The page you are looking for doesn't seem to exist.",permissions:"Permissions",name_bookmark:"What would you like to name this bookmark?",next:"Next",none:"None",not_empty:"Is not empty",not_equal_to:"Not equal to",not_in_list:"Not one of these",no_interface_error:"Field {field} doesn't have an interface setup",manage:"Manage",max_size:"Max. Size: {size}",max_one_primary_key:"You can only have 1 primary key field per collection",dont_manage:"Don't Manage",dont_manage_copy:"Privileges, preferences, and settings for the {collection} collection will be permanently removed from the system! Are you sure?",more_options:"More options",mixed:"Mixed",my_profile:"My Profile",other:"Other",ok:"OK",operator:"Operator",open_on_gh:"Open on GitHub",options:"Options",password:"Password",password_reset_sent:"Password reset email sent to {email}",permissions_no_collections:"This project does not have any collections yet.",permissions_admin:"Admins have access to all managed data within the system by default.",permission_states:{none:"None",mine:"Mine Only",role:"Role Only",full:"All",read:"Readonly",create:"Create",on_create:"On Creation",update:"Update",on_update:"On Update",always:"Always"},popular:"Popular",powered_by_directus:"Powered by Directus",preview_and_revert:"Preview and Revert",primary_key:"Primary Key",port:"Port",project:"Project",project_name:"Project Name",project_info:"Project Information",project_info_copy:"Below are a few questions about your project, including the credentials of your first administrator.",read:"Read",readable_fields:"Readable Fields",readable_fields_copy:"Select the fields that the user can view",readonly:"Readonly",relational:"Relational",report_issue:"Report Issue",request_feature:"Request Feature",regex:"RegEx",relation_setup:"Since this is a relational field, we need to map-out the related fields.",relation_setup_copy:"There are different types of relational data, this interface uses one called {relation}.",related_entries:"Has related entries",related_collection:"Related Collection",remove:"Remove",remove_related:"Remove Related Item",relationship:"Relationship",required:"Required",reset_preferences:"Reset all listing preferences",reset_password:"Reset Password",revert:"Revert",revert_copy:"Do you want to revert this item to how it was on {date}?",roles:"User Roles",role_settings:"Role Settings",save:"Save",save_and_add:"Save and Add New",save_and_stay:"Save and Stay",save_as_copy:"Save as Copy",save_as_bookmark:"Save as Bookmark",schema:"Schema",search:"Search",select_from_device:"Select from device",select_existing:"Select Existing",select_field:"Select a Field",select_fields:"Select Fields",search_interface:"Search for an interface...",select_interface_below:"Select an interface below",select_statuses:"Select Statuses",select_statuses_copy:"Select the statuses the user can use",settings:"Settings",settings_project:"Project Settings",settings_global:"Global Settings",settings_update_database:"Update Database",settings_update_database_subtext:"Run Script",settings_update_database_confirm:"This will update the system fields in your database to the latest version of Directus. Please make sure to make a backup before you run this operation.",settings_collections_fields:"Collections & Fields",settings_permissions:"Roles & Permissions",settings_extensions:"Extensions",settings_saved:"Settings Saved",server_details:"Server Details",server_error:"Server Error",server_error_copy:"Something is wrong with this instance’s server or database.",server_trouble:"Server Trouble",server_trouble_copy:"Try again later or contact your system administrator help.",advanced_options:"Advanced options",show_directus_collections:"Show Directus System Collections",something_went_wrong:"Something went wrong.",something_went_wrong_body:"Trouble processing request. Try again after refreshing the page.",sign_in:"Sign In",signing_in:"Signing In",sign_out:"Sign Out",sign_out_confirm:"Are you sure you want to sign out?",sign_out_confirm_edits:"Are you sure you want to sign out? All unsaved changes will be lost.",text:"Text",this_collection:"This Collection",to:"To",unsaved_changes_copy:"You have unsaved changes! Are you sure you want to leave this page?",user_directory:"User Directory",update:"Update",update_confirm:"Are you sure you want to update {count} items?",unique:"Unique",user_edit_warning:"{first_name} {last_name} is editing this item too. Please coordinate with them so you don't lose your changes.",value:"Value",values:"Values",validation:"Validation",version:"Version",version_and_updates:"Version and Updates",view_type:"View As...",welcome:"Welcome",writable_fields:"Writable Fields",writable_fields_copy:"Select the fields that the user can edit",yes:"Yes",duplicating_field:"Duplicating Field",duplicate:"Duplicate"}},"13f0":function(e,t,i){},"19bf":function(e,t,i){},"1a11":function(e,t,i){"use strict";var s=i("d185"),n=i.n(s);n.a},"1c95":function(e,t,i){"use strict";var s=i("6471"),n=i.n(s);n.a},"1d1c":function(e,t,i){"use strict";var s=i("8e74"),n=i.n(s);n.a},"1e77":function(e,t,i){},"20da":function(e,t,i){"use strict";var s=i("fc6d"),n=i.n(s);n.a},2224:function(e,t,i){e.exports=i.p+"img/logo-dark.912f80a1.svg"},"230c":function(e,t,i){},"23e7":function(e,t,i){"use strict";var s=i("4348"),n=i.n(s);n.a},2734:function(e,t,i){"use strict";var s=i("06e4"),n=i.n(s);n.a},"28fe":function(e,t,i){},"2a2f":function(e,t,i){"use strict";var s=i("e4c9"),n=i.n(s);n.a},3352:function(e,t,i){},"362b":function(e,t,i){},3636:function(e,t,i){"use strict";var s=i("6f6d"),n=i.n(s);n.a},3839:function(e,t,i){},"39ed":function(e,t,i){"use strict";var s=i("7a1f"),n=i.n(s);n.a},"3b68":function(e,t,i){},"3d54":function(e,t,i){"use strict";var s=i("6dc4"),n=i.n(s);n.a},"3e5a":function(e,t,i){},"3f64":function(e,t,i){},"400b":function(e,t,i){},"40eb":function(e,t,i){},"41cb":function(e,t,i){"use strict";var s=i("3f64"),n=i.n(s);n.a},4299:function(e,t,i){"use strict";var s=i("06ec"),n=i.n(s);n.a},4348:function(e,t,i){},"448c":function(e,t,i){},"46c0":function(e,t,i){"use strict";var s=i("f8d5"),n=i.n(s);n.a},4749:function(e,t,i){},"4a6a":function(e,t,i){"use strict";var s=i("cbd8"),n=i.n(s);n.a},"4cca":function(e,t,i){"use strict";var s=i("b8f0"),n=i.n(s);n.a},"4d26":function(e,t,i){},"4e86":function(e,t,i){},"51e9":function(e,t,i){"use strict";var s=i("7cf0"),n=i.n(s);n.a},"53eb":function(e,t,i){"use strict";var s=i("3b68"),n=i.n(s);n.a},"553a":function(e,t,i){"use strict";var s=i("4d26"),n=i.n(s);n.a},"55bd":function(e,t,i){},"56d7":function(e,t,i){"use strict";i.r(t);var s={};i.r(s),i.d(s,"LOGIN_PENDING",function(){return On}),i.d(s,"LOGIN_SUCCESS",function(){return Sn}),i.d(s,"LOGIN_FAILED",function(){return En}),i.d(s,"LOGOUT",function(){return jn}),i.d(s,"REFRESH_TOKEN",function(){return Tn}),i.d(s,"REMOVE_AUTH_ERROR",function(){return Fn}),i.d(s,"CHANGE_API",function(){return Nn}),i.d(s,"SET_BOOKMARKS",function(){return An}),i.d(s,"ADD_BOOKMARK",function(){return Mn}),i.d(s,"DELETE_BOOKMARK",function(){return qn}),i.d(s,"SET_COLLECTIONS",function(){return Dn}),i.d(s,"ADD_COLLECTION",function(){return Pn}),i.d(s,"DELETE_COLLECTION",function(){return Ln}),i.d(s,"UPDATE_COLLECTION",function(){return Rn}),i.d(s,"DISCARD_CHANGES",function(){return Bn}),i.d(s,"ITEM_CREATED",function(){return Vn}),i.d(s,"START_EDITING",function(){return Un}),i.d(s,"UNSTAGE_VALUE",function(){return Kn}),i.d(s,"STAGE_VALUE",function(){return zn}),i.d(s,"ADD_FIELD",function(){return Wn}),i.d(s,"UPDATE_FIELD",function(){return Hn}),i.d(s,"UPDATE_FIELDS",function(){return Gn}),i.d(s,"REMOVE_FIELD",function(){return Qn}),i.d(s,"SET_INTERFACES",function(){return Xn}),i.d(s,"SET_LAYOUTS",function(){return Yn}),i.d(s,"SET_PAGES",function(){return Jn}),i.d(s,"STORE_HYDRATED",function(){return Zn}),i.d(s,"HYDRATING_FAILED",function(){return ea}),i.d(s,"SET_PERMISSIONS",function(){return ta}),i.d(s,"ADD_PERMISSION",function(){return ia}),i.d(s,"LATENCY",function(){return sa}),i.d(s,"LOADING_START",function(){return na}),i.d(s,"LOADING_FINISHED",function(){return aa}),i.d(s,"SET_CURRENT_USER",function(){return oa}),i.d(s,"UPDATE_CURRENT_USER",function(){return la}),i.d(s,"SET_RELATIONS",function(){return ra}),i.d(s,"ADD_RELATION",function(){return ca}),i.d(s,"UPDATE_RELATION",function(){return da}),i.d(s,"SET_SERVER_INFO",function(){return ua}),i.d(s,"TOGGLE_NAV",function(){return ha}),i.d(s,"TOGGLE_INFO",function(){return pa}),i.d(s,"SET_USERS",function(){return ma}),i.d(s,"PUSH_NOTIFICATION",function(){return fa}),i.d(s,"REMOVE_NOTIFICATION",function(){return va});var n={};i.r(n),i.d(n,"login",function(){return $l}),i.d(n,"loginSSO",function(){return kl}),i.d(n,"refresh",function(){return wl}),i.d(n,"logout",function(){return Cl}),i.d(n,"changeAPI",function(){return xl}),i.d(n,"removeAuthError",function(){return Il}),i.d(n,"clearAuth",function(){return Ol});var a={};i.r(a),i.d(a,"tokenPayload",function(){return jl}),i.d(a,"loggedIn",function(){return Tl});var o={};i.r(o),i.d(o,"getExtensions",function(){return Ml}),i.d(o,"getAllExtensions",function(){return ql});var l={};i.r(l),i.d(l,"addField",function(){return Bl}),i.d(l,"updateField",function(){return Vl}),i.d(l,"updateFields",function(){return Ul}),i.d(l,"removeField",function(){return Kl}),i.d(l,"getCollections",function(){return zl}),i.d(l,"addCollection",function(){return Wl}),i.d(l,"removeCollection",function(){return Hl}),i.d(l,"updateCollection",function(){return Gl});var r={};i.r(r),i.d(r,"discardChanges",function(){return Zl}),i.d(r,"startEditing",function(){return er}),i.d(r,"stageValue",function(){return tr}),i.d(r,"unstageValue",function(){return ir}),i.d(r,"save",function(){return sr});var c={};i.r(c),i.d(c,"editing",function(){return nr});var d={};i.r(d),i.d(d,"addPermission",function(){return cr}),i.d(d,"getPermissions",function(){return dr});var u={};i.r(u),i.d(u,"getSettings",function(){return _r}),i.d(u,"setSettings",function(){return gr}),i.d(u,"setSetting",function(){return yr});var h={};i.r(h),i.d(h,"getUsers",function(){return $r});var p={};i.r(p),i.d(p,"getRelations",function(){return xr}),i.d(p,"addRelation",function(){return Ir}),i.d(p,"updateRelation",function(){return Or});var m={};i.r(m),i.d(m,"m2o",function(){return Sr}),i.d(m,"o2m",function(){return Er});var f={};i.r(f),i.d(f,"getServerInfo",function(){return Ar});var v={};i.r(v),i.d(v,"latency",function(){return Vr}),i.d(v,"getCurrentUser",function(){return Ur}),i.d(v,"track",function(){return Kr}),i.d(v,"getBookmarks",function(){return zr}),i.d(v,"saveBookmark",function(){return Wr}),i.d(v,"deleteBookmark",function(){return Hr}),i.d(v,"loadingStart",function(){return Gr}),i.d(v,"loadingFinished",function(){return Qr});var _={};i.r(_),i.d(_,"signalStrength",function(){return Xr});var g=i("2b0e"),y=i("2ef0"),b=i.n(y),$=i("1516"),k=i.n($),w=i("e37d"),C=i("8682"),x=i("5cd9"),I=i.n(x),O=i("bc3a"),S=i.n(O),E=i("0a89"),j=i.n(E),T=i("52cf"),F=i.n(T),N=i("8424"),A=i.n(N),M=(i("e008"),i("a725"),i("5b7e")),q=i.n(M),D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"invisible-label",attrs:{for:e.htmlFor}},[e._t("default")],2)},P=[],L={name:"invisible-label",props:{htmlFor:{type:String,required:!0}}},R=L,B=(i("7d60"),i("2877")),V=Object(B["a"])(R,D,P,!1,null,"f1a34b78",null);V.options.__file="invisible-label.vue";var U=V.exports,K=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"loader",class:e.area,style:{zIndex:e.zIndex}},[i("div",{staticClass:"overlay",class:{transparent:e.transparent}}),i("transition",{attrs:{name:"fade"}},[i("v-spinner",{directives:[{name:"show",rawName:"v-show",value:e.spinnerActive,expression:"spinnerActive"}],staticClass:"spinner",attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1)],1)])},z=[],W={name:"loader",props:{area:{type:String,default:null,validator(e){const t=["content","full-page"];return t.includes(e)}},transparent:{type:Boolean,default:!1},delay:{type:Number,default:0},spinnerDelay:{type:Number,default:0},zIndex:{type:Number,default:500}},data(){return{active:!1,spinnerActive:!1}},created(){setTimeout(()=>{this.active=!0},this.delay),setTimeout(()=>{this.spinnerActive=!0},this.delay+this.spinnerDelay)}},H=W,G=(i("66c3"),Object(B["a"])(H,K,z,!1,null,"66cc8276",null));G.options.__file="loader.vue";var Q=G.exports,X=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-avatar"},[i("div",{staticClass:"wrapper",style:{borderColor:"var(--"+e.color+")",width:e.size+"px",height:e.size+"px"}},[null==e.src||e.error?i("i",{staticClass:"material-icons",style:{fontSize:e.size/2+2+"px"}},[e._v("person")]):i("img",{directives:[{name:"show",rawName:"v-show",value:!e.error&&!1===e.loading,expression:"!error && loading === false"}],attrs:{src:e.src,alt:e.alt},on:{load:function(t){e.loading=!1},error:e.onImageLoadingError}})]),e.indicator?i("div",{staticClass:"indicator",style:{backgroundColor:"var(--"+e.color+")"}}):e._e()])},Y=[],J={name:"v-avatar",props:{src:{type:String,default:null},alt:{type:String,required:!0},indicator:{type:Boolean,default:!1},color:{type:String,default:"accent"},size:{type:Number,default:40}},data(){return{loading:!1,error:!1}},methods:{onImageLoadingError(e){this.error=e,this.loading=!1}},watch:{src(){this.error=!1}}},Z=J,ee=(i("8c32"),Object(B["a"])(Z,X,Y,!1,null,"18265494",null));ee.options.__file="avatar.vue";var te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.element,{tag:"component",staticClass:"v-card",class:{link:e.link,selected:e.selected,selectable:e.selectable,"selection-mode":e.selectionMode,disabled:e.disabled},on:{click:function(t){e.$emit("click",t)}}},[i(e.wrapperTag,{tag:"component",attrs:{to:e.to,href:e.href,target:"__blank"}},[e.src||e.icon||e.$slots.icon?i("div",{staticClass:"header",style:{backgroundColor:"var(--"+e.color+")"}},[e.selectable?i("button",{staticClass:"select",attrs:{type:"button"},on:{click:function(t){t.stopPropagation(),e.$emit("select")}}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.selectionIcon))])]):e._e(),e.src&&!e.error?i("img",{attrs:{alt:e.title,src:e.src},on:{error:e.onImageError}}):e._e(),e.error?i("i",{staticClass:"material-icons error icon"},[e._v("broken_image")]):e._e(),e.icon?i("i",{staticClass:"material-icons icon",class:{"half-opacity":"half"===e.opacity}},[e._v(e._s(e.icon))]):e._e(),e.$slots.icon?i("div",{staticClass:"custom-icon"},[e._t("icon")],2):e._e(),e.label?i("span",{staticClass:"label"},[e._v(e._s(e.label))]):e._e()]):i("div",{staticClass:"header small",style:{backgroundColor:"var(--"+e.color+")"}},[e.selectable?i("button",{staticClass:"select",attrs:{type:"button"},on:{click:function(t){t.stopPropagation(),e.$emit("select")}}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.selectionIcon))])]):e._e()]),i("div",{staticClass:"body",class:{menu:null!=e.options}},[i("div",{staticClass:"main"},[i(e.titleElement,{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.title,expression:"title"}],tag:"component",staticClass:"title"},[e._v(e._s(e.title))]),e.subtitle?i("p",{staticClass:"subtitle style-4"},[e._v(e._s(e.subtitle))]):e._e(),e.body?i("p",{staticClass:"content"},[e._v(e._s(e.body))]):e._e()],1),i("v-popover",{attrs:{placement:"right-start",offset:"2"}},[null!=e.options?i("button",{staticClass:"menu-toggle",attrs:{type:"button"}},[i("i",{staticClass:"material-icons"},[e._v("more_vert")])]):e._e(),i("template",{slot:"popover"},[i("ul",{staticClass:"ctx-menu"},e._l(e.options,function(t,s){var n=t.text,a=t.icon;return i("li",{key:s},[i("button",{attrs:{type:"button"},on:{click:function(t){e.$emit(s)}}},[a?i("i",{staticClass:"material-icons"},[e._v(e._s(a))]):e._e(),e._v("\n                "+e._s(n)+"\n              ")])])}))])],2)],1)])],1)},se=[],ne={name:"v-card",props:{element:{type:String,default:"article"},titleElement:{type:String,default:"h2"},icon:{type:String,default:null},color:{type:String,default:"darkest-gray"},src:{type:String,default:null},title:{type:String,required:!0},subtitle:{type:String,default:null},body:{type:String,default:null},to:{type:String,default:null},href:{type:String,default:null},label:{type:String,default:null},opacity:{type:String,default:"full",validator(e){return["full","half"].includes(e)}},selected:{type:Boolean,default:null},selectionMode:{type:Boolean,default:!1},options:{type:Object,default:null},disabled:{type:Boolean,default:!1}},data(){return{error:null}},computed:{wrapperTag(){return this.to?"router-link":this.href?"a":"div"},link(){return!(!this.to&&!this.href)},selectable(){return null!==this.selected},selectionIcon(){return this.selected?"check_circle":this.selectionMode&&!this.selected?"radio_button_unchecked":"check_circle"}},methods:{onImageError(e){this.error=e}},watch:{src(){this.error=null}}},ae=ne,oe=(i("3636"),Object(B["a"])(ae,ie,se,!1,null,"233cccff",null));oe.options.__file="card.vue";var le=oe.exports,re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("details",{staticClass:"v-details",class:e.type,attrs:{open:e.open}},[i("summary",[e._v(e._s(e.title))]),i("div",{staticClass:"content"},[e._t("default")],2)])},ce=[],de={name:"v-details",props:{title:{type:String,default:null},open:{type:Boolean,default:!1},type:{type:String,default:"group",validator(e){return["group","break"].includes(e)}}}},ue=de,he=(i("1054"),Object(B["a"])(ue,re,ce,!1,null,"b376f3fc",null));he.options.__file="details.vue";var pe=he.exports,me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"v-table",style:{minWidth:e.totalWidth+"px"},on:{scroll:e.onScroll}},[i("div",{staticClass:"toolbar",class:{shadow:e.scrolled}},[e.manualSortField?i("div",{staticClass:"manual-sort cell",class:{active:e.manualSorting}},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("enable_manual_sorting"),expression:"$t('enable_manual_sorting')"}],on:{click:e.startManualSorting}},[i("i",{staticClass:"material-icons"},[e._v("sort")])])]):e._e(),e.selectable?i("div",{staticClass:"select cell"},[i("v-checkbox",{attrs:{id:"select-all",checked:e.allSelected,name:"select-all",value:"all"},on:{change:e.selectAll}})],1):e._e(),e._l(e.columns,function(t,s){var n=t.field,a=t.name;return i("div",{key:n,staticClass:"cell",style:{flexBasis:e.widths&&e.widths[n]?e.widths[n]+"px":null}},[e.sortable&&"o2m"!==e.columns[s].fieldInfo.type.toLowerCase()&&"m2o"!==e.columns[s].fieldInfo.type.toLowerCase()&&"translation"!==e.columns[s].fieldInfo.type.toLowerCase()?i("button",{staticClass:"sort style-4 no-wrap",class:{active:e.sortVal.field===n},on:{click:function(t){e.updateSort(n)}}},[e._v("\n        "+e._s(e.widths[n]>40?a:null)),e.sortVal.field===n?i("i",{staticClass:"material-icons"},[e._v(e._s(e.sortVal.asc?"arrow_upward":"arrow_downward"))]):e._e()]):i("span",{staticClass:"style-4"},[e._v(e._s(e.widths[n]>40?a:null))]),e.resizeable&&s!==e.columns.length-1?i("div",{staticClass:"drag-handle",attrs:{draggable:""},on:{drag:function(t){e.drag(n,t)},dragstart:e.hideDragImage,dragend:e.dragEnd}},[i("div",{staticClass:"drag-handle-line"})]):e._e()])})],2),i("div",{staticClass:"body",class:{loading:e.loading,dragging:e.dragging}},[e.loading&&0===e.items.length?i("div",{staticClass:"loader"},e._l(50,function(t){return i("div",{key:t,staticClass:"row",style:{height:e.rowHeight+"px"}})})):e._e(),i(e.manualSorting?"draggable":"div",{tag:"component",attrs:{options:{handle:".manual-sort"}},on:{start:e.startSort,end:e.saveSort},model:{value:e.itemsManuallySorted,callback:function(t){e.itemsManuallySorted=t},expression:"itemsManuallySorted"}},[e.link?e._l(e.itemsArray,function(t){return i("div",{key:t[e.primaryKeyField],staticClass:"link row",class:{selected:e.selection&&e.selection.includes(t[e.primaryKeyField])},style:{height:e.rowHeight+"px"},attrs:{tabindex:"0",role:"link"},on:{click:function(i){i.stopPropagation(),e.$router.push(t[e.link])},keyup:function(i){if(!("button"in i)&&e._k(i.keyCode,"enter",13,i.key,"Enter"))return null;i.stopPropagation(),e.$router.push(t[e.link])}}},[e.manualSortField?i("div",{staticClass:"manual-sort cell",class:{active:e.manualSorting},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[i("i",{staticClass:"material-icons"},[e._v("drag_handle")])]):e._e(),e.selectable?i("div",{staticClass:"cell select",on:{click:function(e){e.stopPropagation()}}},[i("v-checkbox",{attrs:{id:"check-"+t[e.primaryKeyField],value:t[e.primaryKeyField],checked:e.selection.includes(t[e.primaryKeyField])},on:{change:function(i){e.toggleCheckbox(t[e.primaryKeyField])}}})],1):e._e(),e._l(e.columns,function(s){var n=s.field,a=s.fieldInfo;return i("div",{key:n,staticClass:"cell",style:{flexBasis:e.widths&&e.widths[n]?e.widths[n]+"px":null}},[""===t[n]||e.$lodash.isNil(t[n])?i("div",{staticClass:"empty"},[e._v("\n              --\n            ")]):e.useInterfaces&&!e.$lodash.isNil(t[n])?i("v-ext-display",{attrs:{"interface-type":a.interface,name:n,type:a.type,datatype:a.datatype,options:a.options,value:t[n]}}):[e._v(e._s(t[n]))]],2)})],2)}):e._l(e.itemsArray,function(t){return i("div",{key:t[e.primaryKeyField],staticClass:"row",style:{height:e.rowHeight+"px"}},[e.selectable?i("div",{staticClass:"select",on:{click:function(e){e.stopPropagation()}}},[i("v-checkbox",{attrs:{id:"check-"+t[e.primaryKeyField],value:t[e.primaryKeyField],checked:e.selection.includes(t[e.primaryKeyField])},on:{change:function(i){e.toggleCheckbox(t[e.primaryKeyField])}}})],1):e._e(),e._l(e.columns,function(s){var n=s.field,a=s.fieldInfo;return i("div",{key:n,staticClass:"cell",style:{flexBasis:e.widths&&e.widths[n]?e.widths[n]+"px":null}},[""===t[n]||e.$lodash.isNil(t[n])?i("div",{staticClass:"empty"},[e._v("\n              --\n            ")]):e.useInterfaces&&!e.$lodash.isNil(t[n])?i("v-ext-display",{attrs:{"interface-type":a.interface,name:n,type:a.type,options:a.options,value:t[n]}}):[e._v(e._s(t[n]))]],2)})],2)})],2)],1),i("transition",{attrs:{name:"fade"}},[e.lazyLoading?i("div",{staticClass:"lazy-loader"},[i("v-spinner",{attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1):e._e()])],1)},fe=[],ve=(i("ac6a"),i("55dd"),{name:"v-table",props:{loading:{type:Boolean,default:!1},lazyLoading:{type:Boolean,default:!1},items:{type:Array,required:!0},height:{type:Number,default:null},columns:{type:Array,required:!0},link:{type:String,default:null},selection:{type:Array,default:null},sortVal:{type:Object,default:null},manualSortField:{type:String,default:null},primaryKeyField:{type:String,required:!0},rowHeight:{type:Number,default:40},columnWidths:{type:Object,default:null},useInterfaces:{type:Boolean,default:!1}},data(){return{widths:{},lastDragXPosition:null,windowHeight:0,scrolled:!1,dragging:!1,manualSorting:!1,itemsManuallySorted:[]}},computed:{allSelected(){const e=this.items.map(e=>e[this.primaryKeyField]).sort(),t=[...this.selection];return t.sort(),this.selection.length>0&&this.$lodash.isEqual(e,t)},selectable(){return Array.isArray(this.selection)},sortable(){return this.$lodash.isObject(this.sortVal)},resizeable(){return this.$lodash.isObject(this.columnWidths)},totalWidth(){return Object.keys(this.widths).map(e=>this.widths[e]).reduce((e,t)=>e+t,0)+30+40},itemsArray(){return this.manualSorting?this.itemsManuallySorted:this.items}},created(){this.initWidths(),this.manualSortField&&this.sortVal&&this.sortVal.field===this.manualSortField&&!0===this.sortVal.asc&&(this.manualSorting=!0,this.itemsManuallySorted=this.items)},watch:{columnWidths(){this.initWidths()},columns(){this.initWidths()},items(e){this.itemsManuallySorted=e}},methods:{selectAll(){if(this.allSelected)return this.$emit("select",[]);const e=this.items.map(e=>e[this.primaryKeyField]);return this.$emit("select",e)},updateSort(e,t){if(this.manualSorting=!1,t){const i={field:e,asc:"asc"===t};return this.$emit("sort",i)}const i={field:e,asc:e===this.sortVal.field?!this.sortVal.asc:"ASC"};this.$emit("sort",i)},toggleCheckbox(e){const t=[...this.selection];this.selection.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.$emit("select",t)},drag(e,t){const i=t.screenX;if(0!==i&&this.lastDragXPosition){const t=i-this.lastDragXPosition,s=this.widths[e]+t;this.widths[e]=s}this.lastDragXPosition=i},dragEnd(){this.lastDragXPosition=0,this.$emit("widths",this.widths)},hideDragImage(e){const t=document.createElement("img");t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.effectAllowed="move"},initWidths(){const e={};this.columns.forEach(t=>{let i=t.field;e[i]=this.columnWidths&&this.columnWidths[i]||200}),this.widths=e},onScroll(e){const t=e.srcElement,i=t.scrollHeight,s=t.clientHeight,n=t.scrollTop,a=i-s,o=a-n;o<=500&&this.$emit("scroll-end"),this.scrolled=n>0},startManualSorting(){this.manualSorting?this.manualSorting=!1:(this.updateSort(this.manualSortField,"asc"),this.manualSorting=!0)},startSort(){this.dragging=!0},saveSort(){return this.dragging=!1,this.itemsManuallySorted.some(e=>null==e[this.manualSortField])?this.$emit("input",this.itemsManuallySorted.map((e,t)=>({[this.primaryKeyField]:e[this.primaryKeyField],[this.manualSortField]:t+1}))):this.$emit("input",this.itemsManuallySorted.map((e,t)=>({[this.primaryKeyField]:e[this.primaryKeyField],[this.manualSortField]:this.items[t][this.manualSortField]})))}}}),_e=ve,ge=(i("fcea"),Object(B["a"])(_e,me,fe,!1,null,"e3f4aa20",null));ge.options.__file="table.vue";var ye=ge.exports,be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-ext-input",attrs:{name:e.name,id:e.name,"input-name":e.id,value:e.value,type:e.typeOrDefault,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.optionsWithDefaults,"new-item":e.newItem,relation:e.relation,fields:e.fields,values:e.values},on:{input:function(t){e.$emit("input",t)},setfield:function(t){e.$emit("setfield",t)}}},[e._t("default")],2)},$e=[],ke=(i("a481"),i("be94"));function we(e){return new Promise((t,i)=>{const s=document.createElement("script"),n=document.createElement("link");function a(){s.remove(),window.__DirectusExtension__=null}function o(){const e=window.__DirectusExtension__;t(e),a()}function l(e){i(e),a()}n.rel="stylesheet",n.href=e.slice(0,-2)+"css",n.onerror=function(){this.remove()},s.onload=o,s.onerror=l,s.src=e,document.body.appendChild(s),document.body.appendChild(n)})}function Ce(e){return g["default"].options.components[e]&&Object.keys(g["default"].options.components[e]).length>0}var xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-input",{staticClass:"v-ext-input-fallback",attrs:{value:e.value},on:{input:function(t){e.$emit("input",t)}}})},Ie=[],Oe={name:"v-ext-input-fallback",props:{value:{type:null,default:""},inputName:{type:String,default:""},name:{type:String,default:""}},created(){null==this.inputName?this.$notify({title:this.$t("no_interface_error",{field:this.$helpers.formatTitle(this.name)}),color:"red",iconMain:"error"}):this.$notify({title:this.$t("extension_error",{ext:this.inputName}),color:"red",iconMain:"error"})}},Se=Oe,Ee=(i("7d98"),Object(B["a"])(Se,xe,Ie,!1,null,"17f58b8e",null));Ee.options.__file="input-fallback.vue";var je=Ee.exports,Te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-spinner",{staticClass:"v-ext-input-loading",attrs:{size:"20","line-fg-color":"var(--lighter-gray)","line-bg-color":"var(--lightest-gray)"}})},Fe=[],Ne={name:"v-ext-input-loading"},Ae=Ne,Me=(i("6426"),Object(B["a"])(Ae,Te,Fe,!1,null,"c4817e4a",null));Me.options.__file="input-loading.vue";var qe=Me.exports,De=i("a925"),Pe=i("1271");g["default"].use(De["a"]);const Le=new De["a"]({locale:"en-US",fallbackLocale:"en-US",messages:{"en-US":Pe["default"]},dateTimeFormats:{"en-US":Pe["dateTimeFormats"]},silentTranslationWarn:!0}),Re=["en-US"];function Be(e){return Le.locale=e,document.querySelector("html").setAttribute("lang",e),e}function Ve(e){return Le.locale!==e?Re.includes(e)?Promise.resolve(Be(e)):i("8701")(`./${e}`).then(t=>{return Le.setLocaleMessage(e,t.default),Le.setDateTimeFormat(e,t.dateTimeFormats),Re.push(e),Be(e)}):Promise.resolve(e)}const Ue={"cs-CZ":"Czech (Czech Republic)","nl-NL":"Dutch (Netherlands)","en-US":"English (United States)","fr-FR":"French (France)","de-DE":"German (Germany)","it-IT":"Italian (Italy)"};Le.availableLanguages=Ue;const Ke={mysql:{CHAR:{length:!0,defaultLength:50,maxLength:255,description:Le.t("datatypes.mysql.CHAR"),fallbackInterface:"text-input"},VARCHAR:{length:!0,defaultLength:255,maxLength:65535,description:Le.t("datatypes.mysql.VARCHAR"),fallbackInterface:"text-input"},TINYTEXT:{description:Le.t("datatypes.mysql.TINYTEXT"),fallbackInterface:"textarea"},TEXT:{description:Le.t("datatypes.mysql.TEXT"),fallbackInterface:"textarea"},MEDIUMTEXT:{description:Le.t("datatypes.mysql.MEDIUMTEXT"),fallbackInterface:"textarea"},LONGTEXT:{description:Le.t("datatypes.mysql.LONGTEXT"),fallbackInterface:"textarea"},TINYINT:{description:Le.t("datatypes.mysql.TINYINT"),fallbackInterface:"toggle"},SMALLINT:{description:Le.t("datatypes.mysql.SMALLINT"),fallbackInterface:"numeric"},MEDIUMINT:{description:Le.t("datatypes.mysql.MEDIUMINT"),fallbackInterface:"numeric"},INT:{description:Le.t("datatypes.mysql.INT"),fallbackInterface:"numeric"},BIGINT:{description:Le.t("datatypes.mysql.BIGINT"),fallbackInterface:"numeric"},DECIMAL:{decimal:!0,description:Le.t("datatypes.mysql.DECIMAL"),defaultDigits:10,maxDigits:65,defaultDecimals:10,maxDecimals:30,fallbackInterface:"numeric"},FLOAT:{decimal:!0,description:Le.t("datatypes.mysql.FLOAT"),defaultDigits:10,defaultDecimals:10,fallbackInterface:"numeric"},DOUBLE:{decimal:!0,description:Le.t("datatypes.mysql.DOUBLE"),defaultDigits:10,defaultDecimals:10,fallbackInterface:"numeric"},DATE:{description:Le.t("datatypes.mysql.DATE"),fallbackInterface:"date"},DATETIME:{description:Le.t("datatypes.mysql.DATETIME"),fallbackInterface:"datetime"},TIME:{description:Le.t("datatypes.mysql.TIME"),fallbackInterface:"time"},TIMESTAMP:{description:Le.t("datatypes.mysql.TIMESTAMP"),fallbackInterface:"time"},YEAR:{description:Le.t("datatypes.mysql.YEAR"),fallbackInterface:"numeric"}}};var ze={alias:{description:Le.t("fieldtypes.alias"),mysql:{datatypes:null,default:null}},array:{description:Le.t("fieldtypes.array"),mysql:{datatypes:["VARCHAR"],default:"VARCHAR"}},boolean:{description:Le.t("fieldtypes.boolean"),mysql:{datatypes:["TINYINT"],default:"TINYINT"}},date:{description:Le.t("fieldtypes.date"),mysql:{datatypes:["DATE"],default:"DATE"}},datetime:{description:Le.t("fieldtypes.datetime"),mysql:{datatypes:["DATETIME"],default:"DATETIME"}},datetime_created:{description:Le.t("fieldtypes.datetime_created"),mysql:{datatypes:["DATETIME"],default:"DATETIME"}},datetime_updated:{description:Le.t("fieldtypes.datetime_updated"),mysql:{datatypes:["DATETIME"],default:"DATETIME"}},decimal:{description:Le.t("fieldtypes.decimal"),mysql:{datatypes:["DECIMAL","FLOAT","DOUBLE"],default:"DECIMAL"}},time:{description:Le.t("fieldtypes.time"),mysql:{datatypes:["TIME"],default:"TIME"}},file:{description:Le.t("fieldtypes.file"),mysql:{datatypes:["INT"],default:"INT"}},group:{description:Le.t("fieldtypes.group"),mysql:{datatypes:null,default:null}},integer:{description:Le.t("fieldtypes.integer"),mysql:{datatypes:["TINYINT","SMALLINT","MEDIUMINT","INT","BIGINT"],default:"INT"}},json:{description:Le.t("fieldtypes.json"),mysql:{datatypes:["VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT"],default:"TEXT"}},lang:{description:Le.t("fieldtypes.lang"),mysql:{datatypes:["CHAR","VARCHAR"],default:"CHAR"}},m2o:{description:Le.t("fieldtypes.m2o"),mysql:{datatypes:["CHAR","VARCHAR","INT"],default:"INT"}},o2m:{description:Le.t("fieldtypes.o2m"),mysql:{datatypes:null,default:null}},sort:{description:Le.t("fieldtypes.sort"),mysql:{datatypes:["TINYINT","SMALLINT","MEDIUMINT","INT","BIGINT"],default:"INT"}},status:{description:Le.t("fieldtypes.status"),mysql:{datatypes:["CHAR","VARCHAR","INT"],default:"VARCHAR"}},string:{description:Le.t("fieldtypes.string"),mysql:{datatypes:["CHAR","VARCHAR","TINYTEXT","TEXT","MEDIUMTEXT","LONGTEXT"],default:"VARCHAR"}},translation:{description:Le.t("fieldtypes.translation"),mysql:{datatypes:null,default:null}},uuid:{description:Le.t("fieldtypes.uuid"),mysql:{datatypes:["VARCHAR"],default:"VARCHAR"}},user_created:{description:Le.t("fieldtypes.user_created"),mysql:{datatypes:["INT"],default:"INT"}},user_updated:{description:Le.t("fieldtypes.user_updated"),mysql:{datatypes:["INT"],default:"INT"}}},We={name:"v-ext-input",props:{id:{type:String,default:null},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,default:null},datatype:{type:String,default:null},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null}},computed:{interfaces(){return this.$store.state.extensions.interfaces},interface(){return null===this.id?this.interfaceFallback:this.interfaces&&this.interfaces[this.id]},databaseVendor(){return this.$store.state.serverInfo.databaseVendor},componentName(){return null===this.id?this.componentNameFallback:`input-${this.id}`},typeOrDefault(){return this.interface?this.type?this.type:this.interface&&this.interface.types[0]:null},optionsWithDefaults(){if(!this.interface)return{};const e=this.$lodash.mapValues(this.interface.options,e=>e.default||null);return Object(ke["a"])({},e,this.options)},componentNameFallback(){return`input-${this.interfaceFallback.id}`},interfaceFallback(){if(null==this.datatype)return this.interfaces["text-input"];const e=Ke[this.databaseVendor][this.datatype].fallbackInterface;return this.interfaces[e]}},watch:{id(){this.registerInterface()}},created(){this.registerInterface()},methods:{registerInterface(){if(Ce(this.componentName))return;const e=`${this.$api.url}/${this.interface.path.replace("meta.json","input.js")}`;g["default"].component(this.componentName,()=>({component:we(e),error:je,loading:qe}))}}},He=We,Ge=Object(B["a"])(He,be,$e,!1,null,null,null);Ge.options.__file="input.vue";var Qe=Ge.exports,Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-ext-display",attrs:{name:e.name,value:e.value,type:e.type,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.optionsWithDefaults}})},Ye=[],Je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-ext-display-fallback"},[e._v(e._s(e.value))])},Ze=[],et={name:"v-ext-display-fallback",props:{value:{type:null,default:""}}},tt=et,it=Object(B["a"])(tt,Je,Ze,!1,null,null,null);it.options.__file="display-fallback.vue";var st=it.exports,nt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-spinner",{staticClass:"v-ext-display-loading",attrs:{size:"20","line-fg-color":"var(--lighter-gray)","line-bg-color":"var(--lightest-gray)"}})},at=[],ot={name:"v-ext-display-loading"},lt=ot,rt=(i("1a11"),Object(B["a"])(lt,nt,at,!1,null,"3d628623",null));rt.options.__file="display-loading.vue";var ct=rt.exports,dt={name:"v-ext-display",props:{interfaceType:{type:String,default:null},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,default:null},datatype:{type:String,default:null},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},components:{VExtDisplayFallback:st},computed:{interfaces(){return this.$store.state.extensions.interfaces},interfaceInfo(){return null===this.interfaceType?this.interfaceFallback:this.interfaces&&this.interfaces[this.interfaceType]},componentName(){return null===this.interfaceType?this.componentNameFallback:`display-${this.interfaceType}`},componentNameFallback(){return`display-${this.interfaceFallback.id}`},databaseVendor(){return this.$store.state.serverInfo.databaseVendor},interfaceFallback(){if(null==this.datatype)return this.interfaces["text-input"];const e=Ke[this.databaseVendor][this.datatype].fallbackInterface;return this.interfaces[e]},optionsWithDefaults(){if(!this.interfaceInfo)return{};const e=this.$lodash.mapValues(this.interfaceInfo.options,e=>e.default||null);return Object(ke["a"])({},e,this.options)}},watch:{id(){this.registerDisplay()}},created(){this.registerDisplay()},methods:{registerDisplay(){if(Ce(this.componentName))return;const e=`${this.$api.url}/${this.interfaceInfo.path.replace("meta.json","display.js")}`;g["default"].component(this.componentName,()=>({component:we(e),error:st,loading:ct}))}}},ut=dt,ht=Object(B["a"])(ut,Xe,Ye,!1,null,null,null);ht.options.__file="display.vue";var pt=ht.exports,mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-layout",attrs:{"layout-name":e.viewType,"primary-key-field":e.primaryKeyField,fields:e.fields,items:e.items,"view-options":e.viewOptions,"view-query":e.viewQuery,loading:e.loading,"lazy-loading":e.lazyLoading,selection:e.selection,link:e.link,"sort-field":e.sortField},on:{query:function(t){e.$emit("query",t)},select:function(t){e.$emit("select",t)},options:function(t){e.$emit("options",t)},"next-page":function(t){e.$emit("next-page",t)},input:function(t){e.$emit("input",t)}}})},ft=[],vt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.items&&e.columns&&e.primaryKeyField?i("v-table",{staticClass:"v-ext-layout-fallback",attrs:{items:e.items,columns:e.columns,primaryKeyField:e.primaryKeyField,"use-interfaces":!0,link:"__link__"}}):e._e()},_t=[],gt={name:"v-ext-layout-fallback",props:{fields:{type:Object,required:!0},items:{type:Array,required:!0},primaryKeyField:{type:String,required:!0},layoutName:{type:String,default:""}},computed:{columns(){return Object.values(this.fields).map(e=>{return{field:e.field,name:e.name,fieldInfo:e}})}},created(){this.$notify({title:this.$t("extension_error",{ext:this.layoutName}),color:"red",iconMain:"error"})}},yt=gt,bt=Object(B["a"])(yt,vt,_t,!1,null,null,null);bt.options.__file="layout-fallback.vue";var $t=bt.exports,kt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-layout-loading"},[i("v-spinner",{staticClass:"spinner",attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1)},wt=[],Ct={name:"v-layout-loading"},xt=Ct,It=Object(B["a"])(xt,kt,wt,!1,null,null,null);It.options.__file="layout-loading.vue";var Ot=It.exports,St={name:"v-layout",props:{fields:{type:Object,required:!0},items:{type:Array,required:!0},viewType:{type:String,required:!0},viewOptions:{type:Object,default:()=>({})},viewQuery:{type:Object,default:()=>({})},selection:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},lazyLoading:{type:Boolean,default:!1},link:{type:String,default:null},sortField:{type:String,default:null}},computed:{layouts(){return this.$store.state.extensions.layouts},layout(){return this.layouts&&this.layouts[this.viewType]},componentName(){return`layout-${this.viewType}`},primaryKeyField(){const e=this.$lodash.filter(this.fields,e=>!0===e.primary_key)[0];return e&&e.field}},watch:{viewType(){this.registerLayout()}},created(){this.registerLayout()},methods:{registerLayout(){if(Ce(this.componentName))return;if(!this.layout)return void g["default"].component(this.componentName,$t);const e=`${this.$api.url}/${this.layout.path.replace("meta.json","layout.js")}`;g["default"].component(this.componentName,()=>({component:we(e),error:$t,loading:Ot}))}}},Et=St,jt=Object(B["a"])(Et,mt,ft,!1,null,null,null);jt.options.__file="layout.vue";var Tt=jt.exports,Ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component",staticClass:"v-ext-layout-options",attrs:{"primary-key-field":e.primaryKeyField,fields:e.fields,"view-options":e.viewOptions,loading:e.loading,"view-query":e.viewQuery,selection:e.selection,"layout-name":e.type},on:{query:function(t){e.$emit("query",t)},select:function(t){e.$emit("select",t)},options:function(t){e.$emit("options",t)}}})},Nt=[],At=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-ext-layout-options-fallback"})},Mt=[],qt={name:"v-ext-layout-options-fallback",props:{layoutName:{type:String,default:""}},created(){this.$notify({title:this.$t("extension_error",{ext:this.layoutName}),color:"red",iconMain:"error"})}},Dt=qt,Pt=Object(B["a"])(Dt,At,Mt,!1,null,null,null);Pt.options.__file="layout-options-fallback.vue";var Lt=Pt.exports,Rt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-listing-options-loading"})},Bt=[],Vt={name:"v-listing-options-loading"},Ut=Vt,Kt=Object(B["a"])(Ut,Rt,Bt,!1,null,null,null);Kt.options.__file="layout-options-loading.vue";var zt=Kt.exports,Wt={name:"v-ext-layout-options",props:{type:{type:String,required:!0},fields:{type:Object,required:!0},viewOptions:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},viewQuery:{type:Object,default:()=>({})},selection:{type:Array,default:()=>[]}},computed:{layouts(){return this.$store.state.extensions.layouts},layout(){return this.layouts&&this.layouts[this.type]},componentName(){return`layout-options-${this.type}`},primaryKeyField(){if(!this.fields)return null;const e=this.$lodash.find(this.fields,{primary_key:!0});return e?e.field:null}},watch:{type(){this.registerLayoutOptions()}},created(){this.registerLayoutOptions()},methods:{registerLayoutOptions(){if(Ce(this.componentName))return;if(!this.layout)return void g["default"].component(this.componentName,Lt);const e=`${this.$api.url}/${this.layout.path.replace("meta.json","options.js")}`;g["default"].component(this.componentName,()=>({component:we(e),error:Lt,loading:zt}))}}},Ht=Wt,Gt=Object(B["a"])(Ht,Ft,Nt,!1,null,null,null);Gt.options.__file="layout-options.vue";var Qt=Gt.exports,Xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(e.componentName,{tag:"component"},[e._t("default")],2)},Yt=[],Jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Zt=[],ei={name:"v-ext-page-fallback",created(){this.$notify({title:this.$t("extension_error",{ext:this.interfaceName}),color:"red",iconMain:"error"})}},ti=ei,ii=Object(B["a"])(ti,Jt,Zt,!1,null,null,null);ii.options.__file="page-fallback.vue";var si=ii.exports,ni=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-loading"},[e._v("LOADING")])},ai=[],oi={name:"page-loading"},li=oi,ri=Object(B["a"])(li,ni,ai,!1,null,null,null);ri.options.__file="page-loading.vue";var ci=ri.exports,di={name:"v-ext-page",props:{id:{type:String,required:!0}},computed:{pages(){return this.$store.state.extensions.pages},page(){return this.pages&&this.pages[this.id]},componentName(){return`page-${this.id}`}},watch:{id(){this.registerPage()}},created(){this.registerPage()},methods:{registerPage(){if(Ce(this.componentName))return;if(!this.page)return void g["default"].component(this.componentName,si);const e=`${this.$api.url}/${this.page.path.replace("meta.json","page.js")}`;g["default"].component(this.componentName,()=>({component:we(e),error:si,loading:ci}))}}},ui=di,hi=Object(B["a"])(ui,Xt,Yt,!1,null,null,null);hi.options.__file="page.vue";var pi=hi.exports,mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.items.error?i("v-error",{attrs:{icon:"warning",color:"danger",title:e.$t("server_error"),body:e.$t("server_error_copy")}}):e.items.fields&&0===Object.keys(e.items.fields).length?i("v-error",{attrs:{icon:"build",title:e.$t("no_fields"),body:e.$t("no_fields_body")}}):"directus_files"===e.collection&&e.items.meta&&0===e.items.meta.total_count?i("v-error",{attrs:{icon:"image",title:e.$t("no_files"),body:e.$t("no_files_body")}}):e.items.meta&&0===e.items.meta.total_count?i("v-error",{attrs:{icon:"web_asset",title:e.$t("empty_collection"),body:e.$t("empty_collection_body")}}):e.items.data&&0===e.items.data.length&&e.items.meta&&0!==e.items.meta.total_count?i("v-error",{attrs:{title:e.$t("no_results"),body:e.$t("no_results_body"),icon:"search"}}):i("v-ext-layout",{attrs:{fields:e.fields,items:e.items.data||[],"view-type":e.viewType,"view-query":e.viewQuery,"view-options":e.viewOptions,selection:e.selectionKeys,loading:e.items.loading,"lazy-loading":e.items.lazyLoading,link:e.links?"__link__":null,"sort-field":e.sortField},on:{input:e.saveItems,select:e.select,query:function(t){e.$emit("query",t)},options:function(t){e.$emit("options",t)},"next-page":e.lazyLoad}})},fi=[];i("28a5");function vi(e){const t={};return e.forEach(e=>{t[`filter[${e.field}][${e.operator}]`]=e.value}),t}var _i={name:"v-items",props:{collection:{type:String,required:!0},filters:{type:Array,default:()=>[]},searchQuery:{type:String,default:""},viewType:{type:String,default:"tabular"},viewOptions:{type:Object,default:()=>({})},viewQuery:{type:Object,default:()=>({})},selection:{type:Array,default:null},links:{type:Boolean,default:!1}},data(){return{items:{meta:null,data:null,loading:!1,error:null,page:0,lazyLoading:!1}}},computed:{allSelected(){const e=this.items.data.map(e=>e[this.primaryKeyField]).sort(),t=[...this.selection];return t.sort(),this.selection.length>0&&this.$lodash.isEqual(e,t)},primaryKeyField(){if(this.fields)return this.$lodash.find(Object.values(this.fields),{primary_key:!0}).field},sortField(){const e=this.$lodash.find(this.fields,{type:"sort"});return e&&e.field||null},statusField(){const e=this.$lodash.find(this.fields,{type:"status"});return e&&e.field||null},userCreatedField(){return this.fields?(this.$lodash.find(Object.values(this.fields),e=>e.type&&"user_created"===e.type.toLowerCase())||{}).field:null},fields(){const e=this.$store.state.collections[this.collection].fields;return this.$lodash.mapValues(e,e=>Object(ke["a"])({},e,{name:this.$helpers.formatTitle(e.field)}))||{}},selectionKeys(){return this.selection?this.$lodash.uniq(this.selection.map(e=>e[this.primaryKeyField])):null}},created(){this.hydrate()},watch:{collection(e,t){this.$lodash.isEqual(e,t)||this.hydrate()},viewQuery:{deep:!0,handler(e,t){this.$lodash.isEqual(e,t)||this.getItems()}},filters:{deep:!0,handler(e,t){this.$lodash.isEqual(e,t)||this.getItems()}},searchQuery(e,t){this.$lodash.isEqual(e,t)||this.getItems()}},mounted(){this.$helpers.mousetrap.bind("mod+a",()=>{return this.selectAll(),!1})},beforeDestroy(){this.$helpers.mousetrap.unbind("mod+a")},methods:{hydrate(){this.items.loading||(this.items.data=null,this.items.loading=!1,this.items.error=null,this.getItems())},selectAll(){return this.allSelected?this.$emit("select",[]):this.$emit("select",this.items.data)},getItems(){if(this.items.loading)return;this.items.loading=!0,this.items.error=null,this.items.page=0;const e=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:e}),this.$api.getItems(this.collection,this.formatParams()).then(t=>{this.items.loading=!1,this.items.meta=t.meta,this.$store.dispatch("loadingFinished",e),this.links?this.items.data=t.data.map(e=>Object(ke["a"])({},e,{__link__:this.collection.startsWith("directus_")?`/${this.collection.substr(9)}/${e[this.primaryKeyField]}`:`/collections/${this.collection}/${e[this.primaryKeyField]}`})):this.items.data=t.data,this.$emit("fetch",t.meta)}).catch(t=>{console.error(t),this.$store.dispatch("loadingFinished",e),this.items.loading=!1,this.items.error=t})},select(e){this.$emit("select",e.map(e=>{return this.$lodash.find(this.items.data,{[this.primaryKeyField]:e})||this.$lodash.find(this.selection,{[this.primaryKeyField]:e})}))},saveItems(e){if(!e)return;const t=this.primaryKeyField,i=this.$helpers.shortid.generate();if(this.$store.dispatch("loadingStart",{id:i}),Array.isArray(e)){const s=[],n=[];return e.forEach(e=>{e[t]&&null!=e[t]?s.push(e):n.push(e)}),Promise.all([s.length>0?this.$api.updateItems(this.collection,s):null,n.length>0?this.$api.createItems(this.collection,n):null]).then(()=>{return this.$store.dispatch("loadingFinished",i),this.getItems()}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}return e[t]&&null!=e[t]?this.$api.updateItem(this.collection,e[t],e).then(()=>{return this.$store.dispatch("loadingFinished",i),this.getItems()}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})}):this.$api.createItem(this.collection,e).then(()=>{return this.$store.dispatch("loadingFinished",i),this.getItems()}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},lazyLoad(){if(!this.items.lazyLoading&&this.items.meta.total_count!==this.items.data.length)return this.items.lazyLoading=!0,this.items.error=null,this.items.page=this.items.page+1,this.$api.getItems(this.collection,this.formatParams()).then(e=>{this.items.lazyLoading=!1,this.links?this.items.data=[...this.items.data,...e.data.map(e=>Object(ke["a"])({},e,{__link__:this.collection.startsWith("directus_")?`/${this.collection.substr(9)}/${e[this.primaryKeyField]}`:`/collections/${this.collection}/${e[this.primaryKeyField]}`}))]:this.items.data=[...this.items.data,...e.data],this.$emit("fetch",e.meta)}).catch(e=>{console.error(e),this.items.lazyLoading=!1,this.items.error=e})},formatParams(){let e={fields:"*.*",meta:"total_count,result_count",limit:50,offset:50*this.items.page};return Object.assign(e,this.viewQuery),this.searchQuery&&(e.q=this.searchQuery),this.filters&&this.filters.length>0&&(e=Object(ke["a"])({},e,vi(this.filters))),e.fields&&(e.fields=e.fields.split(",").map(e=>{if("*.*"===e)return e;const t=this.fields[e];return t?(t.type=t.type.toLowerCase(),"m2o"===t.type||"o2m"===t.type||"m2m"===t.type||"translation"===t.type?e.endsWith(".*.*")?e:e+".*.*":e):null}).filter(e=>e),this.sortField&&e.fields.push(this.sortField),this.statusField&&e.fields.push(this.statusField),this.userCreatedField&&e.fields.push(this.userCreatedField),!1===e.fields.includes(this.primaryKeyField)&&e.fields.push(this.primaryKeyField)),e}}},gi=_i,yi=Object(B["a"])(gi,mi,fi,!1,null,null,null);yi.options.__file="items.vue";var bi=yi.exports,$i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return 0===e.groupedFields.length?i("v-error",{attrs:{title:e.$t("no_fields"),body:e.$t("no_fields_body"),icon:"error_outline"}}):i("form",{staticClass:"v-form flex-group",on:{submit:function(e){e.preventDefault()}}},e._l(e.groupedFields,function(t){return i("div",{key:t.field,class:[e.isGroup(t)?null:"col-"+(t.width||4),e.isGroup(t)?"group":"field"]},[e.isGroup(t)?i("v-group",{attrs:{values:e.values,field:t,readonly:e.readonly,"batch-mode":e.batchMode,"active-fields":e.activeFields,"new-item":e.newItem},on:{activate:e.activateField,deactivate:e.deactivateField,"stage-value":function(t){e.$emit("stage-value",t)}}}):i("v-field",{attrs:{field:t,values:e.values,fields:e.fields,readonly:e.isReadonly(t),blocked:e.batchMode&&!e.activeFields.includes(t.field),"batch-mode":e.batchMode,"new-item":e.newItem},on:{activate:e.activateField,deactivate:e.deactivateField,"stage-value":function(t){e.$emit("stage-value",t)}}})],1)}))},ki=[],wi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-field"},[i(e.fieldset?"fieldset":"p",{tag:"component"},[i("div",[i("div",{staticClass:"heading"},[!1===e.hideLabel?[i("div",{staticClass:"label"},[i(e.fieldset?"legend":"label",{tag:"component",attrs:{for:e.field.field}},[e._v("\n              "+e._s(e.field.name||e.$helpers.formatTitle(e.field.field))),!0===e.field.required||"1"===e.field.required?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons"},[e._v("star")]):e._e()]),e.batchMode?i("label",{staticClass:"batch-label"},[i("v-toggle",{attrs:{value:!e.blocked},on:{input:function(t){e.$emit(e.blocked?"activate":"deactivate",e.field.field)}}})],1):e._e()],1)]:e._e(),!e.readonly&&e.field.note?i("small",{domProps:{innerHTML:e._s(e.$helpers.snarkdown(e.field.note))}}):e._e()],2),i("div",{staticClass:"field-wrapper"},[i("v-ext-input",{attrs:{id:e.field.interface,name:e.field.field,required:!0===e.field.required||"1"===e.field.required,readonly:e.readonly||e.blocked,options:e.field.options,type:e.field.type,datatype:e.field.datatype,value:e.values[e.field.field],relation:e.relation,fields:e.fields,values:e.values,length:e.field.length,"new-item":e.newItem},on:{input:function(t){!e.readonly&&e.$emit("stage-value",{field:e.field.field,value:t})},setfield:function(t){!e.readonly&&e.$emit("stage-value",{field:t.field,value:t.value})}}}),e.blocked?i("div",{staticClass:"blocker",on:{click:function(t){e.$emit("activate",e.field.field)}}}):e._e()],1)])])],1)},Ci=[],xi={name:"v-field",props:{field:{type:Object,required:!0},values:{type:Object,required:!0},readonly:{type:Boolean,default:!1},blocked:{type:Boolean,default:!1},batchMode:{type:Boolean,default:!1},fields:{type:Object,required:!0},newItem:{type:Boolean,default:!1}},computed:{fieldset(){const e=this.$store.state.extensions.interfaces[this.field.interface];return e&&e.fieldset||!1},hideLabel(){const e=this.field.interface,t=this.$store.state.extensions.interfaces[e];return!!t&&(!(!t||!t.hideLabel)&&t.hideLabel)},relation(){const e=this.field,t=e.collection,i=e.field,s=e.type;return"m2o"===s.toLowerCase()?this.$store.getters.m2o(t,i):"o2m"===s.toLowerCase()?this.$store.getters.o2m(t,i):"translation"===s.toLowerCase()?this.$store.getters.o2m(t,i):null}}},Ii=xi,Oi=(i("b704"),Object(B["a"])(Ii,wi,Ci,!1,null,"c8da6754",null));Oi.options.__file="field.vue";var Si=Oi.exports,Ei=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-ext-input",{staticClass:"v-group",attrs:{id:e.field.field,name:e.field.field,options:e.field.options,type:e.field.type}},[i("div",{staticClass:"flex-group"},e._l(e.field.children,function(t){return i("div",{key:t.field,class:[e.isGroup(t)?null:"col-"+t.width,e.isGroup(t)?"group":"field"]},[e.isGroup(t)?i("v-group",{attrs:{values:e.values,field:t,"new-item":e.newItem},on:{"stage-value":function(t){e.$emit("stageValue",t)}}}):i("v-field",{attrs:{readonly:e.readonly,values:e.values,field:t,blocked:e.batchMode&&!e.activeFields.includes(e.field.field),"batch-mode":e.batchMode,"new-item":e.newItem},on:{activate:function(t){e.$emit("activate",t)},deactivate:function(t){e.$emit("deactivate",t)},"stage-value":function(t){e.$emit("stageValue",t)}}})],1)}))])},ji=[],Ti={name:"v-group",components:{VField:Si},props:{values:{type:Object,required:!0},field:{type:Object,required:!0},readonly:{type:Boolean,default:!1},batchMode:{type:Boolean,default:!1},activeFields:{type:Array,default:()=>[]}},methods:{isGroup(e){return e.children&&Array.isArray(e.children)}}},Fi=Ti,Ni=Object(B["a"])(Fi,Ei,ji,!1,null,null,null);Ni.options.__file="group.vue";var Ai=Ni.exports,Mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"error"}},[i("div",{staticClass:"v-error"},[i("i",{staticClass:"material-icons",class:e.color},[e._v(e._s(e.icon))]),i("h2",{staticClass:"style-1"},[e._v(e._s(e.title))]),i("p",[e._v(e._s(e.body))])])])},qi=[],Di={name:"v-error",props:{color:{type:String,default:"accent",validator(e){return["accent","secondary","success","warning","danger"].includes(e)}},icon:{type:String,required:!0},title:{type:String,required:!0},body:{type:String,required:!0}}},Pi=Di,Li=(i("e706"),Object(B["a"])(Pi,Mi,qi,!1,null,"16c52c5c",null));Li.options.__file="error.vue";var Ri=Li.exports;const Bi={create:"none",read:"none",update:"none",delete:"none",comment:"none",explain:"none",status_blacklist:[],read_field_blacklist:[],write_field_blacklist:[]},Vi={create:"full",read:"full",update:"full",delete:"full",comment:"full",explain:"full",status_blacklist:[],read_field_blacklist:[],write_field_blacklist:[]};var Ui={name:"v-form",components:{VField:Si,VGroup:Ai,VError:Ri},props:{fields:{type:Object,required:!0},values:{type:Object,required:!0},readonly:{type:Boolean,default:!1},batchMode:{type:Boolean,default:!1},permissions:{type:Object,default:()=>Vi},newItem:{type:Boolean,default:!1}},data(){return{activeFields:[]}},computed:{collection(){return Object.values(this.fields)[0].collection},groupedFields(){const e=Object.values(this.fields).filter(e=>!1===this.permissions.read_field_blacklist.includes(e.field)),t=e.filter(e=>e.type&&"group"===e.type.toLowerCase()).map(e=>Object(ke["a"])({},e,{children:[]})),i=e.filter(e=>e.type&&"group"!==e.type.toLowerCase());return i.forEach(e=>{if(null!=e.group){const i=this.$lodash.findIndex(t,t=>t.id===e.group);return t[i].children.push(e)}return t.push(e)}),t.filter(e=>!1===e.hidden_detail||"0"==e.hidden_detail).sort((e,t)=>{return e.sort==t.sort?0:null===e.sort?1:null===t.sort?-1:e.sort>t.sort?1:-1})}},methods:{isGroup(e){return e.children&&Array.isArray(e.children)},activateField(e){this.batchMode&&(this.activeFields=[...this.activeFields,e])},deactivateField(e){this.batchMode&&(this.activeFields=this.activeFields.filter(t=>t!==e),this.$emit("unstage-value",e))},isReadonly(e){return!!this.readonly||(!0===e.readonly||"1"===e.readonly||1===e.readonly||!!this.permissions.write_field_blacklist.includes(e.field))}}},Ki=Ui,zi=(i("cae2"),Object(B["a"])(Ki,$i,ki,!1,null,null,null));zi.options.__file="form.vue";var Wi=zi.exports,Hi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"form-button style-btn",class:[e.bg||"no-bg",{fullwidth:e.fullwidth,loading:e.loading},e.color],attrs:{type:e.type,disabled:e.disabled||e.loading},on:{click:function(t){e.$emit("click")}}},[e.icon&&!e.loading?i("i",{staticClass:"material-icons"},[e._v(e._s(e.icon))]):e._e(),e.loading?i("v-spinner",{staticClass:"spinner",attrs:{"line-size":2,size:"13","line-foreground-color":"#fff","line-background-color":"var(--darkest-gray)"}}):e._e(),e._t("default")],2)},Gi=[],Qi={name:"v-button",props:{fullwidth:{type:Boolean,default:!1},icon:{type:String,default:""},type:{type:String,default:""},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},color:{type:String,default:"white",validator:e=>["white","black"].includes(e)},bg:{type:String,default:"action",validator:e=>["action","secondary","warning","danger"].includes(e)}}},Xi=Qi,Yi=(i("10f8"),Object(B["a"])(Xi,Hi,Gi,!1,null,"5dd76506",null));Yi.options.__file="button.vue";var Ji=Yi.exports,Zi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"form-checkbox"},[i("input",{attrs:{id:e.id,type:"checkbox"},domProps:{checked:e.shouldBeChecked,value:e.value},on:{change:e.updateInput}}),i("label",{staticClass:"no-wrap",attrs:{for:e.id}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.shouldBeChecked?"check_box":"check_box_outline_blank"))]),e._v("\n    "+e._s(e.label)+"\n  ")])])},es=[],ts={name:"form-checkbox",model:{prop:"modelValue",event:"change"},props:{id:{type:String,default:""},value:{type:[String,Number],required:!0},modelValue:{type:null,default:!1},label:{type:String,default:""},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},checked:{type:Boolean,default:!1}},computed:{shouldBeChecked(){return Array.isArray(this.modelValue)?this.modelValue.includes(this.value):this.modelValue===this.trueValue||!0===this.checked}},methods:{updateInput(e){const t=e.target.checked;if(Array.isArray(this.modelValue)){const e=[...this.modelValue];t?e.push(this.value):e.splice(e.indexOf(this.value),1),this.$emit("change",e)}else this.$emit("change",t?this.trueValue:this.falseValue)}}},is=ts,ss=(i("ae68"),Object(B["a"])(is,Zi,es,!1,null,"45eca1a5",null));ss.options.__file="checkbox.vue";var ns=ss.exports,as=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-input",class:{"icon-left":e.iconLeft,"icon-right":e.iconRight}},[i("input",{ref:"input",class:{charactercount:e.charactercount},attrs:{type:e.type,autocomplete:e.autocomplete,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,name:e.name,placeholder:e.placeholder,required:e.required,readonly:e.readonly||e.disabled,spellcheck:e.spellcheck,id:e.id,step:e.step},domProps:{value:e.value},on:{keyup:function(t){e.$emit("keyup",t)},keydown:function(t){e.$emit("keydown",t)},input:function(t){e.$emit("input",t.target.value)}}}),e.iconLeft?i("i",{staticClass:"material-icons",class:e.iconLeftColor},[e._v(e._s(e.iconLeft))]):e._e(),e.iconRight?i("i",{staticClass:"material-icons",class:e.iconRightColor},[e._v(e._s(e.iconRight))]):e._e(),e.charactercount?i("span",[e._v(e._s(e.charsRemaining))]):e._e()])},os=[],ls={name:"v-input",props:{type:{type:String,default:"text"},autocomplete:{type:String,default:"on"},autofocus:{type:Boolean,default:!1},max:{type:[Number,Boolean,String],default:null},maxlength:{type:[Number,Boolean,String],default:null},min:{type:[Number,Boolean,String],default:null},minlength:{type:[Number,Boolean,String],default:null},name:{type:String,default:""},placeholder:{type:String,default:""},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},spellcheck:{type:Boolean,default:!0},id:{type:String,default:""},value:{type:null,default:""},step:{type:[String,Number],default:1},iconLeft:{type:String,default:""},iconLeftColor:{type:String,default:null},iconRight:{type:String,default:""},iconRightColor:{type:String,default:null},valid:{type:Boolean,default:!0},charactercount:{type:Boolean,default:!1}},computed:{charsRemaining(){return this.maxlength?this.maxlength-this.value.length:null}},mounted(){this.autofocus&&this.$refs.input.focus()}},rs=ls,cs=(i("553a"),Object(B["a"])(rs,as,os,!1,null,"fa1028f8",null));cs.options.__file="input.vue";var ds=cs.exports,us=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-radio"},[i("input",{attrs:{id:e.id,name:e.name,disabled:e.disabled,type:"radio"},domProps:{checked:e.shouldBeChecked,value:e.value},on:{change:e.updateInput}}),i("label",{attrs:{for:e.id}},[e._v(e._s(e.label))])])},hs=[],ps={model:{prop:"modelValue",event:"change"},props:{name:{type:String,required:!0},id:{type:String,required:!0},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},value:{type:String,required:!0},modelValue:{type:String,default:""},label:{type:String,required:!0}},computed:{shouldBeChecked(){return this.modelValue===this.value}},methods:{updateInput(){this.$emit("change",this.value)}}},ms=ps,fs=(i("20da"),Object(B["a"])(ms,us,hs,!1,null,"052b9229",null));fs.options.__file="radio.vue";var vs=fs.exports,_s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-select",class:{icon:e.icon}},[e.other?i("select",{attrs:{disabled:e.disabled||e.readonly,id:e.otherActive?null:e.id},domProps:{value:e.value},on:{change:function(t){e.change(t.target.value)}}},[i("optgroup",{attrs:{label:e.$t("values")}},e._l(e.parsedOptions,function(t,s){return i("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),i("optgroup",{attrs:{label:e.$t("other")}},[i("option",{domProps:{value:e.customValue||"__other",selected:e.otherActive}},[e._v(e._s(e.customValue.length?e.customValue:e.$t("enter_value")))])])]):i("select",{ref:"select",attrs:{disabled:e.disabled||e.readonly,id:e.otherActive?null:e.id},domProps:{value:e.value},on:{change:function(t){e.change(t.target.value)}}},[e.placeholder?i("option",{ref:"default",attrs:{selected:"",disabled:"",value:""}},[e._v("\n      "+e._s(e.placeholder)+"\n    ")]):e._e(),e._l(e.parsedOptions,function(t,s){return i("option",{key:s,domProps:{value:s,selected:e.value==s}},[e._v(e._s(t))])})],2),e.otherActive?i("input",{ref:"input",attrs:{type:e.type,id:e.id,placeholder:e.placeholder,autofocus:""},domProps:{value:e.customValue},on:{input:e.changeCustom}}):e._e(),i("div",{staticClass:"value"},[e.icon?i("i",{staticClass:"material-icons"},[e._v(e._s(e.icon))]):e._e(),e.placeholder&&!e.value?i("span",{staticClass:"placeholder"},[e._v(e._s(e.placeholder))]):e._e(),i("span",{staticClass:"no-wrap"},[e._v(e._s(e.parsedOptions[e.value]))])]),i("i",{staticClass:"material-icons chevron"},[e._v("arrow_drop_down")])])},gs=[],ys={name:"v-select",props:{disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},name:{type:String,default:""},id:{type:String,default:""},value:{type:[String,Number],default:""},other:{type:Boolean,default:!1},icon:{type:String,default:""},type:{type:String,default:""},options:{type:[Object,String],required:!0},placeholder:{type:String,default:""},defaultValue:{type:Boolean,default:!1}},data(){return{otherActive:!1,customValue:""}},computed:{parsedOptions(){return"string"===typeof this.options?JSON.parse(this.options):this.options}},methods:{change(e){if(e===this.customValue||"__other"===e)return this.$emit("input",this.customValue),void(this.otherActive=!0);this.otherActive=!1,this.$emit("input",e),!0===this.defaultValue&&(this.$refs.default.setAttribute("selected","selected"),this.$refs.select.value="")},changeCustom(e){this.customValue=e.target.value,this.$emit("input",this.customValue)}}},bs=ys,$s=(i("8f9b"),Object(B["a"])(bs,_s,gs,!1,null,"2bfe1632",null));$s.options.__file="select.vue";var ks=$s.exports,ws=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-simple-select"},[i("select",{ref:"selectElement",attrs:{disabled:e.disabled},domProps:{value:e.value},on:{change:e.stageValue}},[i("option",{attrs:{disabled:"",value:""},domProps:{selected:null==e.value}},[e._v(e._s(e.placeholder||"--"))]),e._t("default")],2),i("div",{staticClass:"preview"},[e.value?[e._v(e._s(e.valueText))]:i("span",{staticClass:"placeholder"},[e._v(e._s(e.placeholder||"--"))]),i("i",{staticClass:"material-icons"},[e._v("arrow_drop_down")])],2)])},Cs=[],xs={name:"v-simple-select",props:{value:{type:String,default:null},placeholder:{type:String,default:null},disabled:{type:Boolean,default:!1}},data(){return{valueText:""}},methods:{stageValue(e){this.$emit("input",e.target.value),this.valueText=e.target.options[e.target.selectedIndex].text},getValueText(){const e=this.$refs.selectElement;this.valueText=e.options[e.selectedIndex].text||this.value}},mounted(){this.getValueText()},watch:{value(){this.getValueText()}}},Is=xs,Os=(i("d144"),Object(B["a"])(Is,ws,Cs,!1,null,"1844e1cf",null));Os.options.__file="simple-select.vue";var Ss=Os.exports,Es=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-slider"},[i("div",{staticClass:"input"},[i("input",{attrs:{id:e.id,name:e.id,min:e.min,max:e.max,step:e.step,type:"range"},domProps:{value:e.value},on:{input:function(t){e.$emit("input",Number(t.target.value))}}}),i("div",{ref:"track",staticClass:"track-wrapper"},[i("div",{staticClass:"track-fill",style:{transform:"scaleX("+e.progress+")"}})])]),i("output",{class:{"output-shown":e.alwaysShowOutput},attrs:{for:e.id}},[e._v(e._s(e.valueOrDefault)+" "+e._s(e.unit))])])},js=[],Ts={name:"v-slider",props:{id:{type:String,default:null},value:{type:Number,required:!0},min:{type:Number,default:0},max:{type:Number,required:!0},step:{type:[Number,String],default:1},unit:{type:String,default:null},alwaysShowOutput:{type:Boolean,default:!1}},data(){return{valuePos:0}},computed:{valueOrDefault(){return null==this.value?(this.max-this.min)/2:this.value},progress(){return Math.round((this.valueOrDefault-this.min)/(this.max-this.min)*100)/100}}},Fs=Ts,Ns=(i("08a6"),Object(B["a"])(Fs,Es,js,!1,null,"88ab79fe",null));Ns.options.__file="slider.vue";var As=Ns.exports,Ms=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("textarea",{staticClass:"v-textarea",attrs:{cols:e.cols,disabled:e.disabled,maxlength:e.maxlength,minlength:e.minlength,name:e.name,id:e.id,placeholder:e.placeholder,readonly:e.readonly,required:e.required,rows:e.rows,spellcheck:e.spellcheck,wrap:e.wrap,autofocus:e.autofocus},domProps:{value:e.value},on:{keydown:function(t){e.$emit("keydown",t.target.value)},input:function(t){e.$emit("input",t.target.value)}}})},qs=[],Ds={name:"v-textarea",props:{cols:{type:Number,default:20},disabled:{type:Boolean,default:!1},maxlength:{type:Number,default:null},minlength:{type:Number,default:null},name:{type:String,default:null},id:{type:String,default:null},placeholder:{type:String,default:null},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},rows:{type:Number,default:null},spellcheck:{type:Boolean,default:null},wrap:{type:String,default:null},value:{type:String,default:null},autofocus:{type:String,default:null}}},Ps=Ds,Ls=(i("1c95"),Object(B["a"])(Ps,Ms,qs,!1,null,"7c84f76f",null));Ls.options.__file="textarea.vue";var Rs=Ls.exports,Bs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-toggle",class:{disabled:e.disabled},on:{click:e.emitValue}},[i("input",{attrs:{type:"checkbox",id:e.id,disabled:e.disabled},domProps:{checked:e.value},on:{change:function(t){e.$emit("input",!e.value)}}}),i("div",{staticClass:"switch-track",class:{active:e.value}}),i("div",{staticClass:"switch-thumb",class:{active:e.value}})])},Vs=[],Us={name:"v-toggle",props:{value:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},methods:{emitValue(){this.disabled||this.$emit("input",!this.value)}}},Ks=Us,zs=(i("9dcd"),Object(B["a"])(Ks,Bs,Vs,!1,null,"10e3f16b",null));zs.options.__file="toggle.vue";var Ws=zs.exports,Hs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal-base",{attrs:{message:e.message},on:{cancel:function(t){e.$emit("confirm")}}},[i("div",{staticClass:"buttons",on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.$emit("confirm")}}},[i("v-button",{staticClass:"confirm",on:{click:function(t){e.$emit("confirm")}}},[e._v(e._s(e.confirmText||e.$t("ok")))])],1)])},Gs=[],Qs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"v-modal-base"},[i("div",{staticClass:"mask",on:{click:function(t){e.$emit("cancel")}}}),i("div",{staticClass:"wrapper"},[i("aside",{staticClass:"modal"},[i("p",[e._v(e._s(e.message))]),e._t("default")],2)])])])},Xs=[],Ys={name:"v-modal-base",props:{message:{type:String,required:!0}},mounted(){this.$helpers.disableBodyScroll(this.$refs.modal)},beforeDestroy(){this.$helpers.enableBodyScroll(this.$refs.modal)}},Js=Ys,Zs=(i("8373"),Object(B["a"])(Js,Qs,Xs,!1,null,"13020bb4",null));Zs.options.__file="modal-base.vue";var en=Zs.exports,tn={name:"v-alert",props:{message:{type:String,required:!0},confirmText:{type:String,default:null}},components:{VModalBase:en}},sn=tn,nn=(i("8556"),Object(B["a"])(sn,Hs,Gs,!1,null,"6828cafd",null));nn.options.__file="alert.vue";var an=nn.exports,on=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal-base",{attrs:{message:e.message},on:{cancel:function(t){e.$emit("cancel")}}},[i("div",{staticClass:"buttons",on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.$emit("cancel")}}},[i("button",{staticClass:"cancel",on:{click:function(t){e.$emit("cancel")}}},[e._v("\n      "+e._s(e.cancelText||e.$t("cancel"))+"\n    ")]),i("v-button",{staticClass:"confirm",attrs:{bg:e.color},on:{click:function(t){e.$emit("confirm")}}},[e.loading?[i("v-spinner",{attrs:{size:20,"line-size":2}})]:[e._v(e._s(e.confirmText||e.$t("ok")))]],2)],1)])},ln=[],rn={name:"v-confirm",props:{message:{type:String,required:!0},confirmText:{type:String,default:null},cancelText:{type:String,default:null},loading:{type:Boolean,default:!1},color:{type:String,default:"action"}},components:{VModalBase:en}},cn=rn,dn=(i("51e9"),Object(B["a"])(cn,on,ln,!1,null,"04a613de",null));dn.options.__file="confirm.vue";var un=dn.exports,hn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"slide"}},[i("div",{staticClass:"v-modal"},[i("div",{staticClass:"modal-mask",class:e.actionRequired?null:"pointer",on:{click:function(t){!e.actionRequired&&e.$emit("close")}}}),i("div",{staticClass:"modal-wrapper"},[i("aside",{ref:"modal",staticClass:"modal-container",class:{"full-size":e.fullSize},attrs:{"aria-labelledby":"modal-title","aria-describedby":"modal-description",role:"dialog"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;!e.actionRequired&&e.$emit("close")}}},[i("div",{attrs:{role:"document"}},[i("div",{staticClass:"screen-reader-offscreen",attrs:{id:"modal-description"}},[e._v("\n            "+e._s(e.$t("dialog_beginning"))+"\n            "+e._s(e.actionRequired?null:e.$t("esc_cancel"))+"\n          ")]),e.title?i("header",[i("h1",{staticClass:"style-1",attrs:{id:"modal-title"}},[e._v(e._s(e.title))]),e.actionRequired?e._e():i("button",{on:{click:function(t){e.$emit("close")}}},[i("i",{staticClass:"material-icons"},[e._v("close")])])]):e._e(),e.tabs?i("div",{staticClass:"tabs"},e._l(e.tabs,function(t,s){return i("button",{key:s,class:{active:e.activeTab===s},attrs:{disabled:t.disabled},on:{click:function(t){e.$emit("tab",s)}}},[e._v("\n              "+e._s(t.text)+"\n            ")])})):e._e(),i("div",{ref:"tabsBody",staticClass:"body"},[e.tabs?e._l(e.tabs,function(t,s){return e.activeTab===s?i("div",{key:"tab-"+s,staticClass:"tab"},[e._t(s)],2):e._e()}):e._t("default")],2),i("div",{staticClass:"footer",class:{"action-required":e.actionRequired}},[e.actionRequired?e._e():i("button",{on:{click:function(t){e.$emit("close")}}},[e._v("\n              "+e._s(e.$t("cancel"))+"\n            ")]),e._l(e.buttons,function(t,s){return i("v-button",{key:s,staticClass:"confirm",attrs:{loading:t.loading||!1,disabled:t.disabled||!1},on:{click:function(t){e.$emit(s)}}},[e._v(e._s(t.text))])})],2)])])])])])},pn=[],mn=i("c740"),fn={name:"v-modal",props:{actionRequired:{type:Boolean,default:!1},title:{type:String,default:null},buttons:{type:Object,default:()=>({})},tabs:{type:Object,default:null},activeTab:{type:String,default:null},fullSize:{type:Boolean,default:!1}},mounted(){Object(mn["disableBodyScroll"])(this.$refs.modal)},beforeDestroy(){Object(mn["enableBodyScroll"])(this.$refs.modal)},watch:{activeTab(){setTimeout(()=>{this.$refs.tabsBody.querySelector("input").focus()},0)}}},vn=fn,_n=(i("f58f"),Object(B["a"])(vn,hn,pn,!1,null,"6c166326",null));_n.options.__file="modal.vue";var gn=_n.exports,yn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal-base",{attrs:{message:e.message},on:{cancel:function(t){e.$emit("cancel")}}},[i("div",{staticClass:"v-prompt",on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,"Escape"))return null;e.$emit("cancel")}}},[e.multiline?i("v-textarea",{staticClass:"input multiline",attrs:{autofocus:"",placeholder:e.placeholder,value:e.value},on:{input:function(t){e.$emit("input",t)}}}):i("v-input",{staticClass:"input",attrs:{autofocus:"",value:e.value,placeholder:e.placeholder},on:{input:e.emitValue,keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.$emit("confirm")}}}),i("div",{staticClass:"buttons"},[i("button",{staticClass:"cancel",on:{click:function(t){e.$emit("cancel")}}},[e._v("\n        "+e._s(e.cancelText||e.$t("cancel"))+"\n      ")]),i("v-button",{staticClass:"confirm",attrs:{loading:e.loading,disabled:e.required&&e.disabled},on:{click:function(t){e.$emit("confirm")}}},[e._v(e._s(e.confirmText||e.$t("ok")))])],1)],1)])},bn=[],$n=(i("6b54"),{name:"v-prompt",props:{message:{type:String,required:!0},confirmText:{type:String,default:null},cancelText:{type:String,default:null},value:{type:String,default:null},multiline:{type:Boolean,default:!1},required:{type:Boolean,default:!1},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},safe:{type:Boolean,default:!1}},components:{VModalBase:en},computed:{disabled(){return null==this.value||0===this.value.length}},methods:{emitValue(e){this.safe&&(e=e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]+/g,"").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"")),this.$emit("input",e)}}}),kn=$n,wn=(i("9d03"),Object(B["a"])(kn,yn,bn,!1,null,"1a671420",null));wn.options.__file="prompt.vue";var Cn=wn.exports,xn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"v-header"},[i("button",{staticClass:"nav-toggle",attrs:{disabled:e.navActive},on:{click:e.activateNav}},[i("i",{staticClass:"material-icons"},[e._v("menu")])]),i("div",{staticClass:"title"},[e.title?i("h1",[e._v(e._s(e.title))]):i("ol",{staticClass:"breadcrumb"},e._l(e.breadcrumb||e.defaultBreadcrumb,function(t,s){var n=t.name,a=t.path,o=t.color;return void 0===o&&(o=null),i("li",{key:a},[s!==(e.breadcrumb||e.defaultBreadcrumb).length-1?[i("router-link",{style:{color:o?"var(--"+o+")":null},attrs:{to:a}},[e._v(e._s(n))])]:i("h1",{style:{color:o?"var(--"+o+")":null}},[e._v("\n          "+e._s(n)+"\n        ")])],2)})),e._t("title")],2),e._t("default"),e.infoToggle?i("v-header-button",{attrs:{label:e.$t("info"),icon:"info","no-background":""},on:{click:e.toggleInfo}}):e._e(),e._t("buttons")],2)},In=[];const On="🔒 Login Pending",Sn="🔒✅ Login Successful",En="🔒❌ Login Failed",jn="🔒 Logout",Tn="🔒 Refresh Token",Fn="🔒 Remove Auth Error",Nn="🔒 Change API",An="🔖 Set Bookmarks",Mn="🔖 Add Bookmark",qn="🔖 Delete Bookmark",Dn="🗄 Set Collections",Pn="🗄 Add Collection",Ln="🗄 Remove Collection",Rn="🗄 Update Collection",Bn="📝 Discard Changes",Vn="📝 Item Saved",Un="📝 Start Editing",Kn="📝 Unstage Value",zn="📝 Stage Value",Wn="📌 Add Field",Hn="📌 Update Field",Gn="📌 Update Fields",Qn="📌 Remove Field",Xn="📦 Set Interfaces",Yn="📦 Set Layouts",Jn="📦 Set Pages",Zn="🏪 Store Hydrated",ea="🏪❌ Store Hydration Failed",ta="🙅🏻‍♂️ Set Permissions",ia="🙅🏻‍♂️ Add Permissions",sa="⏱ Latency Check",na="⏳ Queue Request",aa="⏳ Remove Request from Queue",oa="👨🏻‍💻✅ Set Current User",la="👨🏻‍💻 Current User Updated",ra="❤️ Set Relations",ca="❤️ Add Relation",da="❤️ Update Relation",ua="🔮 Set Server Info",ha="🎨 Toggle Nav Sidebar",pa="🎨 Toggle Info Sidebar",ma="👯‍♀️ Set Users",fa="💬 Push Notification",va="💬❌ Remove Notification";var _a={name:"v-header",props:{title:{type:String,default:null},breadcrumb:{type:Array,default:null},infoToggle:{type:Boolean,default:!1}},computed:{defaultBreadcrumb(){const e=this.$route.path.split("/").filter(e=>e);return e.map((t,i)=>{let s="";for(let n=0;n<i;n++)s+=`/${e[n]}`;return s+=`/${t}`,{name:this.$helpers.formatTitle(t),path:s}})},navActive(){return this.$store.state.sidebars.nav}},methods:{activateNav(){this.$store.commit(ha,!0)},toggleInfo(){this.$store.commit(pa)}}},ga=_a,ya=(i("5b6b"),i("aef9"),Object(B["a"])(ga,xn,In,!1,null,"07bc1b15",null));ya.options.__file="header.vue";var ba=ya.exports,$a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-header-button"},[Object.keys(e.options).length>0?i("div",{staticClass:"options"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.choice,expression:"choice"}],attrs:{disabled:e.disabled},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.choice=t.target.multiple?i:i[0]},e.emitChange]}},[i("option",{attrs:{disabled:"",selected:"",value:""}},[e._v(" "+e._s(e.$t("more_options"))+" ")]),e._l(e.options,function(t,s){return i("option",{key:s,domProps:{value:s}},[e._v("\n        "+e._s(t)+"\n      ")])})],2),i("i",{staticClass:"material-icons"},[e._v("more_horiz")])]):e._e(),i(e.disabled?"button":e.to?"router-link":"button",{tag:"component",class:{attention:e.alert,"no-bg":e.noBackground},style:{backgroundColor:e.noBackground||e.disabled?null:"var(--"+e.color+")",color:"var(--"+e.color+")"},attrs:{disabled:e.disabled,to:e.to||null},on:{click:function(t){!e.to&&e.$emit("click",t)}}},[e.loading?i("v-spinner",{attrs:{size:24,"line-fg-color":"white","line-bg-color":"transparent"}}):i("i",{staticClass:"material-icons"},[e._v(e._s(e.icon))]),e.label?i("span",{staticClass:"style-btn"},[e._v(e._s(e.label))]):e._e()],1)],1)},ka=[],wa={name:"v-header-button",props:{icon:{type:String,required:!0},color:{type:String,default:"accent"},label:{type:String,default:null},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},alert:{type:Boolean,default:!1},noBackground:{type:Boolean,default:!1},to:{type:String,default:null}},data(){return{choice:null}},methods:{emitChange(e){this.$emit("input",e.target.value),this.choice=null}}},Ca=wa,xa=(i("9195"),Object(B["a"])(Ca,$a,ka,!1,null,"a2023926",null));xa.options.__file="header-button.vue";var Ia=xa.exports,Oa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-blocker",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],attrs:{"z-index":9},on:{click:e.disableSidebar}}),i("transition",{attrs:{name:"info"}},[i("aside",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"info-sidebar",class:{wide:e.wide}},[i("div",{staticClass:"system"},[e._t("system")],2),e._t("default")],2)])],1)},Sa=[],Ea=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[i("div",{staticClass:"blocker",style:{zIndex:e.zIndex},on:{click:function(t){e.$emit("click")},touchend:function(t){e.$emit("click")}}})])},ja=[],Ta={name:"blocker",props:{zIndex:{type:Number,default:0}}},Fa=Ta,Na=(i("e578"),Object(B["a"])(Fa,Ea,ja,!1,null,"28b620c6",null));Na.options.__file="blocker.vue";var Aa=Na.exports,Ma={name:"info-sidebar",components:{VBlocker:Aa},props:{wide:{type:Boolean,default:!1}},computed:{active(){return this.$store.state.sidebars.info}},methods:{disableSidebar(){this.$store.commit(pa,!1)}}},qa=Ma,Da=(i("aeb6"),Object(B["a"])(qa,Oa,Sa,!1,null,"4f3eff44",null));Da.options.__file="info-sidebar.vue";var Pa=Da.exports,La=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-upload",class:{uploading:Object.keys(e.files).length>0,disabled:e.disabled}},[i("input",{ref:"select",staticClass:"select",attrs:{disabled:e.disabled,type:"file",multiple:e.multiple},on:{change:function(t){e.filesChange(t.target.files)}}}),i("div",{staticClass:"dropzone",class:{smaller:e.small}},[e._m(0),i("div",{staticClass:"info"},[i("p",{staticClass:"name"},[e._v(e._s(e.$tc("drop_files",e.multiple?2:1)))]),i("p",{staticClass:"file-info no-wrap"},[e._v("\n        "+e._s(e.$t("max_size",{size:e.$helpers.filesize(e.$store.state.serverInfo.maxUploadSize)}))+"\n      ")])]),i("div",{staticClass:"buttons"},[i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("select_from_device"),expression:"$t('select_from_device')"}],staticClass:"material-icons select",on:{click:function(t){e.$refs.select.click()}}},[e._v("devices")])])]),i("transition-group",{attrs:{tag:"ol",name:"list"}},e._l(e.files,function(t,s){return i("li",{key:s,staticClass:"list-item"},[i("v-progress-ring",{staticClass:"icon",attrs:{progress:t.progress,icon:null!==t.error?"cloud_off":100===t.progress?"cloud_done":"cloud_upload",color:null!==t.error?"danger":100===t.progress?"success":"accent",stroke:100===t.progress?0:2}}),i("div",{staticClass:"info"},[i("p",{staticClass:"name no-wrap"},[e._v(e._s(t.name))]),i("p",{staticClass:"file-info no-wrap"},[e._v("\n          "+e._s(t.size)+"\n          "),t.progress&&100!==t.progress?i("span",{staticClass:"progress"},[e._v(e._s(t.progress)+"%")]):e._e()])])],1)})),i("input",{ref:"drop",staticClass:"drop",attrs:{disabled:e.disabled,type:"file",multiple:e.multiple},on:{click:function(e){e.preventDefault()},change:function(t){e.filesChange(t.target.files)}}})],1)},Ra=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon"},[i("i",{staticClass:"material-icons"},[e._v("cloud_upload")])])}],Ba=i("49d5"),Va=i.n(Ba),Ua={name:"v-upload",props:{multiple:{type:Boolean,default:!0},small:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data(){return{files:{}}},methods:{filesChange(e){e&&e.length&&Array.from(e).forEach(this.save)},save(e){const t=this.$helpers.shortid.generate(),i=new FormData,s=e.name,n=e.size,a=e.type;i.append("data",e,s),this.files=Object(ke["a"])({[t]:{name:s,size:Va()(n),type:a,progress:0,error:null}},this.files),this.$api.uploadFiles(i,e=>{let i=e.loaded,s=e.total;const n=Math.round(100*i/s);this.files[t].progress=n}).then(e=>e.data).then(e=>{this.$emit("upload",Object(ke["a"])({},this.files[t],{data:e})),this.$refs.select.value="",this.$refs.drop.value=""}).catch(e=>{this.files[t].error=e,this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}}},Ka=Ua,za=(i("b57a"),Object(B["a"])(Ka,La,Ra,!1,null,"4194561d",null));za.options.__file="upload.vue";var Wa=za.exports,Ha=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-progress-ring",style:{height:2*e.radius+"px",width:2*e.radius+"px"}},[i("svg",[i("circle",{staticClass:"background",attrs:{fill:"var(--"+e.color+")",stroke:"transparent","stroke-width":e.stroke,r:e.normalizedRadius,cx:e.radius,cy:e.radius}}),i("circle",{style:{strokeDashoffset:e.strokeDashoffset},attrs:{stroke:"var(--"+e.color+")",fill:"transparent","stroke-dasharray":e.circumference+" "+e.circumference,"stroke-width":e.stroke,r:e.normalizedRadius,cx:e.radius,cy:e.radius}})]),e.icon?i("i",{staticClass:"material-icons",style:{fontSize:e.iconSize,color:"var(--"+e.color+")"}},[e._v(e._s(e.icon))]):e._e()])},Ga=[],Qa={name:"v-progress-ring",props:{radius:{type:Number,default:24},stroke:{type:Number,default:2},progress:{type:Number,required:!0,validator(e){return e>=0&&e<=100}},color:{type:String,default:"dark-gray"},icon:{type:String,default:null}},data(){const e=this.radius-2*this.stroke,t=2*e*Math.PI;return{normalizedRadius:e,circumference:t}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference},iconSize(){return 6*Math.round(this.radius/6)+"px"}}},Xa=Qa,Ya=(i("5d15"),Object(B["a"])(Xa,Ha,Ga,!1,null,"26bfdc0c",null));Ya.options.__file="progress-ring.vue";var Ja=Ya.exports;g["default"].component("v-ext-page",pi),g["default"].component("v-ext-input",Qe),g["default"].component("v-ext-display",pt),g["default"].component("v-ext-layout",Tt),g["default"].component("v-ext-layout-options",Qt),g["default"].component("v-items",bi),g["default"].component("v-form",Wi),g["default"].component("v-button",Ji),g["default"].component("v-checkbox",ns),g["default"].component("v-input",ds),g["default"].component("v-radio",vs),g["default"].component("v-select",ks),g["default"].component("v-simple-select",Ss),g["default"].component("v-slider",As),g["default"].component("v-textarea",Rs),g["default"].component("v-toggle",Ws),g["default"].component("v-alert",an),g["default"].component("v-confirm",un),g["default"].component("v-modal",gn),g["default"].component("v-prompt",Cn),g["default"].component("v-header",ba),g["default"].component("v-header-button",Ia),g["default"].component("v-info-sidebar",Pa),g["default"].component("v-error",Ri),g["default"].component("invisible-label",U),g["default"].component("loader",Q),g["default"].component("v-spinner",q.a),g["default"].component("v-avatar",te),g["default"].component("v-card",le),g["default"].component("v-details",pe),g["default"].component("v-table",ye),g["default"].component("v-upload",Wa),g["default"].component("v-progress-ring",Ja);i("5b09"),i("6bff");var Za=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hydratingError?i("div",{staticClass:"error"},[i("v-error",{attrs:{icon:"warning",title:e.$t("server_error"),body:e.$t("server_error_copy"),color:"danger"}}),i("p",[e._v("\n    Try again later or\n    "),i("router-link",{attrs:{to:"/logout"}},[e._v("login to another instance")]),e._v(".\n  ")],1)],1):e.configError?i("div",{staticClass:"error"},[i("v-error",{attrs:{icon:"settings",title:e.$t("config_error"),body:e.$t("config_error_copy"),color:"warning"}})],1):e.extensionError?i("div",{staticClass:"error"},[i("v-error",{attrs:{icon:"extension",title:e.$t("extensions_missing"),body:e.$t("extensions_missing_copy"),color:"warning"}})],1):e.publicRoute?i("router-view",{staticClass:"directus"}):i("div",{style:{"--accent":"var(--"+e.color+")"}},[e.hydrated?i("div",{staticClass:"directus"},[i("v-nav-sidebar"),i("router-view",{staticClass:"page-root"})],1):i("loader",{attrs:{area:"full-page"}}),i("portal-target",{attrs:{name:"modal"}}),i("v-notification")],1)},eo=[],to=i("2f62"),io=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-sidebar"},[i("v-blocker",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"blocker",on:{click:e.disableNav}}),i("transition",{attrs:{name:"nav"}},[i("aside",{class:{active:e.active}},[i("button",{staticClass:"a11y-close",on:{click:e.disableNav}},[e._v("Close nav")]),i("v-logo",{staticClass:"logo"}),i("section",{staticClass:"content"},[i("project-switcher"),e.collections&&e.collections.length>0?i("nav-menu",{attrs:{title:e.$t("collections"),"no-border":!e.bookmarks.length&&!e.extensions,links:e.collections.map(function(t){var i=t.collection,s=t.icon;return{path:"/collections/"+i,name:e.$t("collections-"+i),icon:s}})}}):e._e(),e.extensions?i("nav-menu",{attrs:{title:e.$t("extensions"),links:e.extensions,"no-border":!e.bookmarks.length}}):e._e(),i("nav-bookmarks",{attrs:{bookmarks:e.bookmarks,"no-border":""}})],1),i("user-menu")],1)])],1)},so=[],no=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-logo"},[e.customLogoExists?i("img",{attrs:{src:e.customLogoPath,alt:e.projectName}}):i("div",{staticClass:"logo",class:{running:e.running},on:{animationiteration:e.checkRunning}})])},ao=[],oo={name:"v-logo",data(){return{customLogoPath:"",running:!1}},computed:{customLogoExists(){return Boolean(this.$store.state.settings.logo)},projectName(){return this.$store.state.auth.projectName},queueContainsItems(){return 0!==this.$store.state.queue.length}},watch:{queueContainsItems(e){!0===e&&(this.running=!0)}},created(){if(this.customLogoExists){const e=this.$store.state.settings.logo;this.$api.getItem("directus_files",e).then(e=>e.data.storage.full_url).then(e=>this.customLogoPath=e).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},methods:{checkRunning(){!1===this.queueContainsItems&&(this.running=!1)}}},lo=oo,ro=(i("53eb"),Object(B["a"])(lo,no,ao,!1,null,"714080ad",null));ro.options.__file="logo.vue";var co=ro.exports,uo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"project-switcher"},[i("div",{directives:[{name:"tooltip",rawName:"v-tooltip.left",value:{content:e.$store.state.auth.url+"<br>"+e.$t("latency")+": "+e.$n(Math.round(e.$store.state.latency[e.$store.state.latency.length-1].latency))+"ms",boundariesElement:"body"},expression:"{\n      content:\n        $store.state.auth.url +\n        `<br>${$t('latency')}: ${$n(\n          Math.round(\n            $store.state.latency[$store.state.latency.length - 1].latency\n          )\n        )}ms`,\n      boundariesElement: 'body'\n    }",modifiers:{left:!0}}],class:{slow:1==e.$store.getters.signalStrength,disconnected:0==e.$store.getters.signalStrength}},[i("v-signal",{staticClass:"icon"}),i("span",{staticClass:"no-wrap"},[e._v(e._s(e.$store.state.auth.projectName))]),Object.keys(e.urls).length>1?i("i",{staticClass:"material-icons chevron"},[e._v("arrow_drop_down")]):e._e(),Object.keys(e.urls).length>1?i("select",{domProps:{value:e.currentUrl},on:{change:function(t){return t.preventDefault(),e.changeUrl(t)}}},e._l(e.urls,function(t,s){return i("option",{key:t+s,attrs:{checked:s===e.currentUrl||s+"/"===e.currentUrl},domProps:{value:s}},[e._v(e._s(t))])})):e._e()],1)])},ho=[],po=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"fade"}},[0===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 26 24"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.24 8l1.35-1.68C25.1 5.96 20.26 2 13 2S.9 5.96.42 6.32l12.57 15.66.01.02.01-.01L20 13.28V8h4.24z"}}),i("path",{attrs:{d:"M22 22h2v-2h-2v2zm0-12v8h2v-8h-2z"}})]):1===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}}),i("path",{attrs:{d:"M13.34 29.72l10.65 13.27.01.01.01-.01 10.65-13.27C34.13 29.31 30.06 26 24 26s-10.13 3.31-10.66 3.72z"}})]):2===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}}),i("path",{attrs:{d:"M9.58 25.03l14.41 17.95.01.02.01-.02 14.41-17.95C37.7 24.47 32.2 20 24 20s-13.7 4.47-14.42 5.03z"}})]):3===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{"fill-opacity":".3",d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}}),i("path",{attrs:{d:"M7.07 21.91l16.92 21.07.01.02.02-.02 16.92-21.07C40.08 21.25 33.62 16 24 16c-9.63 0-16.08 5.25-16.93 5.91z"}})]):4===e.strength?i("svg",{staticClass:"v-signal",attrs:{viewBox:"0 0 48 48"}},[i("path",{attrs:{d:"M24.02 42.98L47.28 14c-.9-.68-9.85-8-23.28-8S1.62 13.32.72 14l23.26 28.98.02.02.02-.02z"}}),i("path",{attrs:{d:"M0 0h48v48H0z",fill:"none"}})]):e._e()])},mo=[],fo={name:"v-signal",computed:{strength(){return this.$store.getters.signalStrength}}},vo=fo,_o=(i("c5d8"),Object(B["a"])(vo,po,mo,!1,null,"341685e1",null));_o.options.__file="signal.vue";var go=_o.exports,yo={name:"project-switcher",components:{VSignal:go},data(){return{active:!1}},computed:{urls(){return this.$lodash.mapKeys(window.__DirectusConfig__.api,(e,t)=>!1===t.endsWith("/")?t+"/":t)},currentUrl(){return this.$store.state.auth.url+"/"+this.$store.state.auth.env+"/"}},methods:{changeUrl(e){const t=e.target.value;this.$store.dispatch("changeAPI",t)}}},bo=yo,$o=(i("7ec6"),Object(B["a"])(bo,uo,ho,!1,null,"14489804",null));$o.options.__file="project-switcher.vue";var ko=$o.exports,wo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-menu"},[e.title?i("h3",{staticClass:"style-4"},[e._v(e._s(e.title))]):e._e(),i("nav",{class:{"no-border":e.noBorder}},[i("ul",e._l(e.links,function(t){var s=t.path,n=t.name,a=t.icon,o=t.color;return i("li",{key:s},[i(s.startsWith("http")?"a":"router-link",{tag:"component",class:o||null,attrs:{to:s,href:s,target:"__blank",rel:"noopener noreferrer"}},[a?i("i",{staticClass:"material-icons icon"},[e._v(e._s(a))]):i("svg",{staticClass:"icon",attrs:{viewBox:"0 0 17 18"}},[i("path",{attrs:{d:"M.4783 14.2777l7.676 3.5292a.7888.7888 0 0 0 .6913 0l7.6738-3.5292a.7661.7661 0 0 0 .4805-.748V4.3566a.8228.8228 0 0 0-.0147-.1474V4.165a.824.824 0 0 0-.0329-.1054l-.0113-.034a.8228.8228 0 0 0-.0669-.1246l-.0181-.0261a.824.824 0 0 0-.0726-.0873l-.0396-.026a.8228.8228 0 0 0-.0907-.0748l-.0227-.0159a.824.824 0 0 0-.111-.0623L8.8434.0794a.7888.7888 0 0 0-.6914 0L.4794 3.6086a.8228.8228 0 0 0-.111.0623l-.0227.0159a.824.824 0 0 0-.0907.0748l-.0283.0283a.824.824 0 0 0-.0726.0873l-.0181.026a.8228.8228 0 0 0-.0657.1247l-.0227.0317a.824.824 0 0 0-.034.1054v.043A.8228.8228 0 0 0 0 4.3567v9.1731c0 .3513.1587.6007.4783.748zm1.1684-8.6325L7.675 8.4218v7.3587l-6.0282-2.7778V5.644v.0012zM9.324 15.7794V8.4207l6.027-2.7767v7.3587l-6.027 2.7755v.0012zm-.825-14.051l5.7062 2.6293-5.7063 2.627-5.7052-2.6281 5.7052-2.6282z","fill-rule":"nonzero"}})]),e._v("\n          "+e._s(n)+"\n        ")])],1)}))])])},Co=[],xo={name:"nav-menu",props:{title:{type:String,default:null},links:{type:Array,required:!0},noBorder:{type:Boolean,default:!1}}},Io=xo,Oo=(i("de04"),Object(B["a"])(Io,wo,Co,!1,null,"10ae274b",null));Oo.options.__file="nav-menu.vue";var So=Oo.exports,Eo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"user-menu"},[i("header",[i("v-avatar",{staticClass:"avatar",attrs:{src:e.avatarURL,alt:e.fullName,indicator:!0}}),i("span",{staticClass:"no-wrap"},[e._v(e._s(e.fullName))]),i("i",{staticClass:"material-icons"},[e._v("more_vert")])],1),i("div",{staticClass:"links"},[i("nav-menu",{attrs:{links:e.firstLinks}}),i("nav-menu",{attrs:{links:e.secondLinks}}),i("nav-menu",{attrs:{links:e.thirdLinks}}),i("button",{staticClass:"sign-out",on:{click:function(t){e.confirmSignOut=!0}}},[i("i",{staticClass:"material-icons icon"},[e._v("exit_to_app")]),e._v(" "+e._s(e.$t("sign_out"))+"\n    ")])],1),e.confirmSignOut?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{busy:e.confirmSignOutLoading,message:e.editing?e.$t("sign_out_confirm_edits"):e.$t("sign_out_confirm"),"confirm-text":e.$t("sign_out")},on:{cancel:function(t){e.confirmSignOut=!1},confirm:e.signOut}})],1):e._e()],1)},jo=[],To={name:"user-menu",components:{NavMenu:So},data(){return{confirmSignOut:!1,confirmSignOutLoading:!1}},computed:{avatarURL(){return this.$store.state.currentUser.avatar?this.$store.state.currentUser.avatar.data.full_url:null},currentUserID(){return this.$store.state.currentUser&&this.$store.state.currentUser.id},editing(){return this.$store.getters.editing},email(){return this.$store.state.currentUser&&this.$store.state.currentUser.email},fullName(){const e=this.$store.state.currentUser&&this.$store.state.currentUser.first_name,t=this.$store.state.currentUser&&this.$store.state.currentUser.last_name;return`${e} ${t}`},permissions(){return this.$store.state.permissions},firstLinks(){const e=[];return!0===this.$store.state.currentUser.admin&&e.push({path:"/settings",name:this.$t("admin_settings"),icon:"settings",color:"warning"}),e.push({path:"https://docs.directus.io",name:this.$t("help_and_docs"),icon:"help"}),e},secondLinks(){const e=[];return"none"!==this.permissions.directus_files.read&&e.push({path:"/files",name:this.$t("file_library"),icon:"collections"}),"none"===this.permissions.directus_users.read&&"mine"===this.permissions.directus_users.read||e.push({path:"/users",name:this.$t("user_directory"),icon:"person"}),e},thirdLinks(){const e=[];return"none"!==this.permissions.directus_activity.read&&e.push({path:"/activity",name:this.$t("my_activity"),icon:"notifications"}),e.push({path:`/users/${this.currentUserID}`,name:this.$t("my_profile"),icon:"person"}),e}},methods:{signOut(){this.confirmSignOutLoading=!0,this.$store.dispatch("logout")}}},Fo=To,No=(i("4a6a"),Object(B["a"])(Fo,Eo,jo,!1,null,"44523a0c",null));No.options.__file="user-menu.vue";var Ao=No.exports,Mo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"nav-bookmarks"},[e.bookmarks&&e.bookmarks.length>0?i("h3",{staticClass:"style-4"},[e._v("\n    "+e._s(e.$t("bookmarks"))+"\n  ")]):e._e(),e.bookmarks&&e.bookmarks.length>0?i("nav",{class:{"no-border":e.noBorder}},[i("ul",e._l(e.bookmarks,function(t){return i("li",{key:t.id,staticClass:"bookmark"},[i("router-link",{staticClass:"no-wrap",attrs:{to:"/bookmarks/"+t.collection+"/"+t.id}},[i("i",{staticClass:"material-icons icon"},[e._v("bookmark_outline")]),e._v(e._s(t.title)+"\n        ")]),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("delete_bookmark"),expression:"$t('delete_bookmark')"}],on:{click:function(i){e.confirmRemove=!0,e.toBeDeletedBookmark=t.id}}},[i("i",{staticClass:"material-icons"},[e._v("remove_circle_outline")])])],1)}))]):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("delete_bookmark_body")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.deleteBookmark}})],1):e._e()],1)},qo=[],Do={name:"nav-bookmarks",props:{bookmarks:{type:Array,required:!0},noBorder:{type:Boolean,default:!1}},data(){return{confirmRemove:!1,toBeDeletedBookmark:null}},methods:{deleteBookmark(){this.$store.dispatch("deleteBookmark",this.toBeDeletedBookmark),this.confirmRemove=!1,this.toBeDeletedBookmark=null}}},Po=Do,Lo=(i("2734"),Object(B["a"])(Po,Mo,qo,!1,null,"08585a8a",null));Lo.options.__file="nav-bookmarks.vue";var Ro=Lo.exports,Bo={name:"nav-sidebar",components:{VLogo:co,ProjectSwitcher:ko,NavMenu:So,UserMenu:Ao,NavBookmarks:Ro,VBlocker:Aa},computed:{permissions(){return this.$store.state.permissions},collections(){const e=this.$store.state.collections;return null==e?[]:Object.values(e).filter(e=>0==e.hidden&&1==e.managed&&!1===e.collection.startsWith("directus_")).filter(e=>{return e.status_mapping?this.$lodash.some(this.permissions[e.collection].statuses,e=>"none"!==e.read):"none"!==this.permissions[e.collection].read})},bookmarks(){return this.$store.state.bookmarks},projectName(){return this.$store.state.auth.projectName},active(){return this.$store.state.sidebars.nav},extensions(){const e=[],t=this.$store.state.extensions.pages;return this.$lodash.forEach(t,(t,i)=>{e.push({path:`/ext/${i}`,name:t.name,icon:t.icon})}),e.length?e:null}},methods:{logout(){this.$store.dispatch("logout")},deleteBookmark(e){this.$store.dispatch("deleteBookmark",e)},toBookmark(e){const t=e.collection,i=e.search_query,s=e.filters,n=e.view_options,a=e.view_type,o=e.view_query;this.$store.dispatch("setListingPreferences",{collection:t,updates:{search_query:i,filters:s,view_options:n,view_type:a,view_query:o}}).then(()=>{this.$router.push(`/collections/${t}`)})},disableNav(){this.$store.commit(ha,!1)}}},Vo=Bo,Uo=(i("2a2f"),i("58de"),Object(B["a"])(Vo,io,so,!1,null,"49bd2f10",null));Uo.options.__file="nav-sidebar.vue";var Ko=Uo.exports,zo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notifications"},[i("transition-group",{attrs:{name:"slide-fade",tag:"div"}},e._l(e.notifications,function(e){return i("v-item",{key:e.id,attrs:{item:e}})}))],1)},Wo=[],Ho=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"notification",class:e.item.type},[i("div",{staticClass:"icon-main",style:{backgroundColor:e.ringColor}},[i("i",{staticClass:"material-icons",style:{color:e.iconColor}},[e._v(e._s(e.item.iconMain))])]),i("div",{staticClass:"content"},[i("div",{staticClass:"title"},[e._v(e._s(e.item.title))]),i("div",{staticClass:"details",domProps:{innerHTML:e._s(e.detailHtml)}})]),i("div",{staticClass:"icon-right",on:{click:e.actionClick}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.item.iconRight))])])])},Go=[],Qo={name:"v-item",props:{item:{type:Object,required:!0}},computed:{detailHtml(){return void 0!==this.item.details?this.$helpers.snarkdown(this.item.details):""},iconColor(){return void 0!==this.item.color?`var(--${this.item.color}-500)`:"var(--blue-grey-500)"},ringColor(){return void 0!==this.item.color?`var(--${this.item.color}-100)`:"var(--blue-grey-100)"}},methods:Object(ke["a"])({},Object(to["b"])("notifications",[va]),{startItemTimeout(){void 0!==this.item.delay&&this.item.delay>0&&setTimeout(()=>this.removeItemFromStore(),this.item.delay)},removeItemFromStore(){this.$store.commit(va,this.item.id)},actionClick(){if(!(this.item.onClick instanceof Function))throw new Error("Notification callback is not a function");this.item.onClick(),this.removeItemFromStore()}}),mounted(){this.startItemTimeout()}},Xo=Qo,Yo=(i("eac0"),Object(B["a"])(Xo,Ho,Go,!1,null,"0cc77db5",null));Yo.options.__file="item.vue";var Jo=Yo.exports,Zo={name:"VNotifications",components:{VItem:Jo},computed:{notifications(){return this.$store.state.notifications.queue}}},el=Zo,tl=(i("ec05"),Object(B["a"])(el,zo,Wo,!1,null,"7558f1bd",null));tl.options.__file="notifications.vue";var il=tl.exports,sl={name:"directus",metaInfo:{title:"Directus"},components:{VBlocker:Aa,VError:Ri,VNavSidebar:Ko,VNotification:il},computed:Object(ke["a"])({},Object(to["c"])({color:e=>e.settings.values.color||"light-blue-600"}),{publicRoute(){return this.$route.meta.publicRoute||!1},hydrated(){return this.$store.state.hydrated||!1},hydratingError(){return this.$store.state.hydratingError},configError(){return null==window.__DirectusConfig__},extensionError(){if(!this.hydrated)return null;const e=this.$store.state.extensions;return 0===Object.values(e.interfaces).length&&0===Object.values(e.layouts).length&&0===Object.values(e.pages).length||void 0}}),watch:{$route(){this.bodyClass(),this.$store.commit(ha,!1),this.infoActive=!1},infoActive(e){const t=this.$route.meta&&"wide"===this.$route.meta.infoSidebarWidth?"info-wide-active":"info-active";e?document.body.classList.add(t):(document.body.classList.remove("info-wide-active"),document.body.classList.remove("info-active"))},hydratingError(e){e&&document.body.classList.add("no-padding")}},created(){this.bodyClass()},methods:{bodyClass(){this.publicRoute?document.body.classList.add("no-padding"):document.body.classList.remove("no-padding")},keepEditing(){this.$router.push(`/collections/${this.$store.state.edits.collection}/${this.$store.state.edits.primaryKey}`)},discardChanges(){this.$store.dispatch("discardChanges")}}},nl=sl,al=(i("6294"),i("018c"),Object(B["a"])(nl,Za,eo,!1,null,"3386c210",null));al.options.__file="app.vue";var ol=al.exports,ll=i("8c4f"),rl=i("ee6c"),cl=i.n(rl),dl=i("0e44"),ul=i("6cc8"),hl=i.n(ul),pl=i("1b32"),ml=i.n(pl);let fl=null;function vl(){fl=setInterval(()=>{ic.dispatch("latency"),ic.dispatch("track",{page:Oh.currentRoute.path})},1e4)}function _l(){clearInterval(fl)}const gl=window.__DirectusConfig__,yl=gl?Object(y["mapKeys"])(gl.api,(e,t)=>t.endsWith("/")?t:t+"/"):null;function bl(e){let t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0],t=t.split("?")[0],t}function $l(e,t){let i=e.commit;i(On);const s=t.url;let n=s;if(!1===n.endsWith("/")&&(n+="/"),!1===n.startsWith("http")){const e=document.createElement("a");e.href=n,n=e.href}const a=n.split("/"),o=a.pop()||a.pop(),l=a.join("/");return rc.login(Object(ke["a"])({},t,{url:l,env:o,persist:!0})).then(e=>{i(Sn,Object(ke["a"])({},e,{projectName:yl[s]||yl[e.url+"/"+e.env+"/"]||ml()(bl(e.url))}))}).catch(e=>{throw i(En,e),e})}function kl(e,t){let i=e.commit;i(On);const s=hl()(t),n=s.url,a=s.project;return rc.url=n,rc.env=a,rc.request("POST","auth/sso/access_token",{},{request_token:t}).then(e=>e.data).then(e=>{let t=e.token;rc.token=t,i(Sn,{env:a,url:n,token:t,projectName:gl.api[n]||bl(n)})})}function wl(e,t){let i=e.commit,s=t.token,n=t.url,a=t.env;i(Tn,{token:s,url:n,env:a})}function Cl(e,t){let i=e.commit;return new Promise(e=>{_l(),rc.logout(),sc(),Le.locale="en-US",Oh.push("/login"),i(jn,t),e()})}function xl(e,t){let i=e.commit,s=e.dispatch;s("logout").then(()=>{const e=t.split("/"),s=e.pop()||e.pop(),n=e.join("/");i(Nn,{url:n,env:s})})}function Il(e){let t=e.commit;t(Fn)}function Ol(e){let t=e.commit;t(jn)}const Sl={[On](e){e.loading=!0},[Sn](e,t){e.loading=!1,e.error=null,e.token=t.token,e.env=t.env,e.url=t.url,e.projectName=t.projectName},[En](e,t){e.token=null,e.url=null,e.env=null,e.projectName=null,e.loading=!1,e.error=t},[jn](e,t){e.error=t},[Tn](e,t){e.loading=!1,e.error=null,e.token=t.token,e.env=t.env,e.url=t.url},[Fn](e){e.error=null},[Nn](e,t){let i=t.url,s=t.env;e.url=i,e.env=s}};var El=Sl;function jl(e){if(e.token){const t=hl()(e.token);return t.exp&&Number.isInteger(t.exp)&&(t.exp=new Date(1e3*t.exp)),t}return null}function Tl(e){return!!(e.token&&e.token.length>0&&e.url&&e.url.length>0&&jl(e).exp>new Date)}const Fl={token:null,url:null,env:"_",error:null,loading:!1,projectName:null};var Nl={state:Fl,actions:n,mutations:El,getters:a};function Al(e,t,i){const s=e=>{return null==e?e:"string"===typeof e?e.split(" ").map(e=>e.startsWith("$t:")?Le.t(`${t}-${i}-${e.substring(3)}`):e).join(" "):Object(y["isObject"])(e)&&Object.keys(e).length>0||Array.isArray(e)&&e.length>0?Al(e,t,i):e};return Array.isArray(e)?e.map(s):Object(y["mapValues"])(e,s)}function Ml(e,t){let i=e.commit;const n=t.toUpperCase();let a=null;switch(t){case"interfaces":a=rc.getInterfaces();break;case"layouts":a=rc.getLayouts();break;case"pages":a=rc.getPages();break;default:}return a.then(e=>e.data).then(e=>{return e.forEach(e=>{const i=e.id,s=e.translation;s&&Object(y["forEach"])(s,(e,s)=>{Le.mergeLocaleMessage(s,Object(y["mapKeys"])(e,(e,s)=>`${t}-${i}-${s}`))})}),e}).then(e=>e.map(e=>Al(e,t,e.id))).then(e=>{i(s[`SET_${n}`],e)})}function ql(e){let t=e.dispatch;return Promise.all([t("getExtensions","interfaces"),t("getExtensions","layouts"),t("getExtensions","pages")])}const Dl={[Xn](e,t){e.interfaces=Object(y["keyBy"])(t,"id")},[Yn](e,t){e.layouts=Object(y["keyBy"])(t,"id")},[Jn](e,t){e.pages=Object(y["keyBy"])(t,"id")}};var Pl=Dl;const Ll={layouts:{},interfaces:{},pages:{}};var Rl={state:Ll,actions:o,mutations:Pl};function Bl(e,t){let i=e.commit,s=t.collection,n=t.field;i(Wn,{collection:s,field:n})}function Vl(e,t){let i=e.commit,s=t.collection,n=t.field;i(Hn,{collection:s,field:n})}function Ul(e,t){let i=e.commit,s=t.collection,n=t.updates;i(Gn,{collection:s,updates:n})}function Kl(e,t){let i=e.commit,s=t.collection,n=t.field;i(Qn,{collection:s,field:n})}async function zl(e){let t=e.commit,i=await rc.getCollections(),s=i.data;b.a.forEach(s,e=>{b.a.isEmpty(e.translation)?Object.keys(Ue).forEach(t=>{Le.mergeLocaleMessage(t,{[`collections-${e.collection}`]:ml()(e.collection)})}):b.a.forEach(e.translation,(t,i)=>{Le.mergeLocaleMessage(i,{[`collections-${e.collection}`]:t})})});const n=await rc.getSettingsFields(),a=n.data;s=b.a.keyBy(s,"collection"),s.directus_settings.fields=b.a.keyBy(a,"field"),t(Dn,s)}function Wl(e,t){let i=e.commit;b.a.isEmpty(t.translation)?Object.keys(Ue).forEach(e=>{Le.mergeLocaleMessage(e,{[`collections-${t.collection}`]:ml()(t.collection)})}):b.a.forEach(t.translation,(e,i)=>{Le.mergeLocaleMessage(i,{[`collections-${t.collection}`]:e})}),i(Pn,t)}function Hl(e,t){let i=e.commit;i(Ln,t)}function Gl(e,t){let i=e.commit,s=t.collection,n=t.edits;i(Rn,{collection:s,edits:n})}const Ql={[Dn](e,t){const i=b.a.mapValues(b.a.keyBy(t,"collection"),e=>{const t=b.a.find(e.fields,{interface:"status"});let i=t&&t.options&&t.options.status_mapping;return i&&"string"===typeof i&&(i=JSON.parse(i)),Object(ke["a"])({},e,{status_mapping:i})});b.a.forEach(i,(t,i)=>{e[i]=t})},[Pn](e,t){g["default"].set(e,t.collection,t)},[Ln](e,t){g["default"].delete(e,t)},[Rn](e,t){let i=t.collection,s=t.edits;b.a.forEach(s,(t,s)=>{g["default"].set(e[i],s,t)})},[Wn](e,t){let i=t.collection,s=t.field;g["default"].set(e[i],"fields",Object(ke["a"])({},e[i].fields,{[s.field]:s}))},[Hn](e,t){let i=t.collection,s=t.field;g["default"].set(e[i],"fields",Object(ke["a"])({},e[i].fields,{[s.field]:s}))},[Gn](e,t){let i=t.collection,s=t.updates;s.forEach(t=>{g["default"].set(e[i].fields,t.field,Object(ke["a"])({},e[i].fields[t.field],t))})},[Qn](e,t){let i=t.collection,s=t.field;const n=Object.assign({},e[i].fields);delete n[s],g["default"].set(e[i],"fields",n)}};var Xl=Ql;const Yl={};var Jl={actions:l,mutations:Xl,state:Yl};function Zl(e){let t=e.commit;t(Bn)}function er(e,t){let i=e.commit,s=t.collection,n=t.primaryKey,a=t.savedValues;i(Un,{collection:s,primaryKey:n,savedValues:a})}function tr(e,t){let i=e.commit,s=e.state,n=t.field,a=t.value;return s.savedValues[n]==a?i(Kn,{field:n}):i(zn,{field:n,value:a})}function ir(e,t){let i=e.commit;return i(Kn,{field:t})}function sr(e,t){let i=e.commit,s=e.state,n=e.rootState;function a(e){return i(Vn),e}const o=Object(ke["a"])({},s,t);return"directus_users"===o.collection&&o.primaryKey==n.currentUser.id&&i(la,o.values),"+"===o.primaryKey?rc.createItem(o.collection,o.values).then(a):rc.updateItem(o.collection,o.primaryKey,o.values).then(a)}function nr(e){const t=e.collection&&e.collection.length>0,i=e.primaryKey&&e.primaryKey.length>0,s=e.values&&Object.keys(e.values).length>0,n=e.saving;return t&&i&&s&&!n||!1}const ar={[Bn](e){e.saving=!1,e.error=null,e.collection=null,e.primaryKey=null,e.values={}},[Vn](e){e.saving=!1,e.error=null,e.collection=null,e.primaryKey=null,e.values={}},[Un](e,t){let i=t.collection,s=t.primaryKey,n=t.savedValues;e.collection=i,e.primaryKey=s,e.savedValues=n,e.values={}},[Kn](e,t){let i=t.field;g["default"].delete(e.values,i)},[zn](e,t){let i=t.field,s=t.value;g["default"].set(e.values,i,s)}};var or=ar;const lr={collection:null,primaryKey:null,values:{},savedValues:{}};var rr={actions:r,mutations:or,state:lr,getters:c};function cr(e,t){let i=e.commit,s=t.collection,n=t.permission;i(ia,{collection:s,permission:n})}function dr(e){let t=e.commit,i=e.rootState;const s=i.collections,n=!0===i.currentUser.admin,a=n?Vi:Bi,o=Object(y["mapValues"])(s,e=>{return e.status_mapping?{statuses:Object(y["mapValues"])(e.status_mapping,()=>a),$create:a}:Object(ke["a"])({},a,{$create:a})});return n?(t(ta,o),Promise.resolve()):rc.getMyPermissions().then(e=>e.data).then(e=>{return e.forEach(e=>{const t=e.collection,i=e.status;return i?"$create"===i?o[t].$create=e:o[t].statuses[i]=e:o[t]=Object(ke["a"])({},o[t],e)}),t(ta,o),o}).then(e=>{Object(y["forEach"])(e,e=>{if(e.read_field_blacklist&&e.read_field_blacklist.length>0){const i=s[e.collection];t(Rn,{collection:e.collection,edits:{fields:Object(y["omit"])(i.fields,e.read_field_blacklist)}})}})})}const ur={[ta](e,t){Object(y["forEach"])(t,(t,i)=>{g["default"].set(e,i,t)})},[ia](e,t){let i=t.collection,s=t.permission;g["default"].set(e,i,s)}};var hr=ur,pr={actions:d,mutations:hr,state:{}};const mr="⚙️ Set Settings",fr="⚙️ Set Setting";var vr={[mr](e,t){const i=b.a.keyBy(t,"key");e.values=b.a.mapValues(i,"value"),e.primaryKeys=b.a.mapValues(i,"id")},[fr](e,t){let i=t.id,s=t.key,n=t.value;e.values[s]=n,e.primaryKeys[s]=i}};async function _r(e){let t=e.commit;const i=await rc.getSettings(),s=i.data;t(mr,s)}function gr(e,t){let i=e.dispatch;return Promise.all(Object.keys(t).map(e=>i("setSetting",{key:e,value:t[e]})))}async function yr(e,t){let i=e.commit,s=e.state,n=t.key,a=t.value;const o=s.primaryKeys[n];if(b.a.isNil(o)){const e=await rc.createItem("directus_settings",{key:n,value:a}),t=e.data;i(fr,t)}else{const e=await rc.updateItem("directus_settings",o,{value:a}),t=e.data;i(fr,t)}}var br={actions:u,mutations:vr,state:{values:{},primaryKeys:{}}};function $r(e){let t=e.commit;return rc.getUsers({fields:["id","first_name","last_name","title","status","timezone","roles.*","avatar.*","company"]}).then(e=>e.data).then(e=>e.map(e=>Object(ke["a"])({},e,{roles:e.roles.map(e=>{let t=e.role;return t})}))).then(e=>{t(ma,e)})}var kr={[ma](e,t){Object.values(t).forEach(t=>{g["default"].set(e,t.id,t)})}};const wr={};var Cr={actions:h,mutations:kr,state:wr};function xr(e){let t=e.commit;return rc.getRelations({limit:-1}).then(e=>e.data).then(e=>t(ra,e))}function Ir(e,t){let i=e.commit;i(ca,t)}function Or(e,t){let i=e.commit;i(da,t)}function Sr(e,t,i){let s=i.collections;return function(t,i){const n=e.filter(e=>e.collection_many===t&&e.field_many===i),a=n?n[n.length-1]:null;return a?{id:a.id,collection_many:s[a.collection_many],collection_one:s[a.collection_one],field_many:s[a.collection_many].fields[a.field_many],field_one:s[a.collection_one].fields[a.field_one]}:null}}function Er(e,t,i){let s=i.collections;return function(i,n){const a=e.filter(e=>e.collection_one===i&&e.field_one===n),o=a?a[a.length-1]:null;if(o&&null!=o.junction_field){const e=t.m2o(o.collection_many,o.junction_field);return{id:o.id,collection_many:s[o.collection_many],collection_one:s[o.collection_one],field_many:s[o.collection_many].fields[o.field_many],field_one:s[o.collection_one].fields[o.field_one],junction:e}}return o?{id:o.id,collection_many:s[o.collection_many],collection_one:s[o.collection_one],field_many:s[o.collection_many].fields[o.field_many],field_one:s[o.collection_one].fields[o.field_one]}:null}}var jr={[ra](e,t){Object(y["forEach"])(t,(t,i)=>{g["default"].set(e,i,t)})},[ca](e,t){g["default"].set(e,e.length,t)},[da](e,t){const i=e.map(e=>{return e.id===t.id?t:e});Object(y["forEach"])(i,(t,i)=>{g["default"].set(e,i,t)})}};const Tr=[];var Fr={actions:p,mutations:jr,getters:m,state:Tr},Nr={[ua](e,t){e.apiVersion=t.apiVersion,e.phpVersion=t.phpVersion,e.maxUploadSize=t.maxUploadSize}};function Ar(e){let t=e.commit;rc.serverInfo().then(e=>e.data).then(e=>{t(ua,{apiVersion:Object(y["get"])(e,"api.version"),phpVersion:Object(y["get"])(e,"server.general.php_version"),maxUploadSize:Object(y["get"])(e,"server.max_upload_size")})})}const Mr={apiVersion:null,phpVersion:null,maxUploadSize:null,databaseVendor:"mysql"};var qr={state:Mr,mutations:Nr,actions:f};const Dr={[fa](e,t){e.queue.push(t)},[va](e,t){e.queue=e.queue.filter(e=>e.id!==t)}};var Pr=Dr;const Lr={queue:[]};var Rr={state:Lr,mutations:Pr},Br={hydrated:!1,hydratingError:null,latency:[],currentUser:{},bookmarks:[],sidebars:{nav:!1,info:!1},queue:[]};function Vr(e){let t=e.commit;const i=performance.now(),s=Date.now();rc.request("get","/server/ping",{},{},!0).then(()=>{const e=performance.now(),n=e-i;t(sa,{date:s,latency:n})}).catch(e=>{const n=performance.now(),a=n-i;return-2===e.code?t(sa,{date:s,latency:a}):t(sa,{date:s,latency:-1})})}function Ur(e){let t=e.commit;return rc.getMe({fields:["id","avatar.*","email","first_name","last_name","locale","roles.*"]}).then(e=>e.data).then(e=>{return Object(ke["a"])({},e,{roles:e.roles.map(e=>e.role),admin:e.roles.map(e=>e.role).includes(1)})}).then(e=>t(oa,e))}function Kr(e,t){let i=e.commit,s=e.state,n=t.page;const a=s.currentUser.id,o={last_page:n};return i(la,o),rc.request("PATCH",`/users/${a}/tracking/page`,{},o)}function zr(e){let t=e.commit;return rc.getMyBookmarks().then(e=>{return t(An,e),e})}function Wr(e,t){let i=e.commit;return rc.createCollectionPreset(t).then(e=>{const t=e.data;return i(Mn,t),t})}function Hr(e,t){let i=e.commit;return i(qn,t),rc.deleteCollectionPreset(t).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}function Gr(e,t){let i=e.commit,s=t.id,n=t.desc;i(na,{id:s,desc:n})}function Qr(e,t){let i=e.commit;i(aa,t)}function Xr(e){let t=e.latency[e.latency.length-1];return t?(t=t.latency,t>0&&t<200?4:t>=200&&t<500?3:t>=500&&t<1e3?2:t>=1e3?1:0):0}const Yr={[Zn](e,t){e.hydrated=t},[ea](e,t){e.hydrated=!1,e.hydratingError=t},[sa](e,t){const i=[...e.latency];i.push(t),i.length>200&&i.shift(),e.latency=i},[oa](e,t){e.currentUser=t},[la](e,t){e.currentUser=Object(ke["a"])({},e.currentUser,t)},[An](e,t){e.bookmarks=t},[Mn](e,t){e.bookmarks=[...e.bookmarks,t]},[qn](e,t){e.bookmarks=e.bookmarks.filter(e=>e.id!==t)},[ha](e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!e.sidebars.nav;e.sidebars.nav=t},[pa](e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!e.sidebars.info;e.sidebars.info=t},[na](e,t){let i=t.id,s=t.desc;e.queue=[...e.queue,{id:i,desc:s}]},[aa](e,t){e.queue=e.queue.filter(e=>e.id!==t)}};var Jr=Yr;g["default"].use(to["a"]);const Zr=!1,ec=["auth.token","auth.url","auth.env","auth.projectName","edits"],tc=new to["a"].Store({state:Br,actions:v,getters:_,mutations:Jr,strict:Zr,modules:{auth:Nl,collections:Jl,extensions:Rl,edits:rr,permissions:pr,users:Cr,relations:Fr,serverInfo:qr,notifications:Rr,settings:br},plugins:[Object(dl["a"])({key:"directus",paths:ec,storage:window.sessionStorage})]});var ic=tc;function sc(){const e=JSON.parse(JSON.stringify(Br));e.auth.url=tc.state.auth.url,tc.replaceState(JSON.parse(JSON.stringify(e)))}const nc=new cl.a,ac=ic.state.auth.token,oc=ic.state.auth.url,lc=ac?Object(rl["getPayload"])(ac):null;if(lc&&oc){const e=lc.exp.getTime()-Date.now();e>1e4?(nc.url=oc,nc.token=ac):ic.dispatch("clearAuth")}nc.onAutoRefreshSuccess=function(e){ic.dispatch("refresh",e)},nc.onAutoRefreshError=function(e){ic.dispatch("logout",e)},nc.startInterval();var rc=nc,cc=i("8dee"),dc=i.n(cc);const uc={delay:5e3},hc=function(e){const t=Object(ke["a"])({},uc,e,{id:dc.a.generate()});ic.commit(fa,t)};var pc=hc;const mc=e=>{Object(y["isEmpty"])(e.message)||console.error(e.message),Object(y["isUndefined"])(e.error)||console.error(e.error),Object(y["isEmpty"])(e.notify)||pc({title:e.notify,color:"red",iconMain:"error"})};var fc=mc;const vc=new g["default"];Object.defineProperties(vc,{on:{get(){return vc.$on}},off:{get(){return vc.$off}},emit:{get(){return vc.$emit}},once:{get(){return vc.$once}}}),vc.on("error",fc),vc.install=(e=>{Object.defineProperty(e.prototype,"$events",{value:vc})});var _c=vc,gc=i("caa8");let yc=null;function bc(e){const t=+e.state.settings.auto_sign_out||60;yc=(new gc["a"]).whenNotInteractive().within(t).do(()=>{e.dispatch("logout",{code:101}),yc.stop()}).start()}var $c=i("9224");function kc(){return Promise.all([ic.dispatch("latency"),ic.dispatch("getCurrentUser"),ic.dispatch("getCollections"),ic.dispatch("getSettings"),ic.dispatch("getAllExtensions"),ic.dispatch("getBookmarks"),ic.dispatch("getUsers"),ic.dispatch("getRelations"),ic.dispatch("getServerInfo")]).then(()=>ic.dispatch("getPermissions")).then(()=>{Object.keys(Ue).includes(ic.state.currentUser.locale)&&Ve(ic.state.currentUser.locale)}).then(()=>{vl(),bc(ic)}).then(()=>{const e=ic.state.currentUser.admin;e&&navigator.onLine&&S.a.post("https://telemetry.directus.io/count",{type:"app",url:window.location.origin,version:$c["a"]}).catch(()=>{})}).then(()=>{ic.commit(Zn,new Date)}).catch(e=>{ic.commit(ea,e),console.error(e)})}var wc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"collections"},[i("v-header",{attrs:{breadcrumb:[{name:e.$t("collections"),path:"/collections"}]}}),0===e.items.length?i("v-error",{attrs:{title:e.$t("no_collections"),body:e.$t("no_collections_body"),icon:"error_outline"}}):i("v-table",{attrs:{items:e.items,columns:e.fields,"primary-key-field":"collection",link:"__link__"},on:{select:e.select}})],1)},Cc=[],xc={name:"collections",metaInfo(){return{title:this.$t("collections")}},components:{VError:Ri},computed:{items(){return null==this.collections?[]:Object.values(this.collections).filter(e=>0==e.hidden&&1==e.managed&&!1===e.collection.startsWith("directus_")).filter(e=>{return e.status_mapping?this.$lodash.some(this.permissions[e.collection].statuses,e=>"none"!==e.read):"none"!==this.permissions[e.collection].read}).map(e=>Object(ke["a"])({},e,{collection:this.$t(`collections-${e.collection}`),__link__:`/collections/${e.collection}`}))},fields(){return[{field:"collection",name:this.$t("collection")},{field:"note",name:this.$t("note")}]},collections(){return this.$store.state.collections},permissions(){return this.$store.state.permissions}},methods:{select(e){this.selection=e}}},Ic=xc,Oc=(i("ecee"),Object(B["a"])(Ic,wc,Cc,!1,null,"cc403700",null));Oc.options.__file="collections.vue";var Sc=Oc.exports,Ec=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.notFound?i("v-not-found"):i("div",{staticClass:"route-item-listing"},[i("v-header",{attrs:{"info-toggle":"",breadcrumb:e.breadcrumb}},[i("template",{slot:"title"},[i("button",{staticClass:"bookmark",class:e.currentBookmark?"active":null,attrs:{disabled:e.currentBookmark},on:{click:function(t){e.bookmarkModal=!0}}},[i("i",{staticClass:"material-icons"},[e._v("\n          "+e._s(e.currentBookmark?"bookmark":"bookmark_border")+"\n        ")])]),e.currentBookmark?i("div",{staticClass:"bookmark-name no-wrap"},[e._v("\n        ("+e._s(e.currentBookmark.title)+")\n      ")]):e._e()]),i("v-search-filter",{directives:[{name:"show",rawName:"v-show",value:e.selection&&0===e.selection.length&&!e.emptyCollection,expression:"selection && selection.length === 0 && !emptyCollection"}],attrs:{filters:e.filters,"search-query":e.searchQuery,"field-names":e.fieldNames,placeholder:e.resultCopy},on:{filter:function(t){e.updatePreferences("filters",t)},search:function(t){e.updatePreferences("search_query",t)},"clear-filters":e.clearFilters}}),i("template",{slot:"buttons"},[e.editButton&&!e.activity?i("v-header-button",{key:"edit",attrs:{icon:"mode_edit",color:"warning",disabled:!e.editButtonEnabled,label:e.$t("batch"),to:e.batchURL}}):e._e(),e.deleteButton&&!e.activity?i("v-header-button",{key:"delete",attrs:{icon:"close",color:"danger",disabled:!e.deleteButtonEnabled,label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}):e._e(),e.addButton&&!e.activity?i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new"),to:"/collections/"+e.collection+"/+"}}):e._e()],1)],2),e.preferences?i("v-items",{ref:"listing",attrs:{collection:e.collection,filters:e.filters,"search-query":e.searchQuery,"view-query":e.viewQuery,"view-type":e.viewType,"view-options":e.viewOptions,selection:e.activity?null:e.selection,links:""},on:{fetch:function(t){e.meta=t},options:e.setViewOptions,select:function(t){e.selection=t},query:e.setViewQuery}}):e._e(),e.preferences?i("v-info-sidebar",[i("template",{slot:"system"},[i("v-select",{attrs:{id:"layout",options:e.layoutNames,value:e.viewType,name:"layout"},on:{input:function(t){e.updatePreferences("view_type",t)}}})],1),i("v-ext-layout-options",{key:e.collection+"-"+e.viewType,attrs:{type:e.viewType,collection:e.collection,fields:e.$lodash.keyBy(e.fields,"field"),"view-options":e.viewOptions,"view-query":e.viewQuery,selection:e.selection,link:"__link__"},on:{query:e.setViewQuery,options:e.setViewOptions}})],2):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$tc("batch_delete_confirm",e.selection.length,{count:e.selection.length}),color:"danger","confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.bookmarkModal?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{message:e.$t("name_bookmark")},on:{cancel:e.cancelBookmark,confirm:e.saveBookmark},model:{value:e.bookmarkTitle,callback:function(t){e.bookmarkTitle=t},expression:"bookmarkTitle"}})],1):e._e()],1)},jc=[],Tc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"searchFilter",staticClass:"search-filter",class:{open:e.open}},[i("v-header-button",{staticClass:"toggle",attrs:{alert:e.hasFilters,icon:"filter_list","no-background":""},on:{click:function(t){e.open=!e.open}}},[e._v("Filter")]),i("div",{staticClass:"wrapper"},[i("i",{staticClass:"material-icons"},[e._v("search")]),i("input",{ref:"searchInput",staticClass:"search",class:{"has-filters":e.hasFilters},attrs:{placeholder:e.placeholder||e.$t("search"),type:"text"},domProps:{value:e.searchQuery},on:{input:function(t){e.search(t.target.value)}}}),i("transition",{attrs:{name:"fade"}},[i("button",{directives:[{name:"show",rawName:"v-show",value:e.hasFilters,expression:"hasFilters"}],staticClass:"clear-filters",class:{"has-filters":e.hasFilters},on:{click:e.clearFilters}},[i("i",{staticClass:"material-icons"},[e._v("close")])])]),i("button",{staticClass:"toggle",class:{"has-filters":e.hasFilters},on:{click:function(t){e.open=!e.open}}},[i("i",{staticClass:"material-icons"},[e._v("filter_list")])])],1),i("transition",{attrs:{name:"slide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"dropdown"},[i("div",{staticClass:"search field"},[i("v-input",{attrs:{placeholder:e.placeholder||e.$t("search"),value:e.searchQuery,type:"search","icon-left":"search"},on:{input:e.search}})],1),e._l(e.filters,function(t,s){return i("div",{key:s,staticClass:"field"},[i("invisible-label",{attrs:{"html-for":"filter-"+s}},[e._v("\n          "+e._s(e.fields[t.field])+" "+e._s(e.operators[t.operator])+"\n        ")]),i("div",{staticClass:"name"},[i("p",[e._v(e._s(e.fields[t.field]))]),i("span",[e._v("\n            "+e._s(e.$t(e.operators[t.operator]))+"\n            "),i("i",{staticClass:"material-icons"},[e._v("arrow_drop_down")]),i("select",{on:{change:function(t){e.updateFilter(s,"operator",t.target.value)}}},e._l(e.operators,function(t,s){return i("option",{key:s,domProps:{value:s}},[e._v(e._s(e.$t(t)))])}))]),i("button",{staticClass:"remove",on:{click:function(t){e.deleteFilter(s)}}},[e._v("\n            "+e._s(e.$t("remove"))+"\n          ")])]),i("v-input",{attrs:{autofocus:"",id:"filter-"+s,value:t.value,type:"text"},on:{input:function(t){e.updateFilter(s,"value",t)}}})],1)}),i("div",{staticClass:"field"},[i("invisible-label",{attrs:{"html-for":"add"}},[e._v(e._s(e.$t("add_field_filter")))]),i("v-select",{attrs:{id:"add",icon:"add_circle",placeholder:e.$t("add_field_filter"),options:e.fields,"default-value":""},on:{input:e.addFilter}})],1)],2)]),e.open?i("v-blocker",{staticClass:"blocker",attrs:{"z-index":18},on:{click:function(t){e.open=!e.open}}}):e._e()],1)},Fc=[],Nc=(i("386d"),{name:"search-filter",components:{VBlocker:Aa},props:{fieldNames:{type:Array,default:()=>[]},filters:{type:Array,default:()=>[]},searchQuery:{type:String,default:""},placeholder:{type:String,default:null}},data(){return{open:!1}},computed:{operators(){return{eq:"equal_to",neq:"not_equal_to",lt:"less_than",lte:"less_than_equal",gt:"greater_than",gte:"greater_than_equal",in:"in_list",nin:"not_in_list",null:"is_null",nnull:"is_not_null",contains:"contains",ncontains:"not_contains",empty:"is_empty",nempty:"not_empty",has:"related_entries",nhas:"no_related_entries"}},hasFilters(){return!!(this.filters&&this.filters.length>0||this.searchQuery)},fields(){const e={};return this.fieldNames.forEach(t=>{e[t]=this.$helpers.formatTitle(t)}),e}},created(){this.search=this.$lodash.debounce(this.search,300),this.updateFilter=this.$lodash.debounce(this.updateFilter,300)},mounted(){window.addEventListener("click",this.closeFilter)},beforeDestroy(){window.removeEventListener("click",this.closeFilter)},methods:{search(e){this.$emit("search",e)},addFilter(e){this.$emit("filter",[...this.filters,{field:e,operator:"contains",value:""}])},updateFilter(e,t,i){const s=this.$lodash.cloneDeep(this.filters);s[e][t]=i,this.$emit("filter",s)},deleteFilter(e){const t=this.$lodash.cloneDeep(this.filters);t.splice(e,1),this.$emit("filter",t)},clearFilters(){this.$emit("clear-filters"),this.open&&(this.open=!1)},closeFilter(e){const t=this.$refs.searchFilter.contains(e.target);this.open&&!1===t&&(this.open=!1)}}}),Ac=Nc,Mc=(i("df04"),Object(B["a"])(Ac,Tc,Fc,!1,null,"25fc6c41",null));Mc.options.__file="search-filter.vue";var qc=Mc.exports,Dc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"not-found"},[i("v-header",{attrs:{title:e.$t("page_not_found")}}),i("v-error",{attrs:{title:e.$t("page_not_found"),body:e.$t("page_not_found_body"),icon:"not_interested"}})],1)},Pc=[],Lc={name:"not-found",metaInfo(){return{title:this.$t("page_not_found")}},components:{VError:Ri}},Rc=Lc,Bc=(i("0ae0"),Object(B["a"])(Rc,Dc,Pc,!1,null,"615a2524",null));Bc.options.__file="not-found.vue";var Vc=Bc.exports,Uc={name:"items",metaInfo(){return{title:this.$helpers.formatTitle(this.collection)}},components:{VSearchFilter:qc,VNotFound:Vc},data(){return{selection:[],meta:null,preferences:null,confirmRemove:!1,bookmarkModal:!1,bookmarkTitle:"",notFound:!1}},computed:{activity(){return"directus_activity"===this.collection},breadcrumb(){if("directus_users"===this.collection)return[{name:this.$t("user_directory"),path:"/users"}];if("directus_files"===this.collection)return[{name:this.$t("file_library"),path:"/files"}];const e=[];return this.collection.startsWith("directus_")?e.push({name:this.$helpers.formatTitle(this.collection.substr(9)),path:`/${this.collection.substring(9)}`}):e.push({name:this.$t("collections"),path:"/collections"},{name:this.$t(`collections-${this.collection}`),path:`/collections/${this.collection}`}),e},fields(){const e=this.$store.state.collections[this.collection].fields;return Object.values(e).map(e=>Object(ke["a"])({},e,{name:this.$helpers.formatTitle(e.field)}))},batchURL(){return`/collections/${this.collection}/${this.selection.map(e=>e[this.primaryKeyField]).join(",")}`},currentBookmark(){if(!this.preferences)return;const e=this.$store.state.bookmarks,t={collection:this.preferences.collection,search_query:this.preferences.search_query,filters:this.preferences.filters,view_options:this.preferences.view_options,view_type:this.preferences.view_type,view_query:this.preferences.view_query},i=e.filter(e=>{const i={collection:e.collection,search_query:e.search_query,filters:e.filters,view_options:e.view_options,view_type:e.view_type,view_query:e.view_query};return this.$lodash.isEqual(i,t)})[0];return i||null},collection(){return this.$route.params.collection},emptyCollection(){return this.meta&&0===this.meta.total_count||!1},filters(){return this.preferences&&this.preferences.filters||[]},searchQuery(){return this.preferences&&this.preferences.search_query||""},viewType(){return this.preferences&&this.preferences.view_type||"tabular"},viewQuery(){if(!this.preferences)return{};const e=this.preferences.view_query&&this.preferences.view_query[this.viewType]||{},t=this.fields.map(e=>e.field);if(e.fields&&(e.fields=e.fields.split(",").filter(e=>t.includes(e)).join(",")),e.sort){const i=e.sort.startsWith("-")?e.sort.substring(1):e.sort;!1===t.includes(i)&&(e.sort=this.primaryKeyField)}return e},viewOptions(){return this.preferences&&this.preferences.view_options&&this.preferences.view_options[this.viewType]||{}},resultCopy(){if(!this.meta||!this.preferences)return this.$t("loading");const e=!this.$lodash.isEmpty(this.preferences.filters)||!this.$lodash.isNil(this.preferences.search_query)&&this.preferences.search_query.length>0;return e?this.$tc("item_count_filter",this.meta.result_count,{count:this.$n(this.meta.result_count)}):this.$tc("item_count",this.meta.total_count,{count:this.$n(this.meta.total_count)})},fieldNames(){return this.fields.map(e=>e.field)},layoutNames(){if(!this.$store.state.extensions.layouts)return{};const e={};return Object.keys(this.$store.state.extensions.layouts).forEach(t=>{e[t]=this.$store.state.extensions.layouts[t].name}),e},statusField(){return this.fields?(this.$lodash.find(Object.values(this.fields),e=>"status"===e.type.toLowerCase())||{}).field:null},userCreatedField(){return this.fields?(this.$lodash.find(Object.values(this.fields),e=>"user_created"===e.type.toLowerCase())||{}).field:null},primaryKeyField(){return this.fields?this.$lodash.find(this.fields,{primary_key:!0}).field:null},permission(){return this.$store.state.permissions[this.collection]},addButton(){return!!this.$store.state.currentUser.admin||(this.statusField?Object.values(this.permission.statuses).some(e=>"full"===e.create)||"full"===this.permission.$create.create:"full"===this.permission.create)},deleteButton(){return!!this.selection&&0!==this.selection.length},deleteButtonEnabled(){if(this.$store.state.currentUser.admin)return!0;const e=this.$store.state.currentUser.id;let t=!0;return this.selection.forEach(i=>{const s=this.statusField?i[this.statusField]:null,n=this.statusField?this.permission.statuses[s]:this.permission,a=i[this.userCreatedField];if("none"===n.delete)return t=!1;if("mine"===n.delete&&a!==e)return t=!1;if("role"===n.delete){const e=this.$store.state.users[a],i=this.$store.state.currentUser.roles;let s=!1;if(e.forEach(e=>{i.includes(e)&&(s=!0)}),!1===s)return t=!1}}),t},editButton(){return!!(this.selection&&this.selection.length>1)},editButtonEnabled(){const e=this.$store.state.currentUser.id;let t=!0;return!!this.$store.state.currentUser.admin||(this.selection.forEach(i=>{const s=this.statusField?i[this.statusField]:null,n=this.statusField?this.permission.statuses[s]:this.permission,a=i[this.userCreatedField];if("none"===n.update)return t=!1;if("mine"===n.update&&a!==e)return t=!1;if("role"===n.update){const e=this.$store.state.users[a],i=this.$store.state.currentUser.roles;let s=!1;if(e.forEach(e=>{i.includes(e)&&(s=!0)}),!1===s)return t=!1}}),t)}},methods:{cancelBookmark(){this.bookmarkTitle="",this.bookmarkModal=!1},setViewQuery(e){const t=Object(ke["a"])({},this.preferences.view_query,{[this.viewType]:Object(ke["a"])({},this.viewQuery,e)});this.updatePreferences("view_query",t)},setViewOptions(e){const t=Object(ke["a"])({},this.preferences.view_options,{[this.viewType]:Object(ke["a"])({},this.viewOptions,e)});this.updatePreferences("view_options",t)},updatePreferences(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&(t=Object(ke["a"])({},this.preferences[e],t)),this.$set(this.preferences,e,t);const s=null==this.preferences.user;if(s)return this.createCollectionPreset();const n=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:n}),this.$api.updateCollectionPreset(this.preferences.id,{[e]:t}).then(()=>{this.$store.dispatch("loadingFinished",n)}).catch(e=>{this.$store.dispatch("loadingFinished",n),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},createCollectionPreset(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e});const t=Object(ke["a"])({},this.preferences);return delete t.id,this.$api.createCollectionPreset(Object(ke["a"])({},t,{collection:this.collection,user:this.$store.state.currentUser.id})).then(t=>{let i=t.data;this.$store.dispatch("loadingFinished",e),this.$set(this.preferences,"id",i.id),this.$set(this.preferences,"user",i.user)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},clearFilters(){this.updatePreferences("filters",null),this.updatePreferences("search_query",null)},remove(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteItems(this.collection,this.selection.map(e=>e[this.primaryKeyField])).then(()=>{this.$store.dispatch("loadingFinished",e),this.$refs.listing.getItems(),this.selection=[],this.confirmRemove=!1}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},saveBookmark(){const e=Object(ke["a"])({},this.preferences);e.user=this.$store.state.currentUser.id,e.title=this.bookmarkTitle,delete e.id,delete e.role,e.collection||(e.collection=this.collection);const t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("saveBookmark",e).then(()=>{this.$store.dispatch("loadingFinished",t),this.bookmarkModal=!1,this.bookmarkTitle=""}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},watch:{$route(){this.$route.query.b&&this.$router.replace({path:this.$route.path})}},beforeRouteEnter(e,t,i){const s=e.params.collection,n=ic.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return i(e=>e.notFound=!0);if(n&&n.single)return i(`/collections/${s}/1`);const a=dc.a.generate();return ic.dispatch("loadingStart",{id:a}),rc.getMyListingPreferences(s).then(e=>{ic.dispatch("loadingFinished",a),i(t=>{t.$data.preferences=e})}).catch(e=>{ic.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},beforeRouteUpdate(e,t,i){const s=e.params.collection;this.preferences=null,this.selection=[],this.meta={},this.notFound=!1;const n=this.$store.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return this.notFound=!0,i();if(n&&n.single)return i(`/collections/${s}/1`);const a=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:a}),rc.getMyListingPreferences(s).then(e=>{this.$store.dispatch("loadingFinished",a),this.preferences=e,i()}).catch(e=>{this.$store.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},Kc=Uc,zc=(i("46c0"),Object(B["a"])(Kc,Ec,jc,!1,null,"706f303d",null));zc.options.__file="items.vue";var Wc=zc.exports,Hc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.notFound?i("v-not-found"):i("div",{staticClass:"route-file-library"},[i("v-header",{attrs:{"info-toggle":"",breadcrumb:e.breadcrumb}},[i("template",{slot:"title"},[i("button",{staticClass:"bookmark",class:e.currentBookmark?"active":null,attrs:{disabled:e.currentBookmark},on:{click:function(t){e.bookmarkModal=!0}}},[i("i",{staticClass:"material-icons"},[e._v("\n          "+e._s(e.currentBookmark?"bookmark":"bookmark_border")+"\n        ")])]),e.currentBookmark?i("div",{staticClass:"bookmark-name no-wrap"},[e._v("\n        ("+e._s(e.currentBookmark.title)+")\n      ")]):e._e()]),i("v-search-filter",{directives:[{name:"show",rawName:"v-show",value:0===e.selection.length&&!e.emptyCollection,expression:"selection.length === 0 && !emptyCollection"}],attrs:{filters:e.filters,"search-query":e.searchQuery,"field-names":e.fieldNames,placeholder:e.resultCopy},on:{filter:function(t){e.updatePreferences("filters",t)},search:function(t){e.updatePreferences("search_query",t)},"clear-filters":e.clearFilters}}),i("template",{slot:"buttons"},[e.selection.length>1?i("v-header-button",{key:"edit",attrs:{icon:"mode_edit",color:"warning",label:e.$t("batch"),to:"/collections/"+e.collection+"/"+e.selection.join(",")}}):e._e(),e.selection.length?i("v-header-button",{key:"delete",attrs:{icon:"close",color:"danger",label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}):e._e(),i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new")},on:{click:function(t){e.newModal=!0}}})],1)],2),e.preferences?i("v-items",{key:e.key,ref:"listing",attrs:{collection:e.collection,filters:e.filters,"search-query":e.searchQuery,"view-query":e.viewQuery,"view-type":e.viewType,"view-options":e.viewOptions,selection:e.selection,links:""},on:{fetch:function(t){e.meta=t},options:e.setViewOptions,select:function(t){e.selection=t},query:e.setViewQuery}}):e._e(),e.preferences?i("v-info-sidebar",[i("template",{slot:"system"},[i("label",{staticClass:"style-4",attrs:{for:"listing"}},[e._v(e._s(e.$t("view_type")))]),i("v-select",{attrs:{id:"listing",options:e.layoutNames,value:e.viewType,name:"listing"},on:{input:function(t){e.updatePreferences("view_type",t)}}})],1),i("v-ext-layout-options",{key:e.collection+"-"+e.viewType,attrs:{type:e.viewType,collection:e.collection,fields:e.$lodash.keyBy(e.fields,"field"),"view-options":e.viewOptions,"view-query":e.viewQuery,selection:e.selection,link:"__link__"},on:{query:e.setViewQuery,options:e.setViewOptions}})],2):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$tc("batch_delete_confirm",e.selection.length,{count:e.selection.length}),color:"danger","confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.bookmarkModal?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{message:e.$t("name_bookmark")},on:{cancel:e.cancelBookmark,confirm:e.saveBookmark},model:{value:e.bookmarkTitle,callback:function(t){e.bookmarkTitle=t},expression:"bookmarkTitle"}})],1):e._e(),e.newModal?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("file_upload"),buttons:{done:{text:e.$t("done")}}},on:{done:function(t){e.newModal=!1},close:function(t){e.newModal=!1}}},[i("div",{staticClass:"modal-body"},[i("v-upload",{on:{upload:function(t){e.key=e.$helpers.shortid.generate()}}})],1)])],1):e._e()],1)},Gc=[],Qc=i("3835"),Xc={name:"route-file-library",metaInfo(){return{title:this.$t("file_library")}},components:{VSearchFilter:qc,VNotFound:Vc},data(){return{selection:[],meta:null,preferences:null,confirmRemove:!1,bookmarkModal:!1,bookmarkTitle:"",notFound:!1,newModal:!1,key:"init"}},computed:{breadcrumb(){return[{name:this.$t("file_library"),path:"/files"}]},fields(){const e=this.$store.state.collections[this.collection].fields;return Object.values(e).map(e=>Object(ke["a"])({},e,{name:this.$helpers.formatTitle(e.field)}))},currentBookmark(){if(!this.preferences)return;const e=this.$store.state.bookmarks,t={collection:this.preferences.collection,search_query:this.preferences.search_query,filters:this.preferences.filters,view_options:this.preferences.view_options,view_type:this.preferences.view_type,view_query:this.preferences.view_query},i=e.filter(e=>{const i={collection:e.collection,search_query:e.search_query,filters:e.filters,view_options:e.view_options,view_type:e.view_type,view_query:e.view_query};return this.$lodash.isEqual(i,t)})[0];return i||null},collection(){return"directus_files"},emptyCollection(){return this.meta&&0===this.meta.total_count||!1},filters(){return this.preferences&&this.preferences.filters||[]},searchQuery(){return this.preferences&&this.preferences.search_query||""},viewType(){return this.preferences&&this.preferences.view_type||"tabular"},viewQuery(){return this.preferences&&this.preferences.view_query&&this.preferences.view_query[this.viewType]||{}},viewOptions(){return this.preferences&&this.preferences.view_options&&this.preferences.view_options[this.viewType]||{}},resultCopy(){if(!this.meta||!this.preferences)return this.$t("loading");const e=!this.$lodash.isEmpty(this.preferences.filters)||!this.$lodash.isNil(this.preferences.search_query)&&this.preferences.search_query.length>0;return e?this.$tc("item_count_filter",this.meta.result_count,{count:this.$n(this.meta.result_count)}):this.$tc("item_count",this.meta.total_count,{count:this.$n(this.meta.total_count)})},fieldNames(){return this.fields.map(e=>e.field)},layoutNames(){if(!this.$store.state.extensions.layouts)return{};const e={};return Object.keys(this.$store.state.extensions.layouts).forEach(t=>{e[t]=this.$store.state.extensions.layouts[t].name}),e}},methods:{cancelBookmark(){this.bookmarkTitle="",this.bookmarkModal=!1},setViewQuery(e){const t=Object(ke["a"])({},this.preferences.view_query,{[this.viewType]:Object(ke["a"])({},this.viewQuery,e)});this.updatePreferences("view_query",t)},setViewOptions(e){const t=Object(ke["a"])({},this.preferences.view_options,{[this.viewType]:Object(ke["a"])({},this.viewOptions,e)});this.updatePreferences("view_options",t)},updatePreferences(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&(t=Object(ke["a"])({},this.preferences[e],t)),this.$set(this.preferences,e,t);const s=null==this.preferences.user;if(s)return this.createCollectionPreset();const n=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:n}),this.$api.updateCollectionPreset(this.preferences.id,{[e]:t}).then(()=>{this.$store.dispatch("loadingFinished",n)}).catch(e=>{this.$store.dispatch("loadingFinished",n),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},createCollectionPreset(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e});const t=Object(ke["a"])({},this.preferences);return delete t.id,this.$api.createCollectionPreset(Object(ke["a"])({},t,{collection:this.collection,user:this.$store.state.currentUser.id})).then(t=>{let i=t.data;this.$store.dispatch("loadingFinished",e),this.$set(this.preferences,"id",i.id),this.$set(this.preferences,"user",i.user)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},clearFilters(){this.updatePreferences("filters",null),this.updatePreferences("search_query",null)},remove(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteItems(this.collection,this.selection.map(e=>e.id)).then(()=>{this.$store.dispatch("loadingFinished",e),this.$refs.listing.getItems(),this.selection=[]}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})}),this.confirmRemove=!1},saveBookmark(){const e=Object(ke["a"])({},this.preferences);e.user=this.$store.state.currentUser.id,e.title=this.bookmarkTitle,delete e.id,delete e.role,e.collection||(e.collection=this.collection);const t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("saveBookmark",e).then(()=>{this.$store.dispatch("loadingFinished",t),this.bookmarkModal=!1,this.bookmarkTitle=""}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},watch:{$route(){this.$route.query.b&&this.$router.replace({path:this.$route.path})}},beforeRouteEnter(e,t,i){const s="directus_files",n=ic.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return i(e=>e.notFound=!0);if(n&&n.single)return i(`/collections/${s}/1`);const a=dc.a.generate();return ic.dispatch("loadingStart",{id:a}),Promise.all([rc.getMyListingPreferences(s)]).then(e=>{let t=Object(Qc["a"])(e,1),i=t[0];return{preferences:i}}).then(e=>{let t=e.preferences;ic.dispatch("loadingFinished",a),i(e=>{e.$data.preferences=t})}).catch(e=>{ic.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},beforeRouteUpdate(e,t,i){const s="directus_files";this.preferences=null,this.selection=[],this.meta={},this.notFound=!1;const n=this.$store.state.collections[s]||null;if(!1===s.startsWith("directus_")&&null===n)return this.notFound=!0,i();if(n&&n.single)return i(`/collections/${s}/1`);const a=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:a}),Promise.all([rc.getMyListingPreferences(s)]).then(e=>{let t=Object(Qc["a"])(e,1),i=t[0];return{preferences:i}}).then(e=>{let t=e.preferences;this.$store.dispatch("loadingFinished",a),this.preferences=t,i()}).catch(e=>{this.$store.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},Yc=Xc,Jc=(i("dc4d"),Object(B["a"])(Yc,Hc,Gc,!1,null,"86103fc0",null));Jc.options.__file="file-library.vue";var Zc=Jc.exports,ed=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.notFound?i("v-not-found"):e.error?i("div",[i("v-header"),e.error?i("v-error",{attrs:{icon:"error_outline",color:"warning",title:e.$t("server_trouble"),body:e.$t("server_trouble_copy")}}):e._e()],1):null===e.fields?i("div",[i("v-header"),i("v-loader",{attrs:{area:"content"}})],1):i("div",{key:e.collection+"-"+e.primaryKey,staticClass:"edit"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb,"info-toggle":!e.newItem&&!e.batch&&!e.activityDetail}},[i("template",{slot:"buttons"},[e.newItem||e.singleItem||"none"===e.permission.delete?e._e():i("v-header-button",{attrs:{icon:"close",color:"danger",label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}),e.batch&&"none"!==e.permission.update?i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),icon:"check",color:"action"},on:{click:function(t){e.confirmBatchSave=!0}}}):(e.isNew?"none"!==e.permission.create:"none"!==e.permission.update)?i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),options:{stay:e.$t("save_and_stay"),add:e.$t("save_and_add"),copy:e.$t("save_as_copy")},icon:"check",color:"action"},on:{click:function(t){e.singleItem?e.save("stay"):e.save("leave")},input:e.save}}):e._e()],1)],2),e.newItem||e.batch?e._e():i("v-info-sidebar",{attrs:{wide:""}},[i("div",{staticClass:"tabs"},[i("button",{class:{active:"both"===e.activeTab},on:{click:function(t){e.activeTab="both"}}},[e._v("\n        "+e._s(e.$t("both"))+"\n      ")]),"none"!==e.permission.comment?i("button",{class:{active:"comments"===e.activeTab},on:{click:function(t){e.activeTab="comments"}}},[e._v("\n        "+e._s(e.$t("comments"))+"\n      ")]):e._e(),i("button",{class:{active:"activity"===e.activeTab},on:{click:function(t){e.activeTab="activity"}}},[e._v("\n        "+e._s(e.$t("activity"))+"\n      ")])]),i("v-activity",{attrs:{activity:e.activity,revisions:e.revisions,loading:e.activityLoading,show:e.activeTab,"comment-permission":e.permission.comment},on:{input:e.postComment,revert:function(t){e.revertActivity=t}}})],1),i("v-form",{ref:"form",attrs:{readonly:e.readonly,fields:e.fields,values:e.values,collection:e.collection,"batch-mode":e.batch,permissions:e.permission,"new-item":e.newItem},on:{"unstage-value":e.unstageValue,"stage-value":e.stageValue}}),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.batch?e.$tc("batch_delete_confirm",e.primaryKey.split(",").length,{count:e.primaryKey.split(",").length}):e.$t("delete_are_you_sure"),busy:e.confirmRemoveLoading},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.confirmNavigation?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("unsaved_changes_copy"),"confirm-text":e.$t("keep_editing"),"cancel-text":e.$t("discard_changes")},on:{confirm:function(t){e.confirmNavigation=!1},cancel:function(t){e.$router.push(e.leavingTo),e.confirmNavigation=!1}}})],1):e._e(),e.confirmBatchSave?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("update_confirm",{count:e.primaryKey.split(",").length}),"confirm-text":e.$t("update")},on:{confirm:function(t){e.save("leave")},cancel:function(t){e.confirmBatchSave=!1}}})],1):e._e(),e.revertActivity?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("preview_and_revert"),buttons:{revert:{text:e.$t("revert"),loading:e.reverting}}},on:{revert:function(t){e.revertItem(e.revertActivity.revision.id)},close:function(t){e.revertActivity=!1}}},[i("div",{staticClass:"revert"},[i("p",{staticClass:"notice"},[e._v("\n          "+e._s(e.$t("revert_copy",{date:e.$d(e.revertActivity.date,"long")}))+"\n        ")]),i("v-form",{attrs:{readonly:"",values:e.revertActivity.revision.data,fields:e.fields}})],1)])],1):e._e()],1)},td=[],id=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-activity"},[i("form",{directives:[{name:"show",rawName:"v-show",value:"none"!==e.commentPermission&&"read"!==e.commentPermission&&"activity"!==e.show,expression:"\n      commentPermission !== 'none' &&\n        commentPermission !== 'read' &&\n        show !== 'activity'\n    "}],staticClass:"new-comment",on:{submit:function(t){return t.preventDefault(),e.postComment(t)}}},[i("v-textarea",{staticClass:"textarea",attrs:{rows:5,required:"",placeholder:e.$t("leave_comment")},model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}}),i("button",{attrs:{type:"submit",disabled:0===e.comment.trim().length}},[e._v("\n      "+e._s(e.$t("submit"))+"\n    ")])],1),e._l(e.activityWithChanges,function(t,s){return i("article",{key:t.id,staticClass:"activity-item"},[t.action&&"comment"===t.action.toLowerCase()?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("comment"),expression:"$t('comment')"}],staticClass:"material-icons"},[e._v("message")]):i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$helpers.formatTitle(t.action),expression:"$helpers.formatTitle(activity.action)"}],staticClass:"indicator",class:t.action}),i("div",{staticClass:"content"},["external"!==t.action&&t.changes&&t.name?i("details",[i("summary",{staticClass:"title"},[e._v(e._s(t.name)),t.date?i("span",[e._v("•")]):e._e(),t.date?i("v-timeago",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$d(t.date,"long"),delay:{show:1500,hide:100}},expression:"{\n              content: $d(activity.date, 'long'),\n              delay: { show: 1500, hide: 100 }\n            }"}],staticClass:"date",attrs:{"auto-update":1,since:t.date,locale:e.$i18n.locale}}):e._e(),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Revision Details",expression:"'Revision Details'"}],staticClass:"material-icons chevron"},[e._v("chevron_left")])],1),t.changes?i("div",[i("v-diff",{attrs:{changes:t.changes}}),0!==s?i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("revert"),expression:"$t('revert')"}],staticClass:"revert",on:{click:function(i){e.$emit("revert",t)}}},[i("i",{staticClass:"material-icons"},[e._v("restore")])]):e._e()],1):e._e()]):t.name?i("div",{staticClass:"title"},[e._v("\n        "+e._s(t.name)),t.date?i("span",[e._v("•")]):e._e(),t.date?i("v-timeago",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$d(t.date,"long"),delay:{show:1500,hide:100}},expression:"{\n            content: $d(activity.date, 'long'),\n            delay: { show: 1500, hide: 100 }\n          }"}],staticClass:"date",attrs:{"auto-update":1,since:t.date,locale:e.$i18n.locale}}):e._e()],1):e._e(),t.htmlcomment?i("p",{class:{comment:t.action&&"comment"===t.action.toLowerCase()},domProps:{innerHTML:e._s(t.htmlcomment)}}):e._e()])])})],2)},sd=[],nd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-diff"},e._l(e.changes,function(t){var s=t.field,n=t.before,a=t.after;return i("div",{key:s,staticClass:"change"},[i("p",[e._v(e._s(e.$helpers.formatTitle(s)))]),i("div",{staticClass:"diff"},[i("div",{staticClass:"before",class:{empty:!n}},[e._v("\n        "+e._s(n||"--")+"\n      ")]),i("div",{staticClass:"after",class:{empty:!a}},[e._v(e._s(a||"--"))])])])}))},ad=[],od={name:"v-diff",props:{changes:{type:Object,required:!0}}},ld=od,rd=(i("4cca"),Object(B["a"])(ld,nd,ad,!1,null,"29de59ac",null));rd.options.__file="diff.vue";var cd=rd.exports,dd={name:"v-activity",components:{VDiff:cd},data(){return{comment:""}},props:{activity:{type:Array,required:!0},revisions:{type:Object,required:!0},loading:{type:Boolean,default:!1},show:{type:String,default:"both"},commentPermission:{type:String,default:"none"}},computed:{activityFiltered(){switch(this.show){case"comments":return"none"===this.commentPermission?[]:this.activity.filter(e=>null!==e.comment);case"activity":return this.activity.filter(e=>null===e.comment);case"both":default:return this.activity.filter(e=>{return"none"!==this.commentPermission||null==e.comment})}},activityWithChanges(){const e=this.activityFiltered.map((e,t)=>Object(ke["a"])({},e,{changes:this.getChanges(e.id,t),revision:this.revisions[e.id]}));if(0===e.length)return[];const t=e&&e[e.length-1];if(t||"comments"===this.show){const i="create"===t.action.toLowerCase(),s="upload"===t.action.toLowerCase();i||s||e.push({action:"external",comment:this.$t("activity_outside_directus"),id:-1})}else e.push({action:"external",comment:this.$t("activity_outside_directus"),id:-1});return e.map(e=>Object(ke["a"])({},e,{htmlcomment:this.$helpers.snarkdown((e.comment||"").replace(/#/g,"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")||"")}))}},methods:{getChanges(e,t){const i=this.revisions[e];if(!i)return null;let s=null;for(let l=t+1;l<this.activityFiltered.length;l++)if("update"===this.activityFiltered[l].action||"create"===this.activityFiltered[l].action||"upload"===this.activityFiltered[l].action){s=this.activityFiltered[l];break}if(!s)return null;const n=this.revisions[s.id],a=n&&n.data||{},o=i.delta;return this.$lodash.mapValues(o,(e,t)=>({before:a[t],after:e,field:t}))},postComment(){this.$emit("input",this.comment),this.comment=""}}},ud=dd,hd=(i("ec3c"),i("04bd"),Object(B["a"])(ud,id,sd,!1,null,"59f72a40",null));hd.options.__file="activity.vue";var pd=hd.exports;function md(e){const t=ic.state.collections[e].fields;return Object.values(t).map(e=>e.field).map(i=>{const s=t[i];return"o2m"===(s.type&&s.type.toLowerCase())&&null!=ic.getters.o2m(e,i).junction?i.endsWith(".*.*")?i:i+".*.*":"m2o"===(s.type&&s.type.toLowerCase())||"o2m"===(s.type&&s.type.toLowerCase())||"m2m"===(s.type&&s.type.toLowerCase())||"translation"===(s.type&&s.type.toLowerCase())||"file"===(s.type&&s.type.toLowerCase())?i.endsWith(".*")?i:i+".*":i}).join(",")}var fd={name:"edit",metaInfo(){const e=this.collection.startsWith("directus_")?this.$helpers.formatTitle(this.collection.substr(9)):this.$helpers.formatTitle(this.collection);return this.isNew?{title:this.$t("creating_item_page_title",{collection:e})}:this.batch?{title:this.$t("batch_edit",{collection:e})}:{title:this.$t("editing",{collection:e})}},components:{VLoader:Q,VNotFound:Vc,VError:Ri,VActivity:pd},props:{collection:{type:String,required:!0},primaryKey:{type:null,required:!0}},data(){return{saving:!1,notFound:!1,error:!1,confirmRemove:!1,confirmRemoveLoading:!1,confirmBatchSave:!1,confirmNavigation:!1,leavingTo:"",activeTab:"both",activityLoading:!1,activity:[],revisions:{},revertActivity:null,reverting:!1}},computed:{breadcrumb(){if("directus_users"===this.collection){let e=this.$t("editing_item");return this.primaryKey==this.$store.state.currentUser.id?e=this.$t("editing_my_profile"):this.newItem&&(e=this.$t("creating_item")),[{name:this.$t("user_directory"),path:"/users"},{name:e,path:this.$route.path}]}if("directus_files"===this.collection)return[{name:this.$t("file_library"),path:"/files"},{name:this.newItem?this.$t("creating_item"):this.$t("editing_item"),path:this.$route.path}];if(this.singleItem)return[{name:this.$t("collections"),path:"/collections"},{name:this.$t("editing_single",{collection:this.$helpers.formatTitle(this.collection)}),path:this.$route.path}];const e=[];if(this.collection.startsWith("directus_")?e.push({name:this.$helpers.formatTitle(this.collection.substr(9)),path:`/${this.collection.substring(9)}`}):e.push({name:this.$t("collections"),path:"/collections"},{name:this.$t(`collections-${this.collection}`),path:`/collections/${this.collection}`}),this.batch){const t=this.primaryKey.split(",").length;e.push({name:this.$t("editing_items",{count:t}),path:this.$route.path})}else e.push({name:this.newItem?this.$t("creating_item"):this.$t("editing_item"),path:this.$route.path});return e},collectionInfo(){return this.$store.state.collections[this.collection]},defaultValues(){return this.$lodash.mapValues(this.fields,e=>e.default_value)},values(){const e=this.$store.state.edits.values;return Object(ke["a"])({},this.defaultValues,this.savedValues||{},e)},activityDetail(){return"directus_activity"===this.collection},editing(){return this.$store.getters.editing},savedValues(){return this.$store.state.edits.savedValues},newItem(){return"+"===this.primaryKey},singleItem(){return this.collectionInfo&&!0===this.collectionInfo.single},primaryKeyField(){return this.$lodash.find(this.fields,{primary_key:!0}).field},batch(){return this.primaryKey.includes(",")},statusField(){return this.fields?(this.$lodash.find(Object.values(this.fields),e=>e.type&&"status"===e.type.toLowerCase())||{}).field:null},status(){return this.statusField?this.savedValues[this.statusField]:null},permission(){const e=this.$store.state.permissions[this.collection];if(this.batch){if(this.statusField){const t=this.savedValues.map(e=>e[this.statusField]);return this.$lodash.merge({},...t.map(t=>e.statuses[t]))}return e}return this.isNew?this.status?Object(ke["a"])({},e.statuses[this.status],{read_field_blacklist:e.$create.read_field_blacklist,write_field_blacklist:e.$create.write_field_blacklist,status_blacklist:e.$create.status_blacklist}):Object(ke["a"])({},e,{read_field_blacklist:e.$create.read_field_blacklist,write_field_blacklist:e.$create.write_field_blacklist,status_blacklist:e.$create.status_blacklist}):this.status?e.statuses[this.status]:e},readonly(){return"none"===this.permission.update},isNew(){return"+"===this.primaryKey},fields(){const e=this.$store.state.collections[this.collection].fields;return Object(y["mapValues"])(e,e=>Object(ke["a"])({},e,{name:ml()(e.field)}))}},created(){this.isNew?this.stageDefaultValues():(this.fetchActivity(),this.checkOtherUsers())},mounted(){const e=()=>{return this.save("stay"),!1};this.$helpers.mousetrap.bind("mod+s",e),this.formtrap=this.$helpers.mousetrap(this.$refs.form.$el).bind("mod+s",e)},beforeDestroy(){this.$helpers.mousetrap.unbind("mod+s"),this.formtrap.unbind("mod+s")},watch:{$route(){this.fetchActivity()},notFound(e){this.singleItem&&!0===e&&this.$router.push(`/collections/${this.collection}/+`)}},methods:{stageDefaultValues(){this.$lodash.forEach(this.defaultValues,(e,t)=>this.stageValue({field:t,value:e}))},stageValue(e){let t=e.field,i=e.value;this.$store.dispatch("stageValue",{field:t,value:i})},unstageValue(e){this.$store.dispatch("unstageValue",e)},remove(){this.confirmRemoveLoading=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteItem(this.collection,this.primaryKey).then(()=>{this.$store.dispatch("loadingFinished",e),this.$store.dispatch("discardChanges",e),this.$notify({title:this.$t("item_deleted"),color:"green",iconMain:"check"}),this.confirmRemoveLoading=!1,this.confirmRemove=!1,this.$router.push(`/collections/${this.collection}`)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},save(e){if(!1===this.$store.getters.editing)return;if(this.saving=!0,"copy"===e){const e=Object.assign({},this.values);let t="";this.$lodash.forEach(this.fields,(e,i)=>{!0===e.primary_key&&(t=i)}),delete e[t];const i=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:i}),this.$store.dispatch("save",{primaryKey:"+",values:e}).then(e=>{return this.$store.dispatch("loadingFinished",i),this.saving=!1,e.data[this.primaryKeyField]}).then(e=>{return this.$notify({title:this.$t("item_saved"),color:"green",iconMain:"check"}),this.collection.startsWith("directus_")?this.$router.push(`/${this.collection.substring(9)}/${e}`):this.$router.push(`/collections/${this.collection}/${e}`)}).catch(e=>{this.$store.dispatch("loadingFinished",i),this.$events.emit("error",{notify:e.message||this.$t("something_went_wrong_body"),error:e})})}const t=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:t}),this.$store.dispatch("save").then(e=>e.data).then(e=>{return this.$store.dispatch("loadingFinished",t),this.saving=!1,e}).then(t=>{const i=this.savedValues.length;if(this.$notify({title:this.$tc("item_saved",i,{count:i}),color:"green",iconMain:"check"}),"leave"===e)return this.collection.startsWith("directus_")?this.$router.push(`/${this.collection.substring(9)}`):this.$router.push(`/collections/${this.collection}`);if("stay"===e){if(this.fetchActivity(),this.newItem){const e=t[this.primaryKeyField];return this.$router.push(`/collections/${this.collection}/${e}`)}this.$store.dispatch("startEditing",{collection:this.collection,primaryKey:this.primaryKey,savedValues:t})}return"add"===e?this.collection.startsWith("directus_")?this.$router.push(`/${this.collection.substring(9)}/+`):this.$router.push(`/collections/${this.collection}/+`):void 0}).catch(e=>{this.saving=!1,this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:e.message||this.$t("something_went_wrong_body"),error:e})})},fetchActivity(){this.activity=[],this.revisions={},this.activeTab="both",this.activityLoading=!0;const e=dc.a.generate();return ic.dispatch("loadingStart",{id:e}),Promise.all([this.$api.getActivity({"filter[collection][eq]":this.collection,"filter[item][eq]":this.primaryKey,fields:"id,action,action_on,comment,action_by.first_name,action_by.last_name",sort:"-action_on"}),this.activityDetail?Promise.resolve({data:[]}):this.$api.getItemRevisions(this.collection,this.primaryKey)]).then(t=>{let i=Object(Qc["a"])(t,2),s=i[0],n=i[1];return ic.dispatch("loadingFinished",e),{activity:s.data,revisions:n.data}}).then(e=>{let t=e.activity,i=e.revisions;return{activity:t.map(e=>{const t=new Date(e.action_on),i=`${e.action_by.first_name} ${e.action_by.last_name}`;return{id:e.id,date:t,name:i,action:e.action.toLowerCase(),comment:e.comment}}),revisions:this.$lodash.keyBy(i,"activity")}}).then(e=>{let t=e.activity,i=e.revisions;this.activity=t,this.revisions=i,this.activityLoading=!1}).catch(t=>{ic.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},checkOtherUsers(){const e=this.$router.currentRoute.path,t=this.$helpers.date.dateToSql(new Date(new Date-3e5));this.$api.getUsers({"filter[last_access_on][gte]":t,"filter[last_page][eq]":e,"filter[id][neq]":this.$store.state.currentUser.id}).then(e=>e.data).then(e=>{e.length>0&&e.forEach(e=>{const t=e.first_name,i=e.last_name;this.$notify({title:this.$t("user_edit_warning",{first_name:t,last_name:i}),color:"red",iconMain:"error"})})}).catch(e=>{console.error(e)})},postComment(e){const t=dc.a.generate();ic.dispatch("loadingStart",{id:t});const i=this.$store.state.currentUser;this.$api.post("/activity/comment",{collection:this.collection,item:this.primaryKey,comment:e}).then(e=>e.data).then(e=>{ic.dispatch("loadingFinished",t),this.activity=[Object(ke["a"])({},e,{name:`${i.first_name} ${i.last_name}`}),...this.activity]}).catch(e=>{ic.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},revertItem(e){this.reverting=!0,this.$api.revert(this.collection,this.primaryKey,e).then(()=>{return this.reverting=!1,this.revertActivity=null,Promise.all([this.$api.getItem(this.collection,this.primaryKey,{fields:md(this.collection)}),this.fetchActivity()])}).then(e=>{let t=Object(Qc["a"])(e,1),i=t[0].data;this.$store.dispatch("startEditing",{collection:this.collection,primaryKey:this.primaryKey,savedValues:i})}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},beforeRouteEnter(e,t,i){const s=e.params,n=s.collection,a=s.primaryKey,o=Object.keys(ic.state.collections).includes(n)||n.startsWith("directus_"),l="+"===a;if(!1===o)return i(e=>e.$data.notFound=!0);if(l)return ic.dispatch("startEditing",{collection:n,primaryKey:a,savedValues:{}}),void i();const r=dc.a.generate();return ic.dispatch("loadingStart",{id:r}),rc.getItem(n,a,{fields:md(n)}).then(e=>e.data).then(e=>{ic.dispatch("loadingFinished",r),ic.dispatch("startEditing",{collection:n,primaryKey:a,savedValues:e}),i()}).catch(e=>{return ic.dispatch("loadingFinished",r),e&&203===e.code?i(e=>e.$data.notFound=!0):(_c.emit("error",{notify:Le.t("something_went_wrong_body"),error:e}),i(e=>e.$data.error=!0))})},beforeRouteUpdate(e,t,i){const s=e.params,n=s.collection,a=s.primaryKey,o=Object.keys(this.$store.state.collections).includes(n)||n.startsWith("directus_"),l="+"===a;if(this.saving=!1,this.notFound=!1,this.error=!1,this.confirmRemove=!1,this.confirmRemoveLoading=!1,this.confirmBatchSave=!1,this.confirmNavigation=!1,this.leavingTo="",this.activeTab="both",this.activityLoading=!1,this.activity=[],this.revisions={},this.revertActivity=null,this.reverting=!1,!1===o)return this.notFound=!0,i();if(l)return this.$store.dispatch("startEditing",{collection:n,primaryKey:a,savedValues:{}}),void i();const r=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:r}),this.$api.getItem(n,a,{fields:md(n)}).then(e=>e.data).then(e=>{this.$store.dispatch("loadingFinished",r),this.$store.dispatch("startEditing",{collection:n,primaryKey:a,savedValues:e}),i()}).catch(e=>{if(this.$store.dispatch("loadingFinished",r),e&&203===e.code)return this.notFound=!0,i();this.$events.emit("error",{notify:Le.t("something_went_wrong_body"),error:e}),this.error=e,i()})},beforeRouteLeave(e,t,i){return!1===this.$store.getters.editing?i():!0===this.confirmNavigation?(this.$store.dispatch("discardChanges"),i()):(this.confirmNavigation=!0,this.leavingTo=e.fullPath,i(!1))}},vd=fd,_d=(i("0e6c"),Object(B["a"])(vd,ed,td,!1,null,"5e1c11e7",null));_d.options.__file="item.vue";var gd=_d.exports,yd=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"login",class:{loading:e.loading}},[e.installing?s("v-install",{attrs:{saving:e.saving},on:{install:e.install}}):s("form",{on:{submit:function(t){return t.preventDefault(),e.processForm(t)}}},[s("img",{staticClass:"logo",attrs:{alt:"",src:i("2224")}}),e.loading?s("h1",[e._v("\n        "+e._s(e.loggedIn?e.$t("fetching_data"):e.$t("signing_in"))+"\n      ")]):e.notInstalled?s("h1",[e._v(e._s(e.$t("welcome")))]):s("h1",[e._v(e._s(e.resetMode?e.$t("reset_password"):e.$t("sign_in")))]),s("label",{staticClass:"project-switcher"},[Object.keys(e.urls).length>1||e.allowOther?s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedUrl,expression:"selectedUrl"}],attrs:{disabled:e.loading},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedUrl=t.target.multiple?i:i[0]}}},[e._l(e.urls,function(t,i){return s("option",{key:i,attrs:{checked:i===e.url||i===e.url+"/"},domProps:{value:i}},[e._v("\n            "+e._s(t)+"\n          ")])}),e.allowOther?s("option",{attrs:{value:"other"}},[e._v(e._s(e.$t("other")))]):e._e()],2):e._e(),e._v("\n        "+e._s(e.$t("to"))+"\n        "),s("span",[e._v(e._s(e.urls[e.selectedUrl]||e.$t("choose_project"))+"\n          "),Object.keys(e.urls).length>1||e.allowOther?s("i",{staticClass:"material-icons"},[e._v("arrow_drop_down")]):e._e()])]),e.selectOther?s("div",{staticClass:"material-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],class:{"has-value":e.url&&e.url.length>0},attrs:{disabled:e.loading,type:"url",id:"url",name:"url"},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}}),s("label",{attrs:{for:"url"}},[e._v(e._s(e.$t("api_url")))])]):e._e(),e.notInstalled?[s("p",{staticClass:"install-copy"},[e._v(e._s(e.$t("install_copy")))]),s("button",{staticClass:"style-btn",attrs:{type:"button"},on:{click:function(t){e.installing=!0}}},[e._v("\n          "+e._s(e.$t("install"))+"\n        ")])]:[s("div",{staticClass:"material-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],class:{"has-value":e.email&&e.email.length>0},attrs:{autocomplete:"email",disabled:e.loading||!1===e.exists,type:"text",id:"email",name:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),s("label",{attrs:{for:"email"}},[e._v(e._s(e.$t("email")))])]),e.resetMode?e._e():s("div",{staticClass:"material-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:{"has-value":e.password&&e.password.length>0},attrs:{autocomplete:"current-password",disabled:e.loading||!1===e.exists,type:"password",id:"password",name:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("label",{attrs:{for:"password"}},[e._v(e._s(e.$t("password")))])]),s("div",{staticClass:"buttons"},[s("button",{staticClass:"forgot",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.resetMode=!e.resetMode}}},[e._v("\n            "+e._s(e.resetMode?e.$t("sign_in"):e.$t("forgot_password"))+"\n          ")]),s("button",{staticClass:"style-btn",attrs:{type:"submit",disabled:e.disabled||e.loading}},[e._v("\n            "+e._s(e.resetMode?e.$t("reset_password"):e.$t("sign_in"))+"\n          ")])]),s("transition-group",{staticClass:"stack",attrs:{name:"list",tag:"div"}},[e.checkingExistence||e.gettingThirdPartyAuthProviders?s("v-spinner",{key:"spinner",staticClass:"spinner",attrs:{size:18,"line-size":2,"line-fg-color":"var(--gray)","line-bg-color":"var(--lighter-gray)"}}):e.error||e.SSOerror?s("span",{key:"error",staticClass:"notice",class:e.errorType,on:{click:function(t){e.error=null}}},[s("i",{staticClass:"material-icons"},[e._v(e._s(e.errorType))]),e._v(" "+e._s(e.errorMessage)+"\n          ")]):e.thirdPartyAuthProviders&&!e.thirdPartyAuthProviders.length?s("i",{key:"lock",staticClass:"material-icons lock"},[e._v(e._s(e.loggedIn?"lock_open":"lock_outline"))]):s("ul",{key:"third-party-auth",staticClass:"third-party-auth"},e._l(e.thirdPartyAuthProviders,function(t){return s("li",{key:t.name},[s("a",{directives:[{name:"tooltip",rawName:"v-tooltip.bottom",value:e.$helpers.formatTitle(t.name),expression:"$helpers.formatTitle(provider.name)",modifiers:{bottom:!0}}],attrs:{href:e.url+"auth/sso/"+t.name}},[s("img",{attrs:{alt:t.name,src:t.icon}})])])}))],1)]],2),s("small",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{classes:["inverted"],content:e.version},expression:"{ classes: ['inverted'], content: version }"}],staticClass:"style-4"},[e._v(e._s(e.$t("powered_by_directus")))])],1)])},bd=[],$d=(i("3b2b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal",{attrs:{tabs:e.tabs,buttons:e.buttons,"active-tab":e.activeTab,"action-required":""},on:{tab:function(t){e.activeTab=t},next:e.nextTab}},[i("template",{slot:"project"},[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("project_info")))]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("project_info_copy")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.nextTab(t)}}},[i("label",[e._v("\n        "+e._s(e.$t("project_name"))+"\n        "),i("v-input",{ref:"projectName",staticClass:"input",attrs:{id:"project-name",autofocus:""},model:{value:e.values.project_name,callback:function(t){e.$set(e.values,"project_name",t)},expression:"values.project_name"}})],1),i("label",[e._v("\n        "+e._s(e.$t("project_key"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"environment",disabled:"",value:"Default ( _ )"}})],1),i("label",[e._v("\n        "+e._s(e.$t("admin_email"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"admin-email",type:"email"},model:{value:e.values.user_email,callback:function(t){e.$set(e.values,"user_email",t)},expression:"values.user_email"}})],1),i("label",[e._v("\n        "+e._s(e.$t("admin_password"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"admin-password",type:"password",autocomplete:"new-password"},model:{value:e.values.user_password,callback:function(t){e.$set(e.values,"user_password",t)},expression:"values.user_password"}})],1),i("input",{staticClass:"hidden",attrs:{type:"submit"}})])]),i("template",{slot:"database"},[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("database_connection")))]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("database_connection_copy")))]),i("form",{on:{submit:function(t){return t.preventDefault(),e.nextTab(t)}}},[i("label",[e._v("\n        "+e._s(e.$t("host"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_host"},model:{value:e.values.db_host,callback:function(t){e.$set(e.values,"db_host",t)},expression:"values.db_host"}})],1),i("label",[e._v("\n        "+e._s(e.$t("port"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_port"},model:{value:e.values.db_port,callback:function(t){e.$set(e.values,"db_port",t)},expression:"values.db_port"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_user"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_user"},model:{value:e.values.db_user,callback:function(t){e.$set(e.values,"db_user",t)},expression:"values.db_user"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_password"))+"\n        "),i("v-input",{staticClass:"input",attrs:{type:"password",id:"db_password"},model:{value:e.values.db_password,callback:function(t){e.$set(e.values,"db_password",t)},expression:"values.db_password"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_name"))+"\n        "),i("v-input",{staticClass:"input",attrs:{id:"db_name"},model:{value:e.values.db_name,callback:function(t){e.$set(e.values,"db_name",t)},expression:"values.db_name"}})],1),i("label",[e._v("\n        "+e._s(e.$t("db_type"))+"\n        "),i("v-input",{staticClass:"input",attrs:{disabled:"",id:"db_type",value:"MySQL & Variants"}})],1),i("input",{staticClass:"hidden",attrs:{type:"submit"}})])])],2)}),kd=[],wd={name:"v-install",props:{saving:{type:Boolean,default:!1}},data(){return{activeTab:"project",values:{db_host:"localhost",db_port:3306,db_name:"directus",db_user:"root",db_password:null,user_email:null,user_password:null,project_name:"Directus",cors_enabled:!0}}},computed:{databaseDisabled(){const e=this.$lodash.isEmpty,t=this.values,i=t.project_name,s=t.user_email,n=t.user_password;return e(i)||e(s)||e(n)},schemaDisabled(){const e=this.$lodash.isEmpty,t=this.values,i=t.db_host,s=t.db_port,n=t.db_name,a=t.db_user,o=t.db_password;return e(i)||e(s)||e(n)||e(a)||e(o)},buttons(){let e=!1;return"project"===this.activeTab&&this.databaseDisabled&&(e=!0),{next:{disabled:e,text:"database"===this.activeTab?this.$t("save"):this.$t("next"),loading:this.saving}}},tabs(){return{project:{text:this.$t("project")},database:{text:this.$t("database"),disabled:this.databaseDisabled}}}},methods:{nextTab(){switch(this.activeTab){case"project":this.activeTab="database";break;case"database":default:this.save();break}},save(){this.$emit("install",this.values)}}},Cd=wd,xd=(i("0191"),Object(B["a"])(Cd,$d,kd,!1,null,"1a38373c",null));xd.options.__file="install.vue";var Id=xd.exports,Od={name:"login",components:{VInstall:Id},data(){return{selectedUrl:this.$store.state.auth.url+"/"+this.$store.state.auth.env+"/",url:null,email:null,password:null,loading:!1,loggedIn:!1,error:null,SSOerror:null,exists:null,checkingExistence:!1,thirdPartyAuthProviders:null,gettingThirdPartyAuthProviders:!1,resetMode:!1,installing:!1,notInstalled:!1,saving:!1}},computed:{urls(){if(window.__DirectusConfig__)return this.$lodash.mapKeys(window.__DirectusConfig__.api,(e,t)=>!1===t.endsWith("/")?t+"/":t)},allowOther(){if(window.__DirectusConfig__)return window.__DirectusConfig__.allowOtherAPI},version(){return`${this.$t("version")} v${$c["a"]}`},storeError(){return this.$store.state.auth.error},storeUrl(){return this.$store.state.auth.url?this.$store.state.auth.url+"/"+this.$store.state.auth.env:null},errorType(){if(!this.error&&!this.SSOerror)return;const e=this.error&&this.error.code||this.SSOerror;return+e>=100&&+e<200?101===+e||102===+e?null:"warning":"error"},errorMessage(){if(!this.error&&!this.SSOerror)return;const e=this.error&&this.error.code||this.SSOerror;return this.localeMessages.errors&&null!=this.localeMessages.errors[e]?this.$t(`errors[${e}]`):this.$t("error_unknown")},localeMessages(){return this.$i18n.getLocaleMessage(this.$i18n.locale)},disabled(){return this.resetMode?null===this.email||0===this.email.length:null===this.email||null===this.password||(0===this.email.length||0===this.password.length)},selectOther(){return"other"===this.selectedUrl}},created(){this.checkUrl=this.$lodash.debounce(this.checkUrl,300),this.url&&this.checkUrl();let e=this.storeUrl||Object.keys(window.__DirectusConfig__.api)[0];!1===Object.keys(window.__DirectusConfig__.api).includes(e)&&(e=null),this.url=e||Object.keys(window.__DirectusConfig__.api)[0]||"",this.selectedUrl=this.url,!1===this.url.endsWith("/")&&(this.url=this.url+"/"),this.trySSOLogin()},watch:{url(){this.exists=null,this.checkUrl()},selectedUrl(e){if("other"!==e)return this.url=e},exists(e){!0===e?this.getThirdPartyAuthProviders():!1===e&&(this.error={code:-1})},$route(){this.trySSOLogin()},storeError(e){this.error=e}},methods:{processForm(){if(this.resetMode)this.loading=!0,this.$axios.post(this.url+"auth/password/request",{email:this.email}).then(()=>{this.loading=!1,this.$notification.confirm(this.$t("password_reset_sent",{email:this.email}))}).catch(e=>{this.error=e,this.loading=!1});else{const e={url:this.selectedUrl,email:this.email,password:this.password};this.loading=!0,this.$store.dispatch("login",e).then(()=>{this.loggedIn=!0,this.enterApp()}).catch(()=>{this.loading=!1})}},enterApp(){if(this.$route.query.redirect)return this.$router.push(this.$route.query.redirect);this.$api.getMe({fields:"last_page"}).then(e=>e.data.last_page).then(e=>{this.$router.push(e||"/")}).catch(e=>{this.loading=!1,this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),this.$router.push("/")})},checkUrl(){if(!this.url)return;this.checkingExistence=!0,this.exists=null,this.thirdPartyAuthProviders=null,this.error=null,this.notInstalled=!1;const e=this.url.split("/");e.pop()||e.pop();const t=e.join("/");this.$axios.get(t+"/server/ping").then(()=>{this.exists=!0,this.checkingExistence=!1,this.error=null}).catch(()=>{this.exists=!1,this.notInstalled=!1,this.checkingExistence=!1})},getThirdPartyAuthProviders(){this.gettingThirdPartyAuthProviders=!0,this.thirdPartyAuthProviders=null;const e=new cl.a,t=this.url.split("/"),i=t.pop()||t.pop(),s=t.join("/");e.env=i,e.url=s,e.getThirdPartyAuthProviders().then(e=>e.data).then(e=>{this.thirdPartyAuthProviders=e,this.gettingThirdPartyAuthProviders=!1}).catch(e=>{14===e.code&&(this.notInstalled=!0,this.exists=!0),this.gettingThirdPartyAuthProviders=!1})},trySSOLogin(){const e=new URLSearchParams(window.location.search);if(e.get("error")){this.SSOerror=+this.$route.query.code;const e=window.location.toString();if(e.indexOf("?")>0){const t=e.substring(0,e.indexOf("?"));window.history.replaceState({},document.title,t)}return null}e.get("request_token")&&e.get("request_token").length>0&&(this.clearRequestToken(),this.loading=!0,this.$store.dispatch("loginSSO",e.get("request_token")).then(()=>this.enterApp()).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),this.loading=!1}))},install(e){const t=this.url.split("/");t.pop()||t.pop();const i=t.join("/");this.saving=!0,this.$axios.post(i+"/projects",e).then(()=>{this.installing=!1,this.exists=!0,this.notInstalled=!1,this.$notify({title:this.$t("api_installed"),color:"green",iconMain:"check"}),this.saving=!1}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),this.saving=!1})},clearRequestToken(){const e=window.location.href,t=e.replace(new RegExp("[?&]request_token=[^&#]*(#.*)?$"),"$1").replace(new RegExp("([?&])request_token=[^&]*&"),"$1");history.replaceState({},"Login | Directus",t)}}},Sd=Od,Ed=(i("10e3"),Object(B["a"])(Sd,yd,bd,!1,null,"071e02a0",null));Ed.options.__file="login.vue";var jd=Ed.exports,Td=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"interfaces"},[i("v-header",{attrs:{breadcrumb:e.links}}),i("v-table",{attrs:{columns:e.columns,items:e.items,link:"__link","primary-key-field":"id"}})],1)},Fd=[],Nd={metaInfo(){return{title:"Interfaces"}},computed:{links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("interfaces"),path:"/settings/interfaces"}]},items(){return Object.keys(this.$store.state.extensions.interfaces).map(e=>Object(ke["a"])({},this.$store.state.extensions.interfaces[e],{__link:`/settings/interfaces/${e}`}))},columns(){return[{field:"name",name:"Name"},{field:"id",name:"id"},{field:"version",name:"Version"}]}}},Ad=Nd,Md=Object(B["a"])(Ad,Td,Fd,!1,null,null,null);Md.options.__file="interfaces.vue";var qd=Md.exports,Dd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"interface-debugger"},[i("v-header",{attrs:{breadcrumb:e.links}}),i("label",[e._v("Dummy Label")]),i("div",{staticClass:"interface",style:{width:e.width+"px"}},[i("v-ext-input",{attrs:{id:e.id,name:e.id,type:e.type,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.options,"new-item":e.newItem,relation:e.relation,fields:e.fields,values:e.values},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),i("form",{on:{submit:function(e){e.preventDefault()}}},[i("fieldset",[i("legend",[e._v("Output")]),i("label",{attrs:{for:"value"}},[e._v("Value")]),i("p",[e._v("The value saved into the database")]),i("v-input",{staticClass:"value",attrs:{id:"value",type:"text"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),i("label",[e._v("Display")]),i("p",[e._v("Appearance on the Items Page (eg: Tabular)")]),i("div",{staticClass:"listing"},[i("v-ext-display",{attrs:{"interface-type":e.id,name:e.id,type:e.type,length:e.length,readonly:e.readonly,required:e.required,loading:e.loading,options:e.options,"new-item":e.newItem,relation:e.relation},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),i("fieldset",[i("legend",[e._v("Options")]),e._l(e.extension.options,function(t,s){return i("div",{key:s,staticClass:"options"},[i("label",{attrs:{for:s}},[e._v(e._s(t.name))]),e.options.comment?i("p",{domProps:{innerHTML:e._s(e.$helpers.snarkdown(t.comment))}}):e._e(),i("v-ext-input",{attrs:{id:t.interface,name:s,type:t.type,length:t.length,readonly:t.readonly,required:t.required,loading:t.loading,options:t.options},model:{value:e.options[s],callback:function(t){e.$set(e.options,s,t)},expression:"options[optionID]"}})],1)})],2),i("fieldset",[i("legend",[e._v("Settings")]),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"type"}},[e._v("Type")]),i("p",[e._v("Allowed datatypes this interface supports")]),i("v-simple-select",{staticClass:"small",attrs:{id:"type"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.extension.types,function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(t))])}))],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"length"}},[e._v("Length")]),i("p",[e._v("Database length for the column")]),i("v-input",{staticClass:"length",attrs:{id:"length",type:"number",min:0},model:{value:e.length,callback:function(t){e.length=t},expression:"length"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"collection"}},[e._v("Collection")]),i("p",[e._v("The parent collection for this field")]),i("v-input",{staticClass:"value",attrs:{id:"collection"},model:{value:e.collection,callback:function(t){e.collection=t},expression:"collection"}})],1),i("div",{staticClass:"settings"},[i("p",[e._v("Toggle the readonly/disabled state")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"readonly",value:"readonly",type:"checkbox"},model:{value:e.readonly,callback:function(t){e.readonly=t},expression:"readonly"}}),i("label",{staticClass:"inline",attrs:{for:"readonly"}},[e._v("Read only")])],1),i("div",{staticClass:"settings"},[i("p",[e._v("Toggle the required state")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"required",value:"required",type:"checkbox"},model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}),i("label",{staticClass:"inline",attrs:{for:"required"}},[e._v("Required")])],1),i("div",{staticClass:"settings"},[i("p",[e._v("Toggle the loading state (Beta)")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"loading",value:"loading",type:"checkbox"},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}}),i("label",{staticClass:"inline",attrs:{for:"loading"}},[e._v("Loading")])],1)]),i("fieldset",[i("legend",[e._v("Relation")]),i("div",{staticClass:"relation"},[i("div",{staticClass:"settings"},[i("label",{attrs:{for:"collection_many"}},[e._v("Collection Many")]),i("v-input",{staticClass:"value",attrs:{id:"collection_many",type:"text"},model:{value:e.relation.collection_many,callback:function(t){e.$set(e.relation,"collection_many",t)},expression:"relation.collection_many"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"field_many"}},[e._v("Field Many")]),i("v-input",{staticClass:"value",attrs:{id:"field_many",type:"text"},model:{value:e.relation.field_many,callback:function(t){e.$set(e.relation,"field_many",t)},expression:"relation.field_many"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"collection_one"}},[e._v("Collection One")]),i("v-input",{staticClass:"value",attrs:{id:"collection_one",type:"text"},model:{value:e.relation.collection_one,callback:function(t){e.$set(e.relation,"collection_one",t)},expression:"relation.collection_one"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"field_one"}},[e._v("Field One")]),i("v-input",{staticClass:"value",attrs:{id:"field_one",type:"text"},model:{value:e.relation.field_one,callback:function(t){e.$set(e.relation,"field_one",t)},expression:"relation.field_one"}})],1),i("div",{staticClass:"settings"},[i("label",{attrs:{for:"junction_field"}},[e._v("Junction Field")]),i("v-input",{staticClass:"value",attrs:{id:"junction_field",type:"text"},model:{value:e.relation.junction_field,callback:function(t){e.$set(e.relation,"junction_field",t)},expression:"relation.junction_field"}})],1)])]),i("fieldset",[i("legend",[e._v("Misc.")]),i("div",{staticClass:"misc"},[i("p",[e._v("Toggle viewing between New and Edit")]),i("v-checkbox",{staticClass:"checkbox",attrs:{id:"new",value:"newItem",type:"checkbox"},model:{value:e.newItem,callback:function(t){e.newItem=t},expression:"newItem"}}),i("label",{staticClass:"inline",attrs:{for:"new"}},[e._v("New item")])],1)])])],1)},Pd=[],Ld={name:"interface-debugger",metaInfo(){return{title:"Interface Debugger"}},props:{id:{type:String,required:!0}},data(){return{type:null,length:null,value:null,readonly:!1,required:!1,loading:!1,options:{},width:2e3,newItem:!1,collection:"members",relation:{field_many:"favorites",field_one:"members",collection_many:"members",collection_one:"movies",junction_field:""},customFields:{name:{collection:"movies",default_value:null,field:"name",group:null,hidden_detail:!1,hidden_browse:!1,id:154,interface:"text-input",length:"100",locked:!1,managed:!0,name:"Name",note:null,options:null,primary_key:!1,readonly:!1,relation:null,required:!1,signed:null,sort:"10",translation:null,type:"VARCHAR",validation:null,width:4},director:{collection:"movies",default_value:null,field:"director",group:null,hidden_detail:!1,hidden_browse:!1,id:161,interface:"text-input",length:"100",locked:!1,managed:!0,name:"Director",note:null,options:null,primary_key:!1,readonly:!1,relation:null,required:!1,signed:null,sort:"9",translation:null,type:"VARCHAR",validation:null,width:4}},customValues:{id:123,name:"Directus The Movie",director:"Ben Spielberg",preview:null}}},computed:{links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("interfaces"),path:"/settings/interfaces"},{name:this.extension.name,path:`/settings/interfaces/${this.id}`}]},extension(){return this.$store.state.extensions.interfaces[this.id]},fields(){return Object(ke["a"])({},this.customFields,{[this.id]:{type:this.type,length:this.length,value:this.value,readonly:this.readonly,required:this.required,loading:this.loading,options:this.options,width:this.width,newItem:this.newItem,relation:this.relation,collection:this.collection}})},values(){return Object(ke["a"])({},this.customValues,{[this.id]:this.value})}},watch:{id(){this.hydrate()},type(e){if(e){const e=this.$store.state.serverInfo.databaseVendor,t=ze[this.type][e].default,i=Ke[e][t];i.length&&(this.length=i.defaultLength)}}},created(){this.hydrate()},methods:{hydrate(){this.type=this.extension.types[0];const e=this.$lodash.mapValues(this.extension.options,e=>void 0===e.default?null:e.default);this.options=e}}},Rd=Ld,Bd=(i("9dc1"),Object(B["a"])(Rd,Dd,Pd,!1,null,"1e306724",null));Bd.options.__file="interface-debugger.vue";var Vd=Bd.exports,Ud=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"debug"},[i("v-header",{attrs:{title:"Upload Component"}}),i("div",{staticClass:"wrapper"},[i("v-upload")],1)],1)},Kd=[],zd={metaInfo(){return{title:"Debugger"}}},Wd=zd,Hd=(i("0ffd"),Object(B["a"])(Wd,Ud,Kd,!1,null,"d997f522",null));Hd.options.__file="debug.vue";var Gd=Hd.exports,Qd=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"settings"},[s("v-header",{attrs:{breadcrumb:e.links}}),s("v-details",{attrs:{title:e.$t("settings_project"),type:"break",open:""}},[s("nav",[s("ul",[s("v-card",{attrs:{title:e.$t("settings_global"),subtitle:e.$tc("item_count",e.globalNum,{count:e.globalNum}),element:"li",to:"/settings/global",icon:"public"}}),s("v-card",{attrs:{title:e.$t("settings_collections_fields"),subtitle:e.$tc("collection_count",e.collectionsNum,{count:e.collectionsNum}),element:"li",to:"/settings/collections"}},[s("img",{attrs:{slot:"icon",src:i("bb19"),alt:""},slot:"icon"})]),s("v-card",{attrs:{title:e.$t("settings_permissions"),subtitle:e.roleCount,element:"li",to:"/settings/roles",icon:"group"}}),s("v-card",{attrs:{title:e.$t("settings_update_database"),subtitle:e.$t("settings_update_database_subtext"),element:"li",icon:"update"},on:{click:function(t){e.updateDBActive=!0}}})],1)])]),s("v-details",{attrs:{title:e.$t("additional_info"),type:"break",open:""}},[s("nav",[s("ul",[s("v-card",{attrs:{title:e.$t("interfaces"),subtitle:e.$tc("interface_count",e.interfaceCount,{count:e.interfaceCount}),element:"li",to:"/settings/interfaces",icon:"extension"}}),s("v-card",{attrs:{title:e.$t("about_directus"),subtitle:e.$t("learn_more"),element:"li",href:"https://directus.io",icon:"info_outline"}}),s("v-card",{attrs:{title:e.$t("activity_log"),subtitle:e.activityCount,element:"li",to:"/activity",icon:"warning"}}),s("v-card",{attrs:{title:e.$t("report_issue"),subtitle:e.$t("open_on_gh"),element:"li",href:"https://github.com/directus/app/issues/new?template=Bug_report.md",icon:"bug_report"}}),s("v-card",{attrs:{title:e.$t("request_feature"),subtitle:e.$t("open_on_gh"),element:"li",href:"https://github.com/directus/app/issues/new?template=Feature_request.md",icon:"how_to_vote"}})],1)])]),s("v-details",{attrs:{title:e.$t("coming_soon"),type:"break",open:""}},[s("nav",[s("ul",[s("v-card",{attrs:{title:e.$t("connection"),subtitle:e.$t("latency")+": "+e.$n(Math.round(e.$store.state.latency[e.$store.state.latency.length-1].latency))+"ms",disabled:"",element:"li"}},[s("v-signal",{staticClass:"signal",attrs:{slot:"icon"},slot:"icon"})],1),s("v-card",{attrs:{title:e.$t("server_details"),disabled:"",subtitle:e.projectName,element:"li",icon:"storage"}}),s("v-card",{attrs:{title:e.$t("version_and_updates"),disabled:"",subtitle:e.version,element:"li",icon:"update"}})],1)])]),e.updateDBActive?s("portal",{attrs:{to:"modal"}},[s("v-confirm",{attrs:{message:e.$t("settings_update_database_confirm"),"confirm-text":e.$t("update"),loading:e.updateDBInProgress},on:{confirm:e.updateDB,cancel:function(t){e.updateDBActive=!1}}})],1):e._e()],1)},Xd=[],Yd={name:"settings",metaInfo(){return{title:`${this.$t("settings")}`}},components:{VSignal:go},data(){return{roleCount:"Loading...",activityCount:"Loading...",updateDBActive:!1,updateDBInProgress:!1}},computed:{globalNum(){return Object.keys(this.$store.state.collections.directus_settings.fields).length},collectionsNum(){return Object.keys(this.$store.state.collections).filter(e=>!1===e.startsWith("directus_")).length},projectName(){return this.$store.state.auth.projectName},interfaceCount(){return Object.keys(this.$store.state.extensions.interfaces).length},version(){return $c["a"]},links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"}]}},created(){this.getRoleCount(),this.getActivityCount()},methods:{getRoleCount(){this.$api.getItems("directus_roles",{fields:"-",limit:0,meta:"total_count"}).then(e=>e.meta).then(e=>{let t=e.total_count;this.roleCount=this.$tc("role_count",t,{count:this.$n(t)})}).catch(()=>{this.roleCount="--"})},getActivityCount(){this.$api.getItems("directus_activity",{fields:"-",limit:0,meta:"total_count"}).then(e=>e.meta).then(e=>{let t=e.total_count;this.activityCount=this.$tc("event_count",t,{count:this.$n(t)})}).catch(()=>{this.activityCount="--"})},updateDB(){this.updateDBInProgress=!0,this.$api.updateDatabase().then(()=>{this.updateDBInProgress=!1,this.updateDBActive=!1,this.$notify({title:this.$t("db_updated"),color:"green",iconMain:"check"})}).catch(e=>{this.updateDBInProgress=!1,this.$events.emit("error",{notify:this.$t("db_update_failed"),error:e})})}}},Jd=Yd,Zd=(i("5eb2"),Object(B["a"])(Jd,Qd,Xd,!1,null,"c51608c6",null));Zd.options.__file="settings.vue";var eu=Zd.exports,tu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings-global"},[i("v-header",{attrs:{breadcrumb:e.links}},[i("template",{slot:"buttons"},[i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),icon:"check",color:"action"},on:{click:function(t){e.save("leave")}}})],1)],2),i("v-form",{attrs:{fields:e.fields,values:e.values},on:{"stage-value":e.stageValue}})],1)},iu=[],su={name:"settings-global",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("settings_global")}`}},data(){return{saving:!1,edits:{}}},computed:Object(ke["a"])({},Object(to["c"])({settings:e=>e.settings.values,fields:e=>e.collections.directus_settings.fields}),{values(){return Object(ke["a"])({},this.settings,this.edits)},links(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("settings_global"),path:"/settings/global"}]},editing(){return Object.keys(this.edits).length>0}}),methods:{stageValue(e){let t=e.field,i=e.value;return this.settings[t]==i?this.$delete(this.edits,t):this.$set(this.edits,t,i)},save(){this.saving=!0,this.$store.dispatch("setSettings",this.edits).then(()=>{this.saving=!1,this.edits={},this.$router.push("/settings"),this.$notify({title:this.$t("settings_saved"),color:"green",iconMain:"check"})}).catch(e=>{this.saving=!1,this.$events.emit("error",{notify:e.message||this.$t("something_went_wrong_body"),error:e})})}}},nu=su,au=(i("41cb"),Object(B["a"])(nu,tu,iu,!1,null,"d5b7638e",null));au.options.__file="global.vue";var ou=au.exports,lu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"collections"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new")},on:{click:function(t){e.addNew=!0}}})],1)],2),0===e.items.length?i("v-error",{attrs:{title:e.$t("no_collections"),body:e.$t("no_collections_body"),icon:"error_outline"}}):i("div",{staticClass:"table"},[i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell style-4"},[e._v(e._s(e.$t("collection")))]),i("div",{staticClass:"cell note style-4"},[e._v(e._s(e.$t("note")))])])]),i("div",{staticClass:"body"},e._l(e.items,function(t){return i("router-link",{key:t.collection,staticClass:"row",attrs:{to:t.__link__}},[i("div",{staticClass:"cell"},[e._v(e._s(t.name))]),i("div",{staticClass:"cell note"},[e._v(e._s(t.note))]),t.managed?i("button",{staticClass:"managed",on:{click:function(i){i.preventDefault(),i.stopPropagation(),e.toggleManage(t)}}},[e._v("\n          "+e._s(e.$t("dont_manage"))+"\n        ")]):i("button",{staticClass:"not-managed",on:{click:function(i){i.preventDefault(),i.stopPropagation(),e.toggleManage(t)}}},[e._v("\n          "+e._s(e.$t("manage"))+"\n        ")])])}))]),e.addNew?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{safe:"","confirm-text":e.$t("create"),message:e.$t("create_collection"),placeholder:e.$t("enter_collection_name"),loading:e.adding},on:{cancel:function(t){e.addNew=!1},confirm:e.add},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1):e._e(),e.dontManage?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{message:e.$t("dont_manage_copy",{collection:e.dontManage.name}),color:"danger","confirm-text":e.$t("dont_manage")},on:{cancel:function(t){e.dontManage=null},confirm:e.stopManaging}})],1):e._e()],1)},ru=[],cu={name:"settings-collections",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("settings_collections_fields")}`}},data(){return{addNew:!1,newName:"",adding:!1,dontManage:null}},computed:{items(){const e=this.$store.state.collections||{};return Object.values(e).filter(e=>!1===e.collection.startsWith("directus_")).map(e=>Object(ke["a"])({},e,{name:this.$t(`collections-${e.collection}`),__link__:`/settings/collections/${e.collection}`}))},breadcrumb(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("collections_and_fields"),path:"/settings/collections"}]}},methods:{add(){this.adding=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.createCollection({collection:this.newName,hidden:0,fields:[{type:"integer",datatype:"INT",length:15,field:"id",interface:"primary-key",auto_increment:!0,primary_key:!0,hidden_detail:!0,hidden_browse:!0}]},{fields:"*.*"}).then(e=>e.data).then(t=>{this.$store.dispatch("loadingFinished",e),this.$store.dispatch("addCollection",Object(ke["a"])({},t,{fields:{id:{auto_increment:!0,collection:this.newName,datatype:"INT",default_value:null,field:"id",group:null,hidden_detail:!0,hidden_browse:!0,interface:"primary-key",length:"10",locked:0,note:"",options:null,primary_key:!0,readonly:0,required:!0,signed:!1,sort:1,translation:null,type:"integer",unique:!1,validation:null,width:4}}})),this.$store.dispatch("addPermission",{collection:this.newName,permission:Object(ke["a"])({$create:Vi},Vi)}),this.$router.push(`/settings/collections/${this.newName}`)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},toggleManage(e){if(!e.managed)return this.$api.updateItem("directus_collections",e.collection,{managed:!0}).then(()=>{return this.$store.dispatch("getCollections")}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})});this.dontManage=e},stopManaging(){return this.$api.updateItem("directus_collections",this.dontManage.collection,{managed:!1}).then(()=>{return this.$store.dispatch("getCollections")}).then(()=>{this.dontManage=null}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}}},du=cu,uu=(i("39ed"),Object(B["a"])(du,lu,ru,!1,null,"1dcfc872",null));uu.options.__file="collections.vue";var hu=uu.exports,pu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.collectionInfo?i("div",{staticClass:"settings-fields"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[i("v-header-button",{key:"delete",attrs:{icon:"close",color:"danger",label:e.$t("delete")},on:{click:function(t){e.confirmRemove=!0}}}),i("v-header-button",{key:"save",attrs:{icon:"check",color:"action",loading:e.saving,disabled:0===Object.keys(e.edits).length,label:e.$t("save")},on:{click:e.save}})],1)],2),i("label",{staticClass:"label "},[e._v(e._s(e.$t("fields"))+"\n    "),i("em",{staticClass:"notice"},[e._v(e._s(e.$t("fields_are_saved_instantly")))])]),i("div",{staticClass:"table"},[i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"drag"},[i("i",{staticClass:"material-icons"},[e._v("swap_vert")])]),i("div",[e._v(e._s(e.$t("field")))]),i("div",[e._v(e._s(e.$t("interface")))])])]),i("div",{staticClass:"body",class:{dragging:e.dragging}},[i("draggable",{on:{start:e.startSort,end:e.saveSort},model:{value:e.fields,callback:function(t){e.fields=t},expression:"fields"}},e._l(e.fields,function(t){return i("div",{key:t.field,staticClass:"row"},[i("div",{staticClass:"drag"},[i("i",{staticClass:"material-icons"},[e._v("drag_handle")])]),i("div",{staticClass:"inner row",on:{click:function(i){i.stopPropagation(),e.startEditingField(t)}}},[i("div",[e._v("\n              "+e._s(e.$helpers.formatTitle(t.field))+"\n              "),!0===t.required||"1"===t.required?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]):e._e(),t.primary_key?i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("primary_key"),expression:"$t('primary_key')"}],staticClass:"material-icons key"},[e._v("vpn_key")]):e._e()]),i("div",[e._v("\n              "+e._s(e.$store.state.extensions.interfaces[t.interface]&&e.$store.state.extensions.interfaces[t.interface].name||"--")+"\n            ")])]),i("v-popover",{staticClass:"more-options",attrs:{placement:"left-start"}},[i("button",{staticClass:"menu-toggle",attrs:{type:"button"}},[i("i",{staticClass:"material-icons"},[e._v("more_vert")])]),i("template",{slot:"popover"},[i("ul",{staticClass:"ctx-menu"},[i("li",[i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{type:"button",disabled:!e.canDuplicate(t.interface)},on:{click:function(i){i.stopPropagation(),e.duplicateField(t)}}},[i("i",{staticClass:"material-icons"},[e._v("control_point_duplicate")]),e._v("\n                    "+e._s(e.$t("duplicate"))+"\n                  ")])]),i("li",[i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{type:"button"},on:{click:function(i){i.stopPropagation(),e.warnRemoveField(t.field)}}},[i("i",{staticClass:"material-icons"},[e._v("close")]),e._v(" "+e._s(e.$t("delete"))+"\n                  ")])])])])],2)],1)}))],1)]),i("v-button",{staticClass:"new-field",on:{click:function(t){e.startEditingField({})}}},[e._v("New Field")]),e.fields?i("v-form",{attrs:{fields:e.directusFields,values:e.values,collection:"directus_collections"},on:{"stage-value":e.stageValue}}):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{color:"danger",message:e.$t("delete_collection_are_you_sure"),"confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e(),e.confirmFieldRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{color:"danger",message:e.$t("delete_field_are_you_sure",{field:e.fieldToBeRemoved}),"confirm-text":e.$t("delete")},on:{cancel:function(t){e.confirmFieldRemove=!1},confirm:function(t){e.removeField(e.fieldToBeRemoved)}}})],1):e._e(),e.editingField?i("v-field-setup",{attrs:{"field-info":e.fieldBeingEdited,"collection-info":e.collectionInfo},on:{close:function(t){e.editingField=!1},save:e.setFieldSettings}}):e._e(),e.duplicatingField?i("v-field-duplicate",{attrs:{"field-information":e.fieldBeingDuplicated,"collection-information":e.collectionInfo},on:{close:function(t){e.duplicatingField=!1},save:e.duplicateFieldSettings}}):e._e()],1):i("not-found")},mu=[],fu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal",{attrs:{title:e.existing?e.$t("update_field")+": "+e.displayName:e.$t("create_field"),tabs:e.tabs,"active-tab":e.activeTab,buttons:e.buttons},on:{tab:function(t){e.activeTab=t},next:e.nextTab,close:function(t){e.$emit("close")}}},[i("template",{slot:"interface"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("choose_interface")))])],e.interfaceName?i("p",{staticClass:"currently-selected subtext"},[e._v("\n      "+e._s(e.$t("currently_selected",{thing:e.interfaces[e.interfaceName].name}))+"\n    ")]):i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("select_interface_below")))]),i("div",e._l(e.interfacesGrouped,function(t,s){return i("v-details",{key:t.title,attrs:{title:t.title,open:0===s}},[i("div",{staticClass:"interfaces"},e._l(t.interfaces,function(s){return i("article",{key:t.title+"-"+s.id,staticClass:"interface",class:{active:e.interfaceName===s.id},on:{click:function(t){e.setInterface(s.id)}}},[i("div",{staticClass:"header"},[i("i",{staticClass:"material-icons"},[e._v(e._s(s.icon?s.icon:"category"))])]),i("div",{staticClass:"body"},[i("h2",[e._v(e._s(s.name))]),i("p",[e._v("Directus Team")])])])}))])}))],2),e.interfaceName?i("template",{slot:"schema"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v("\n        "+e._s(e.$t("name_field",{field:e.$helpers.formatTitle(e.interfaceName)}))+"\n      ")]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("intelligent_defaults")))])],i("form",{staticClass:"schema",on:{submit:function(e){e.preventDefault()}}},[i("div",{staticClass:"name"},[i("label",[e._v(e._s(e.$t("name"))),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]),i("v-input",{staticClass:"name-input",attrs:{type:"text",placeholder:e.$t("db_column_name"),disabled:e.existing},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1),i("label",[e._v(e._s(e.$t("display_name"))+"\n          "),i("v-input",{attrs:{type:"text",disabled:"",value:e.displayName,placeholder:e.$t("auto_generated")}})],1)]),i("label",[e._v(e._s(e.$t("note"))+"\n        "),i("v-input",{attrs:{type:"text",placeholder:e.$t("add_note")},model:{value:e.note,callback:function(t){e.note=t},expression:"note"}})],1),i("details",{staticClass:"advanced",attrs:{open:e.existing}},[i("summary",[e._v(e._s(e.$t("advanced_options")))]),i("div",{staticClass:"advanced-form"},[i("label",[e._v("\n            "+e._s(e.$t("field_type"))+"\n            "),i("v-simple-select",{model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.availableFieldTypes,function(t){return i("option",{key:t,domProps:{value:t,selected:e.type===t}},[e._v("\n                "+e._s(e.$helpers.formatTitle(t))+"\n              ")])})),i("small",{staticClass:"description"},[e._v(e._s(e.fieldTypeDescription))])],1),i("label",[e._v("\n            "+e._s(e.$t("db_datatype",{db:e.$helpers.formatTitle(e.databaseVendor)}))+"\n            "),i("v-simple-select",{model:{value:e.datatype,callback:function(t){e.datatype=t},expression:"datatype"}},e._l(e.availableDatatypes,function(t){return i("option",{key:t,domProps:{value:t,selected:e.datatype===t}},[e._v("\n                "+e._s(t)+"\n              ")])})),i("small",{staticClass:"description"},[e._v(e._s(e.selectedDatatypeInfo&&e.selectedDatatypeInfo.description))])],1),i("label",[e._v(e._s(e.$t("default"))+"\n            "),i("v-input",{attrs:{type:"text",placeholder:"NULL"},model:{value:e.default_value,callback:function(t){e.default_value=t},expression:"default_value"}})],1),i("label",[e._v(e._s(e.$t("length"))+"\n            "),i("v-input",{attrs:{type:e.selectedDatatypeInfo&&e.selectedDatatypeInfo.decimal?"string":"number",value:e.lengthDisabled?null:e.length,disabled:e.lengthDisabled,placeholder:e.lengthDisabled?e.$t("length_disabled_placeholder"):""},on:{input:function(t){e.length=t}}})],1),i("label",[e._v(e._s(e.$t("validation"))+"\n            "),i("v-input",{attrs:{type:"text",placeholder:e.$t("regex")},model:{value:e.validation,callback:function(t){e.validation=t},expression:"validation"}})],1),i("div"),"alias"!==e.type?i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.required,callback:function(t){e.required=t},expression:"required"}}),e._v(" "+e._s(e.$t("required"))+"\n          ")],1):e._e(),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.readonly,callback:function(t){e.readonly=t},expression:"readonly"}}),e._v(" "+e._s(e.$t("readonly"))+"\n          ")],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.unique,callback:function(t){e.unique=t},expression:"unique"}}),e._v(" "+e._s(e.$t("unique")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.hidden_detail,callback:function(t){e.hidden_detail=t},expression:"hidden_detail"}}),e._v("\n            "+e._s(e.$t("hidden_detail")))],1),i("label",{staticClass:"toggle"},[i("v-toggle",{model:{value:e.hidden_browse,callback:function(t){e.hidden_browse=t},expression:"hidden_browse"}}),e._v(e._s(e.$t("hidden_browse")))],1),i("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.primaryKeyTooltip,expression:"primaryKeyTooltip"}],staticClass:"toggle",class:{disabled:e.primaryKeyDisabled}},[i("v-toggle",{attrs:{disabled:e.primaryKeyDisabled},model:{value:e.primary_key,callback:function(t){e.primary_key=t},expression:"primary_key"}}),e._v("\n            "+e._s(e.$t("primary_key"))+"\n          ")],1)])])])],2):e._e(),e.selectedInterfaceInfo&&e.relation?i("template",{slot:"relation"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("relation_setup")))]),i("p",{staticClass:"subtext"},[e._v("\n        "+e._s(e.$t("relation_setup_copy",{relation:e.$t(e.relation)}))+"\n      ")])],"m2o"===e.relation?i("form",{staticClass:"single"},[i("p",[e._v(e._s(e.$t("this_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.relationInfo.collection_many,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.collectionInfo.collection}},[e._v(e._s(e.collectionInfo.collection))])]),i("v-simple-select",{staticClass:"select",attrs:{value:e.relationInfo.field_many,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.field}},[e._v(e._s(e.field))])]),i("i",{staticClass:"material-icons"},[e._v("arrow_backward")]),i("p",[e._v(e._s(e.$t("related_collection")))]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfo.collection_one,callback:function(t){e.$set(e.relationInfo,"collection_one",t)},expression:"relationInfo.collection_one"}},e._l(e.collections,function(t){var s=t.collection;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])})),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyField.field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyField.field}},[e._v(e._s(e.primaryKeyField.field))])])],1):e._e(),"o2m"===e.relation?i("form",{staticClass:"single"},[i("p",[e._v(e._s(e.$t("this_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.collectionInfo.collection,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.collectionInfo.collection}},[e._v(e._s(e.collectionInfo.collection))])]),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyField.field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyField.field}},[e._v(e._s(e.primaryKeyField.field))])]),i("i",{staticClass:"material-icons"},[e._v("arrow_forward")]),i("p",[e._v(e._s(e.$t("related_collection")))]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfo.collection_many,callback:function(t){e.$set(e.relationInfo,"collection_many",t)},expression:"relationInfo.collection_many"}},e._l(e.collections,function(t){var s=t.collection;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])})),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfo.field_many,callback:function(t){e.$set(e.relationInfo,"field_many",t)},expression:"relationInfo.field_many"}},e._l(e.fields(e.relationInfo.collection_many),function(t){var s=t.field;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])}))],1):e._e(),"m2m"===e.relation?i("form",{staticClass:"full"},[i("p",[e._v(e._s(e.$t("this_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.collectionInfo.collection,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.collectionInfo.collection}},[e._v(e._s(e.collectionInfo.collection))])]),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyField.field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyField.field}},[e._v(e._s(e.primaryKeyField.field))])]),i("i",{staticClass:"material-icons"},[e._v("arrow_forward")]),i("p",[e._v(e._s(e.$t("junction_collection")))]),i("v-simple-select",{staticClass:"select",attrs:{value:e.relationInfoM2M[0].collection_many},on:{input:function(t){e.relationInfoM2M[0].collection_many=t,e.relationInfoM2M[1].collection_many=t}}},e._l(e.collections,function(t){var s=t.collection;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])})),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfoM2M[e.currentM2MIndex].field_many,callback:function(t){e.$set(e.relationInfoM2M[e.currentM2MIndex],"field_many",t)},expression:"relationInfoM2M[currentM2MIndex].field_many"}},e._l(e.fields(e.relationInfoM2M[0].collection_many),function(t){var s=t.field;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])})),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfoM2M[0===e.currentM2MIndex?1:0].field_many,callback:function(t){e.$set(e.relationInfoM2M[0===e.currentM2MIndex?1:0],"field_many",t)},expression:"relationInfoM2M[currentM2MIndex === 0 ? 1 : 0].field_many"}},e._l(e.fields(e.relationInfoM2M[0].collection_many),function(t){var s=t.field;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])})),i("i",{staticClass:"material-icons"},[e._v("arrow_backward")]),i("p",[e._v(e._s(e.$t("related_collection")))]),i("v-simple-select",{staticClass:"select",model:{value:e.relationInfoM2M[0==e.currentM2MIndex?1:0].collection_one,callback:function(t){e.$set(e.relationInfoM2M[0==e.currentM2MIndex?1:0],"collection_one",t)},expression:"relationInfoM2M[currentM2MIndex == 0 ? 1 : 0].collection_one"}},e._l(e.collections,function(t){var s=t.collection;return i("option",{key:s,domProps:{value:s}},[e._v(e._s(s))])})),i("v-simple-select",{staticClass:"select",attrs:{value:e.primaryKeyFieldByCollection(e.relationInfoM2M[0===e.currentM2MIndex?1:0].collection_one).field,disabled:""}},[i("option",{attrs:{selected:""},domProps:{value:e.primaryKeyFieldByCollection(e.relationInfoM2M[0===e.currentM2MIndex?1:0].collection_one).field}},[e._v(e._s(e.primaryKeyFieldByCollection(e.relationInfoM2M[0===e.currentM2MIndex?1:0].collection_one).field))])])],1):e._e()],2):e._e(),i("template",{slot:"options"},[e.existing?e._e():[i("h1",{staticClass:"style-0"},[e._v(e._s(e.$t("almost_done_options")))]),i("p",{staticClass:"subtext"},[e._v(e._s(e.$t("almost_done_copy")))])],e.selectedInterfaceInfo?i("form",{staticClass:"options",on:{submit:function(e){e.preventDefault()}}},[e._l(e.interfaceOptions.regular,function(t,s){return i("div",{key:s,staticClass:"options"},[i("label",{attrs:{for:s}},[e._v(e._s(t.name))]),i("p",{staticClass:"note",domProps:{innerHTML:e._s(e.$helpers.snarkdown(t.comment||""))}}),i("v-ext-input",{attrs:{id:t.interface,name:s,type:t.type,length:t.length,readonly:t.readonly,required:t.required,loading:t.loading,options:t.options,value:e.options[s],fields:e.selectedInterfaceInfo.options,values:e.options},on:{input:function(t){e.$set(e.options,s,t)}}})],1)}),Object.keys(e.interfaceOptions.advanced).length>0?i("details",{staticClass:"advanced",attrs:{open:e.existing}},[i("summary",[e._v(e._s(e.$t("advanced_options")))]),e._l(e.interfaceOptions.advanced,function(t,s){return i("div",{key:s,staticClass:"options"},[i("label",{attrs:{for:s}},[e._v(e._s(t.name))]),i("p",{staticClass:"note",domProps:{innerHTML:e._s(e.$helpers.snarkdown(t.comment||""))}}),i("v-ext-input",{attrs:{id:t.interface,name:s,type:t.type,length:t.length,readonly:t.readonly,required:t.required,loading:t.loading,options:t.options,value:e.options[s]||t.default,fields:e.selectedInterfaceInfo.options,values:e.options},on:{input:function(t){e.$set(e.options,s,t)}}})],1)})],2):e._e()],2):e._e()],2)],2)},vu=[],_u={name:"v-field-setup",props:{collectionInfo:{type:Object,required:!0},fieldInfo:{type:Object,required:!0}},data(){return{activeTab:"interface",id:null,sort:null,saving:!1,field:null,datatype:null,type:null,interfaceName:null,options:{},translation:{},readonly:!1,required:!1,unique:!1,note:null,hidden_detail:!1,hidden_browse:!1,primary_key:!1,length:null,default_value:null,validation:null,relationInfo:{id:null,collection_many:null,field_many:null,collection_one:null,field_one:null},relationInfoM2M:[{id:null,collection_many:null,field_many:null,collection_one:null,field_one:null,junction_field:null},{id:null,collection_many:null,field_many:null,collection_one:null,field_one:null,junction_field:null}]}},computed:{collections(){return Object.assign({},this.$store.state.collections)},interfaces(){return Object.assign({},this.$store.state.extensions.interfaces)},interfacesGrouped(){const e=[{title:this.$t("popular"),interfaces:["text-input","textarea","wysiwyg","datetime","calendar","toggle","file","many-to-one","one-to-many","primary-key","status","sort"]},{title:this.$t("text"),interfaces:["code","hashed","markdown","password","primary-key","slug","tags","text-input","textarea","wysiwyg","wysiwyg-full"]},{title:this.$t("numeric"),interfaces:["numeric","primary-key","rating","slider","sort"]},{title:this.$t("date_and_time"),interfaces:["calendar","date","time","datetime","datetime-created","datetime-updated"]},{title:this.$t("relational"),interfaces:["one-to-many","many-to-one","many-to-many","file","translation"]}];return e.push({title:this.$t("other"),interfaces:Object.keys(this.interfaces).filter(t=>{let i=!1;return e.forEach(e=>{e.interfaces.includes(t)&&(i=!0)}),!1===i})}),e.map(e=>Object(ke["a"])({},e,{interfaces:e.interfaces.map(e=>this.interfaces[e])}))},databaseVendor(){return this.$store.state.serverInfo.databaseVendor},primaryKeyDisabled(){return!!this.primaryKeyField},primaryKeyTooltip(){return this.primaryKeyField?this.field===this.primaryKeyField.field?this.$t("cant_disable_primary"):this.$t("max_one_primary_key"):null},selectedInterfaceInfo(){return this.interfaceName?Object.assign({},this.interfaces[this.interfaceName]):null},interfaceOptions(){if(!this.selectedInterfaceInfo)return null;const e=Object.assign({},this.selectedInterfaceInfo.options),t=this.$lodash.pickBy(e,e=>!e.advanced),i=this.$lodash.pickBy(e,e=>!0===e.advanced);return{regular:t,advanced:i}},existing(){return null!==this.id},schemaDisabled(){return!(this.interfaceName&&this.interfaceName.length>0)},optionsDisabled(){return!0===this.schemaDisabled||!this.field},displayName(){return this.field?this.$helpers.formatTitle(this.field):""},availableFieldTypes(){return this.interfaceName&&this.interfaces[this.interfaceName]&&this.interfaces[this.interfaceName].types||[]},availableDatatypes(){return this.type?0===this.availableFieldTypes.length?[]:ze[this.type][this.databaseVendor].datatypes:[]},selectedDatatypeInfo(){return Ke[this.databaseVendor][this.datatype]},fieldTypeDescription(){return this.type?ze[this.type]&&ze[this.type].description:null},lengthDisabled(){return(!this.selectedDatatypeInfo||!0!==this.selectedDatatypeInfo.length)&&(!this.selectedDatatypeInfo||!0!==this.selectedDatatypeInfo.decimal)},relation(){return this.selectedInterfaceInfo?null==!this.selectedInterfaceInfo.relation?null:this.selectedInterfaceInfo.relation:null},buttons(){let e=!1;"interface"!==this.activeTab||this.interfaceName||(e=!0),"schema"!==this.activeTab||this.field||(e=!0);let t=this.$t("next");return("options"===this.activeTab||"schema"===this.activeTab&&!1===this.hasOptions||this.existing)&&(t=this.$t("save")),{next:{disabled:e,text:t,loading:this.saving}}},tabs(){const e={interface:{text:this.$t("interface")},schema:{text:this.$t("schema"),disabled:!(this.interfaceName&&this.interfaceName.length>0)}};if(this.relation&&(e.relation={text:this.$t("relation"),disabled:!0===this.schemaDisabled||!this.field}),this.interfaceName&&Object.keys(this.selectedInterfaceInfo.options).length>0){let t=!0===this.schemaDisabled||!this.field;e.options={text:this.$t("options"),disabled:t}}return e},hasOptions(){return!!(this.interfaceName&&Object.keys(this.interfaces[this.interfaceName].options).length>0)},primaryKeyField(){return this.$lodash.find(this.collectionInfo.fields,{primary_key:!0})},currentM2MIndex(){const e=this.$lodash.findIndex(this.relationInfoM2M,e=>{return e.collection_one===this.collectionInfo.collection});return-1===e?0:e}},created(){this.useFieldInfo(),this.initRelation(),this.activeTab=this.existing?"schema":"interface"},watch:{fieldInfo(){this.useFieldInfo()},interfaceName(e,t){if(e){if(e!==this.fieldInfo.interface){const e=Object(ke["a"])({},this.interfaceOptions.advanced,this.interfaceOptions.regular);this.$lodash.forEach(e,(e,t)=>{this.$set(this.options,t,e.default)})}if((!this.existing||null!=t)&&(this.type=this.availableFieldTypes[0],this.datatype=this.type?ze[this.type][this.databaseVendor].default:null,!this.existing)){if(this.selectedInterfaceInfo&&this.selectedInterfaceInfo.recommended){const e=this.selectedInterfaceInfo.recommended,t=e.defaultValue,i=e.length,s=e.validation;t&&(this.default_value=t),i&&(this.length=i),s&&(this.validation=s)}this.initRelation()}}},type(e){this.existing||e&&(this.datatype=ze[e][this.databaseVendor].default)},datatype(){this.existing&&null!==this.length||(this.selectedInterfaceInfo&&this.selectedInterfaceInfo.recommended&&this.selectedInterfaceInfo.recommended.length?this.length=this.selectedInterfaceInfo.recommended.length:(this.selectedDatatypeInfo.length&&(this.length=this.selectedDatatypeInfo.defaultLength,ze[this.type][this.databaseVendor].length&&(this.length=ze[this.type][this.databaseVendor].length)),this.selectedDatatypeInfo&&this.selectedDatatypeInfo.decimal&&(this.length=this.selectedDatatypeInfo.defaultDigits+","+this.selectedDatatypeInfo.defaultDecimals)))},lengthDisabled(e){e&&(this.length=null)},field(e){this.field=e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]+/g,"").replace(/__+/g,"_"),this.relation&&("m2o"===this.relation&&(this.relationInfo.field_many=this.field),"o2m"===this.relation&&(this.relationInfo.field_one=this.field))},relationInfoM2M:{deep:!0,handler(){this.relationInfoM2M[0].junction_field=this.relationInfoM2M[1].field_many,this.relationInfoM2M[1].junction_field=this.relationInfoM2M[0].field_many,this.relationInfoM2M[this.currentM2MIndex].field_one=this.field}},relationInfo:{deep:!0,handler(){"o2m"===this.relation&&this.getM2OID()}}},methods:{nextTab(){if(this.existing)return this.saveField();switch(this.activeTab){case"interface":this.activeTab="schema";break;case"schema":if(this.relation)return this.activeTab="relation";if(!1===this.hasOptions)return this.saveField();this.activeTab="options";break;case"relation":if(!1===this.hasOptions)return this.saveField();this.activeTab="options";break;case"options":default:this.saveField();break}},setInterface(e){this.interfaceName=e,this.nextTab()},saveField(){const e={id:this.id,sort:this.sort,field:this.field,type:this.type,datatype:this.datatype,interface:this.interfaceName,default_value:this.default_value,options:this.options,readonly:this.readonly,required:this.required,unique:this.unique,note:this.note,hidden_detail:this.hidden_detail,hidden_browse:this.hidden_browse,primary_key:this.primary_key,length:this.length,validation:this.validation};this.lengthDisabled&&delete e.length,this.saving=!0;const t={fieldInfo:e,relation:null};this.relation&&("m2o"===this.relation&&(t.relation=Object(ke["a"])({},this.relationInfo),delete t.relation.field_one),"o2m"===this.relation&&(t.relation=Object(ke["a"])({},this.relationInfo)),"m2m"===this.relation&&(t.relation=[...this.relationInfoM2M])),this.$emit("save",t)},useFieldInfo(){if(!this.fieldInfo||0===Object.keys(this.fieldInfo).length)return;const e=this.fieldInfo.field,t=this.collectionInfo.collection,i=this.$lodash.clone(this.$store.state.collections[t].fields[e]);Object.keys(i).forEach(e=>{null!=i[e]&&(this[e]=i[e])}),this.interfaceName=i.interface,this.type=this.type&&this.type.toLowerCase(),this.datatype=this.datatype&&this.datatype.toUpperCase()},initRelation(){if(!this.relation)return;const e=this.collectionInfo.collection,t=this.field;if("m2o"===this.relation){const i=this.$store.getters.m2o(e,t);i?this.$lodash.forEach(i,(e,t)=>{return t&&e&&t.startsWith("collection")?this.$set(this.relationInfo,t,e.collection):t&&e&&t.startsWith("field")?this.$set(this.relationInfo,t,e.field):void(e&&this.$set(this.relationInfo,t,e))}):(this.relationInfo.collection_many=this.collectionInfo.collection,this.relationInfo.field_many=this.field,this.relationInfo.collection_one=Object.values(this.$store.state.collections)[0].collection,this.relationInfo.field_one=this.$lodash.find(Object.values(this.$store.state.collections)[0].fields,{primary_key:!0}).field)}else if("o2m"===this.relation){const i=this.$store.getters.o2m(e,t);i?this.$lodash.forEach(i,(e,t)=>{return t&&e&&t.startsWith("collection")?this.$set(this.relationInfo,t,e.collection):t&&e&&t.startsWith("field")?this.$set(this.relationInfo,t,e.field):void(e&&this.$set(this.relationInfo,t,e))}):(this.relationInfo.collection_one=this.collectionInfo.collection,this.relationInfo.field_one=this.field,this.relationInfo.collection_many=Object.values(this.$store.state.collections)[0].collection,this.relationInfo.field_many=this.$lodash.find(Object.values(this.$store.state.collections)[0].fields,{primary_key:!0}).field,this.getM2OID())}else if("m2m"===this.relation){const i=this.$store.getters.o2m(e,t);t&&i?(this.relationInfoM2M[0].id=i.id,this.relationInfoM2M[0].collection_many=i.collection_many.collection,this.relationInfoM2M[0].field_many=i.field_many.field,this.relationInfoM2M[0].collection_one=i.collection_one.collection,this.relationInfoM2M[0].field_one=i.field_one.field,this.relationInfoM2M[0].junction_field=i.junction.field_many.field,this.relationInfoM2M[1].id=i.junction.id,this.relationInfoM2M[1].collection_many=i.collection_many.collection,this.relationInfoM2M[1].field_many=i.junction.field_many.field,this.relationInfoM2M[1].collection_one=i.junction.collection_one.collection,this.relationInfoM2M[1].field_one=i.junction.field_one&&i.junction.field_one.field,this.relationInfoM2M[1].junction_field=i.field_many.field):(this.relationInfoM2M[0].collection_many=Object.keys(this.collections)[0],this.relationInfoM2M[0].field_many=Object.values(Object.values(this.collections)[0].fields)[0].field,this.relationInfoM2M[0].collection_one=this.collectionInfo.collection,this.relationInfoM2M[0].junction_field=Object.values(Object.values(this.collections)[0].fields)[1].field,this.relationInfoM2M[1].collection_many=Object.keys(this.collections)[0],this.relationInfoM2M[1].field_many=Object.values(Object.values(this.collections)[0].fields)[1].field,this.relationInfoM2M[1].collection_one=Object.keys(this.collections)[1],this.relationInfoM2M[1].junction_field=Object.values(Object.values(this.collections)[0].fields)[0].field)}},getM2OID(){const e=this.relationInfo.collection_many,t=this.relationInfo.field_many,i=this.$store.getters.m2o(e,t);this.relationInfo.id=i?i.id:null},fields(e){return e?this.collections[e].fields:{}},primaryKeyFieldByCollection(e){const t=this.fields(e);return this.$lodash.find(t,{primary_key:!0})}}},gu=_u,yu=(i("b60d"),Object(B["a"])(gu,fu,vu,!1,null,"491d87de",null));yu.options.__file="field-setup.vue";var bu=yu.exports,$u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-modal",{attrs:{title:e.$t("duplicating_field")+": "+e.$helpers.formatTitle(e.fieldInfo.field),buttons:e.buttons},on:{save:function(t){e.saveField()},close:function(t){e.$emit("close")}}},[i("form",{staticClass:"options",on:{submit:function(e){e.preventDefault()}}},[i("div",{staticClass:"options"},[i("label",[e._v(e._s(e.$t("collection"))),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]),i("v-simple-select",{attrs:{required:""},model:{value:e.selectedCollection,callback:function(t){e.selectedCollection=t},expression:"selectedCollection"}},e._l(Object.keys(this.collections),function(t){return i("option",{key:t,domProps:{value:t,selected:t===e.selectedCollection}},[e._v("\n            "+e._s(e.$helpers.formatTitle(t))+"\n          ")])}))],1)]),i("div",{staticClass:"options"},[i("label",[e._v(e._s(e.$t("field")+" "+e.$t("name"))),i("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("required"),expression:"$t('required')"}],staticClass:"material-icons required"},[e._v("star")]),i("v-input",{attrs:{required:"",value:e.field,placeholder:e.fieldInfo.field,"icon-right":e.iconToShow.icon,"icon-right-color":e.iconToShow.color},model:{value:e.field,callback:function(t){e.field=t},expression:"field"}})],1),i("p",{staticClass:"small-text"},[e._v("\n        "+e._s(e.$t("display_name"))+":\n        "),i("b",[e._v(e._s(e.$helpers.formatTitle(e.field||"...")))])])])])])},ku=[],wu={name:"v-field-duplicate",props:{collectionInformation:{type:Object,required:!0},fieldInformation:{type:Object,required:!0}},data(){return{fieldInfo:Object.assign({},this.fieldInformation),selectedCollection:this.collectionInformation.collection,field:null,saving:!1}},computed:{canDuplicate(){return!!(this.field&&this.isFieldValid&&this.selectedCollection)},iconToShow(){return this.field?this.isFieldValid?{icon:"done",color:"success"}:{icon:"error",color:"danger"}:{icon:null,color:null}},isFieldValid(){let e=!0;return Object.keys(this.collections[this.selectedCollection].fields).forEach(t=>{t===this.field&&(e=!1)}),!!e},collectionFieldCount(){return Object.keys(this.collections[this.selectedCollection].fields).length},collections(){const e=Object.assign({},this.$store.state.collections);return Object.keys(e).filter(e=>!1===e.startsWith("directus_")).reduce((t,i)=>{return t[i]=e[i],t},{})},buttons(){return{save:{disabled:!this.canDuplicate,text:this.$t("create"),loading:this.saving}}}},watch:{field(e){this.field=e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w_]+/g,"").replace(/__+/g,"_")}},methods:{saveField(){this.saving=!0;let e=this.fieldInfo;e.field=this.field,e.sort=this.collectionFieldCount+1,delete e.id,delete e.name;const t={fieldInfo:e,collection:this.selectedCollection};this.$emit("save",t)}}},Cu=wu,xu=(i("7288"),Object(B["a"])(Cu,$u,ku,!1,null,"0796ac84",null));xu.options.__file="field-duplicate.vue";var Iu=xu.exports,Ou={name:"settings-fields",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("editing",{collection:this.$helpers.formatTitle(this.collection)})}`}},components:{NotFound:Vc,VFieldSetup:bu,VFieldDuplicate:Iu},props:{collection:{type:String,required:!0}},data(){return{duplicateInterfaceBlacklist:["primary-key","many-to-many","one-to-many","many-to-one","sort"],saving:!1,dragging:!1,fields:null,directusFields:null,notFound:!1,error:!1,confirmRemove:!1,confirmRemoveLoading:!1,confirmNavigation:!1,leavingTo:"",edits:{},fieldBeingEdited:null,fieldToBeRemoved:null,confirmFieldRemove:!1,fieldBeingDuplicated:null,duplicatingField:!1,editingField:!1}},computed:{breadcrumb(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("collections_and_fields"),path:"/settings/collections"},{name:this.$t(`collections-${this.collection}`),path:`/settings/collections/${this.collection}`}]},collectionInfo(){return this.$store.state.collections[this.collection]},fieldsWithSort(){return this.fields.map((e,t)=>Object(ke["a"])({},e,{sort:t+1}))},values(){return Object(ke["a"])({},this.collectionInfo,this.edits)}},methods:{remove(){const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteCollection(this.collection).then(()=>{this.$store.dispatch("loadingFinished",e),this.$store.dispatch("removeCollection",this.collection),this.$notify({title:this.$t("collection_removed",{collection:this.$helpers.formatTitle(this.collection)}),color:"green",iconMain:"check"}),this.$router.push("/settings/collections")}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},save(){this.saving=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.updateCollection(this.collection,this.edits).then(()=>{this.$notify({title:this.$t("collection_updated",{collection:this.$helpers.formatTitle(this.collection)}),color:"green",iconMain:"check"}),this.$store.dispatch("loadingFinished",e),this.saving=!1,this.$store.dispatch("updateCollection",{collection:this.collection,edits:this.edits}),this.$router.push("/settings/collections")}).catch(t=>{this.saving=!1,this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},stageValue(e){let t=e.field,i=e.value;i!==this.collectionInfo[t]?this.$set(this.edits,t,i):this.$delete(this.edits,t)},canDuplicate(e){return!1===this.duplicateInterfaceBlacklist.includes(e)},duplicateFieldSettings(e){let t=e.fieldInfo,i=e.collection;const s=[],n=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:n}),t.collection=i,s.push(this.$api.createField(i,t)),Promise.all(s).then(e=>{let t=Object(Qc["a"])(e,1),i=t[0];return{savedFieldInfo:i.data}}).then(e=>{let s=e.savedFieldInfo;this.$store.dispatch("loadingFinished",n),this.collection===i&&(this.fields=[...this.fields,s]),this.$store.dispatch("addField",{collection:i,field:s}),this.$notify({title:this.$t("field_created",{field:this.$helpers.formatTitle(t.field)}),color:"green",iconMain:"check"})}).then(()=>{this.duplicatingField=!1,this.fieldBeingDuplicated=null}).catch(e=>{this.$store.dispatch("loadingFinished",n),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},setFieldSettings(e){let t=e.fieldInfo,i=e.relation;const s=this.$store.state.collections[this.collection].fields.hasOwnProperty(t.field),n=[],a=this.$helpers.shortid.generate();if(this.$store.dispatch("loadingStart",{id:a}),s?n.push(this.$api.updateField(this.collection,t.field,t)):(delete t.id,t.collection=this.collection,n.push(this.$api.createField(this.collection,t))),i){const e=e=>{const t=e&&null!=e.id;t?n.push(this.$api.updateRelation(e.id,e)):(delete e.id,n.push(this.$api.createRelation(e)))};Array.isArray(i)?i.forEach(e):e(i)}return Promise.all(n).then(e=>{let t=Object(Qc["a"])(e,2),i=t[0],s=t[1];return{savedFieldInfo:i.data,savedRelationInfo:s&&s.data}}).then(e=>{let n=e.savedFieldInfo,o=e.savedRelationInfo;if(this.$store.dispatch("loadingFinished",a),s?(this.fields=this.fields.map(e=>{return e.id===n.id?n:e}),this.$notify({title:this.$t("field_updated",{field:this.$helpers.formatTitle(t.field)}),color:"green",iconMain:"check"}),this.$store.dispatch("updateField",{collection:this.collection,field:n})):(this.fields=[...this.fields,n],this.$notify({title:this.$t("field_created",{field:this.$helpers.formatTitle(t.field)}),color:"green",iconMain:"check"}),this.$store.dispatch("addField",{collection:this.collection,field:n})),i){const e=e=>{const t=e&&null!=e.id;t?this.$store.dispatch("updateRelation",o):this.$store.dispatch("addRelation",o)};Array.isArray(i)?i.forEach(e):e(i)}}).then(()=>{this.editingField=!1,this.fieldBeingEdited=null}).catch(e=>{this.$store.dispatch("loadingFinished",a),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},duplicateField(e){this.fieldBeingDuplicated=e,this.duplicatingField=!0},startEditingField(e){this.fieldBeingEdited=e,this.editingField=!0},warnRemoveField(e){this.fieldToBeRemoved=e,this.confirmFieldRemove=!0},removeField(e){this.removingField=!0;const t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$api.deleteField(this.collection,e).then(()=>{this.$store.dispatch("loadingFinished",t),this.fields=this.fields.filter(t=>{let i=t.field;return i!==e}),this.removingField=!1,this.fieldToBeRemoved=null,this.confirmFieldRemove=!1,this.$notify({title:this.$t("field_removed",{field:this.$helpers.formatTitle(e)}),color:"green",iconMain:"check"}),this.$store.dispatch("removeField",{collection:this.collection,field:e})}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})},startSort(){this.dragging=!0},saveSort(){this.dragging=!1;const e=this.fieldsWithSort.map(e=>({field:e.field,sort:e.sort})),t=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:t}),this.$api.patch(`/fields/${this.collection}`,e,{activity_skip:1}).then(e=>e.data).then(i=>{this.$store.dispatch("loadingFinished",t),this.$store.dispatch("updateFields",{collection:this.collection,updates:e}),this.fields=i}).catch(e=>{this.$store.dispatch("loadingFinished",t),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e})})}},beforeRouteEnter(e,t,i){const s=e.params.collection,n=dc.a.generate();return ic.dispatch("loadingStart",{id:n}),Promise.all([rc.getFields("directus_collections"),rc.getFields(s,{sort:"sort"})]).then(e=>{let t=Object(Qc["a"])(e,2),i=t[0],s=t[1];return{directusFields:i.data,fields:s.data}}).then(e=>{let t=e.directusFields,s=e.fields;ic.dispatch("loadingFinished",n),i(e=>{e.$data.directusFields=Object(y["keyBy"])(t.map(t=>Object(ke["a"])({},t,{name:ml()(t.field),note:e.$t("note_"+t.field)})),"field"),delete e.$data.directusFields.note.note,e.$data.directusFields.note.options={placeholder:e.$t("note_note")},e.$data.fields=s.map(e=>Object(ke["a"])({},e,{name:ml()(e.field)})).sort((e,t)=>{return e.sort==t.sort?0:null===e.sort?1:null===t.sort?-1:e.sort>t.sort?1:-1})})}).catch(e=>{ic.dispatch("loadingFinished",n),i(t=>{t.$data.error=e})})}},Su=Ou,Eu=(i("eaf5"),Object(B["a"])(Su,pu,mu,!1,null,"749fb438",null));Eu.options.__file="fields.vue";var ju=Eu.exports,Tu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"settings-roles"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[i("v-header-button",{key:"add",attrs:{icon:"add",color:"action",label:e.$t("new")},on:{click:function(t){e.addNew=!0}}})],1)],2),i("v-table",{attrs:{items:e.items,columns:e.fields,"primary-key-field":"collection",link:"__link__"}}),e.addNew?i("portal",{attrs:{to:"modal"}},[i("v-prompt",{attrs:{"confirm-text":e.$t("create"),message:e.$t("create_role"),placeholder:e.$t("enter_role_name"),loading:e.adding},on:{cancel:function(t){e.addNew=!1},confirm:e.add},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}})],1):e._e()],1)},Fu=[],Nu={name:"settings-roles",metaInfo(){return{title:`${this.$t("settings")} | ${this.$t("roles")}`}},data(){return{error:null,roles:[],adding:!1,addNew:!1,newName:""}},computed:{breadcrumb(){return[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("roles"),path:"/settings/roles"}]},items(){return this.roles.map(e=>Object(ke["a"])({},e,{__link__:`/settings/roles/${e.id}`}))},fields(){return[{field:"name",name:this.$t("name")},{field:"description",name:this.$t("description")}]}},beforeRouteEnter(e,t,i){rc.getRoles().then(e=>e.data).then(e=>{i(t=>{t.$data.roles=e})}).catch(e=>{this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:e}),i(t=>{t.$data.error=e})})},methods:{add(){this.adding=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.$api.createRole({name:this.newName}).then(e=>e.data).then(t=>{this.$store.dispatch("loadingFinished",e),this.$router.push(`/settings/roles/${t.id}`)}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})}}},Au=Nu,Mu=Object(B["a"])(Au,Tu,Fu,!1,null,null,null);Mu.options.__file="roles.vue";var qu=Mu.exports,Du=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.error?i("div",[i("v-header"),e.error?i("v-error",{attrs:{icon:"error_outline",color:"warning",title:e.$t("server_trouble"),body:e.$t("server_trouble_copy")}}):e._e()],1):i("div",{staticClass:"settings-permissions"},[i("v-header",{attrs:{breadcrumb:e.breadcrumb}},[i("template",{slot:"buttons"},[e.isNew||e.isSystem?e._e():i("v-header-button",{attrs:{loading:e.removing,label:e.$t("delete"),icon:"close",color:"danger"},on:{click:function(t){e.confirmRemove=!0}}}),i("v-header-button",{attrs:{disabled:!e.editing,loading:e.saving,label:e.$t("save"),icon:"check",color:"action"},on:{click:e.save}})],1)],2),i("label",[e._v(e._s(e.$t("permissions")))]),e.isAdmin?i("p",{staticClass:"admin-note"},[e._v(e._s(e.$t("permissions_admin")))]):i("v-permissions",{attrs:{loading:!(e.permissions&&e.statuses),permissions:e.permissions,statuses:e.statuses,fields:e.permissionFields},on:{input:e.setPermission}}),e.fields&&e.role?i("v-form",{attrs:{fields:e.fields,values:e.role,collection:"directus_roles"},on:{"stage-value":e.stageValue}}):e._e(),e.confirmRemove?i("portal",{attrs:{to:"modal"}},[i("v-confirm",{attrs:{color:"danger",message:e.$t("delete_role_are_you_sure",{name:e.role.name}),"confirm-text":e.$t("delete"),loading:e.removing},on:{cancel:function(t){e.confirmRemove=!1},confirm:e.remove}})],1):e._e()],1)},Pu=[],Lu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.loading?i("div",{staticClass:"v-permissions interface loading"},[i("v-spinner",{attrs:{"line-fg-color":"var(--light-gray)","line-bg-color":"var(--lighter-gray)"}})],1):i("div",{staticClass:"interface"},[i("div",{staticClass:"v-permissions"},[i("v-permissions-header",{on:{"toggle-all":e.toggleAll}}),i("div",{staticClass:"body"},[0===Object.keys(e.rows).length?i("p",{staticClass:"no-collections-message"},[e._v("\n        "+e._s(e.$t("permissions_no_collections"))+"\n      ")]):e._e(),e._l(e.rows,function(t,s){return i("v-permissions-row",{key:s,attrs:{permission:t,"permission-name":s,statuses:(e.statuses[s]||{}).mapping,fields:e.fields[s]},on:{input:function(t){e.$emit("input",t)}}})}),e._l(e.directusRows,function(t,s,n){return e.showDirectus?i("v-permissions-row",{key:s,class:{border:0===n},attrs:{permission:t,"permission-name":s,statuses:(e.statuses[s]||{}).mapping,fields:e.fields[s],system:""},on:{input:function(t){e.$emit("input",t)}}}):e._e()})],2)],1),i("label",[i("v-toggle",{staticClass:"toggle",attrs:{id:"toggle-directus"},model:{value:e.showDirectus,callback:function(t){e.showDirectus=t},expression:"showDirectus"}}),e._v(e._s(e.$t("show_directus_collections")))],1)])},Ru=[],Bu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"row"},[i("div",{staticClass:"cell"},[e._v(e._s(e.$t("collection")))]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){e.$emit("toggle-all","create")}}},[e._v("\n        "+e._s(e.$t("create"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){e.$emit("toggle-all","read")}}},[e._v("\n        "+e._s(e.$t("read"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){e.$emit("toggle-all","update")}}},[e._v("\n        "+e._s(e.$t("update"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){e.$emit("toggle-all","delete")}}},[e._v("\n        "+e._s(e.$t("delete"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("click_to_toggle_all_none"),expression:"$t('click_to_toggle_all_none')"}],staticClass:"cell",attrs:{type:"button"},on:{click:function(t){e.$emit("toggle-all","comment")}}},[e._v("\n        "+e._s(e.$t("comment"))+"\n      ")])]),i("div",{staticClass:"cell"},[e._v(e._s(e.$t("explain")))]),i("div",{staticClass:"cell"},[e._v(e._s(e.$t("fields")))]),i("div",{staticClass:"cell"},[e._v(e._s(e.$t("statuses")))])])])},Vu=[],Uu=(i("3d54"),{}),Ku=Object(B["a"])(Uu,Bu,Vu,!1,null,"73f26f60",null);Ku.options.__file="permissions-header.vue";var zu=Ku.exports,Wu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-permissions-row",class:{"system-row":e.system}},[e.statuses?i("div",{staticClass:"row"},[i("div",{staticClass:"cell"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.permissionName,expression:"permissionName"}]},[e._v(e._s(e.$helpers.formatTitle(e.permissionName)))]),i("span",{staticClass:"set-all"},[i("button",{attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.setAll(!0)}}},[e._v("\n          "+e._s(e.$t("all"))+"\n        ")]),e._v("\n        /\n        "),i("button",{attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.setAll(!1)}}},[e._v("\n          "+e._s(e.$t("none"))+"\n        ")])])]),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("create"),options:["none","full"]},on:{input:function(t){e.setAllStatuses("create",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("read"),options:e.permissionOptions},on:{input:function(t){e.setAllStatuses("read",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("update"),options:e.permissionOptions},on:{input:function(t){e.setAllStatuses("update",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("delete"),options:e.permissionOptions},on:{input:function(t){e.setAllStatuses("delete",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("comment"),options:["none","read","create","update","full"]},on:{input:function(t){e.setAllStatuses("comment",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.getCombinedVal("explain"),options:["none","create","update","always"]},on:{input:function(t){e.setAllStatuses("explain",t)}}})],1),i("div",{staticClass:"cell"},[i("button",{class:{mixed:e.fieldState},on:{click:function(t){e.active=!e.active}}},[e._v("\n        "+e._s(e.fieldState?e.$t("mixed"):e.$t("all"))+"\n      ")])]),i("div",{staticClass:"cell"},[i("button",{staticClass:"mixed",on:{click:function(t){e.active=!e.active}}},[e._v("--")])])]):i("div",{staticClass:"row"},[i("div",{staticClass:"cell"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.permissionName,expression:"permissionName"}],class:{system:e.system}},[e._v(e._s(e.$helpers.formatTitle(e.system?e.permissionName.substring(9):e.permissionName))),e.system?i("i",{staticClass:"material-icons"},[e._v("star")]):e._e()]),i("span",{staticClass:"set-all"},[i("button",{attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.setAll(!0)}}},[e._v("\n          "+e._s(e.$t("all"))+"\n        ")]),e._v("\n        /\n        "),i("button",{attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.setAll(!1)}}},[e._v("\n          "+e._s(e.$t("none"))+"\n        ")])])]),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.create,options:["none","full"]},on:{input:function(t){e.emitValue("create",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.read,options:e.permissionOptions},on:{input:function(t){e.emitValue("read",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.update,options:e.permissionOptions},on:{input:function(t){e.emitValue("update",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.delete,options:e.permissionOptions},on:{input:function(t){e.emitValue("delete",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.comment,options:["none","read","create","update","full"]},on:{input:function(t){e.emitValue("comment",t)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission.explain,options:["none","on_create","on_update","always"]},on:{input:function(t){e.emitValue("explain",t)}}})],1),i("div",{staticClass:"cell"},[i("button",{class:{limited:e.fieldState},on:{click:function(t){e.fieldsSelect={collection:e.permissionName}}}},[e._v("\n        "+e._s(e.fieldState?e.$t("limited"):e.$t("all"))+"\n      ")])]),e._m(0)]),e.active?[i("div",{staticClass:"sub row"},[i("div",{staticClass:"cell"},[i("span",{staticClass:"system"},[e._v(e._s(e.$t("permission_states.on_create"))),i("i",{staticClass:"material-icons"},[e._v("star")])])]),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),e._m(6),i("div",{staticClass:"cell"},[i("button",{class:{limited:e.getFieldSettingsPerStatus("$create")},on:{click:function(t){e.fieldsSelect={collection:e.permissionName,status:"$create"}}}},[e._v("\n          "+e._s(e.getFieldSettingsPerStatus("$create")?e.$t("limited"):e.$t("all"))+"\n        ")])]),e.statuses?i("div",{staticClass:"cell"},[i("button",{class:{limited:0!==(e.permission.$create.status_blacklist||[]).length},on:{click:function(t){e.statusSelect={collection:e.permissionName,status:"$create"}}}},[e._v("\n          "+e._s(0===(e.permission.$create.status_blacklist||[]).length?e.$t("all"):e.$t("limited"))+"\n        ")])]):i("div",{staticClass:"cell"},[i("span",{staticClass:"mixed"},[e._v("n/a")])])])]:e._e(),e.statuses&&e.active?e._l(e.statuses,function(t,s){return i("div",{key:e.permissionName+"-"+s,staticClass:"sub row"},[i("div",{staticClass:"cell"},[i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s,expression:"status"}]},[e._v(e._s(t.name))])]),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].create,options:["none","full"]},on:{input:function(t){e.emitValue("create",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].read,options:e.permissionOptions},on:{input:function(t){e.emitValue("read",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].update,options:e.permissionOptions},on:{input:function(t){e.emitValue("update",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].delete,options:e.permissionOptions},on:{input:function(t){e.emitValue("delete",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].comment,options:["none","create","update","full"]},on:{input:function(t){e.emitValue("comment",t,s)}}})],1),i("div",{staticClass:"cell"},[i("v-permissions-toggle",{attrs:{value:e.permission[s].explain,options:["none","create","update","always"]},on:{input:function(t){e.emitValue("explain",t,s)}}})],1),i("div",{staticClass:"cell"},[i("button",{class:{limited:e.getFieldSettingsPerStatus(s)},on:{click:function(t){e.fieldsSelect={collection:e.permissionName,status:s}}}},[e._v("\n          "+e._s(e.getFieldSettingsPerStatus(s)?e.$t("limited"):e.$t("all"))+"\n        ")])]),i("div",{staticClass:"cell"},[i("button",{class:{limited:0!==(e.permission[s].status_blacklist||[]).length},on:{click:function(t){e.statusSelect={collection:e.permissionName,status:s}}}},[e._v("\n          "+e._s(0===(e.permission[s].status_blacklist||[]).length?e.$t("all"):e.$t("limited"))+"\n        ")])])])}):e._e(),i("button",{staticClass:"collapse",on:{click:function(t){e.active=!e.active}}},[i("i",{staticClass:"material-icons"},[e._v(e._s(e.active?"unfold_less":"unfold_more"))])]),e.fieldsSelect?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("select_fields"),buttons:{confirm:{text:e.$t("confirm")}},"action-required":""},on:{confirm:function(t){e.fieldsSelect=null}}},[i("form",{staticClass:"modal-content",on:{submit:function(e){e.preventDefault()}}},[i("fieldset",[i("legend",{staticClass:"style-3"},[e._v(e._s(e.$t("readable_fields")))]),i("p",{staticClass:"style-4"},[e._v(e._s(e.$t("readable_fields_copy")))]),e._l(e.fields,function(t,s){return i("v-checkbox",{key:e.permissionName+"-read-"+s,attrs:{id:e.permissionName+"-read-"+s,checked:!e.blacklist.read.includes(s),label:e.$helpers.formatTitle(s),value:s},on:{change:function(t){e.toggleField(s)}}})})],2),i("fieldset",[i("legend",{staticClass:"style-3"},[e._v(e._s(e.$t("writable_fields")))]),i("p",{staticClass:"style-4"},[e._v(e._s(e.$t("writable_fields_copy")))]),e._l(e.fields,function(t,s){return i("v-checkbox",{key:e.permissionName+"-write-"+s,attrs:{id:e.permissionName+"-write-"+s,checked:!e.blacklist.write.includes(s),label:e.$helpers.formatTitle(s),value:s},on:{change:function(t){e.toggleField(s,!0)}}})})],2)])])],1):e._e(),e.statusSelect&&e.statuses?i("portal",{attrs:{to:"modal"}},[i("v-modal",{attrs:{title:e.$t("select_statuses"),buttons:{confirm:{text:e.$t("confirm")}},"action-required":""},on:{confirm:function(t){e.statusSelect=null}}},[i("form",{staticClass:"modal-content",on:{submit:function(e){e.preventDefault()}}},[i("fieldset",[i("legend",{staticClass:"style-3"},[e._v(e._s(e.$t("statuses")))]),i("p",{staticClass:"style-4"},[e._v(e._s(e.$t("select_statuses_copy")))]),e._l(e.statuses,function(t,s){return i("v-checkbox",{key:"status-"+s,attrs:{id:"status-"+s,checked:!(e.permission[e.statusSelect.status].status_blacklist||[]).includes(s),label:t.name,value:s},on:{change:function(t){e.toggleStatus(s)}}})})],2)])])],1):e._e()],2)},Hu=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell"},[i("span",{staticClass:"mixed"},[e._v("n/a")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"cell block"},[i("i",{staticClass:"material-icons"},[e._v("block")])])}],Gu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-popover",{attrs:{placement:"right-start",offset:"5"}},[i("button",{staticClass:"box",class:[{none:null===e.value},e.value]},["none"===e.value?i("i",{staticClass:"material-icons"},[e._v("close")]):"mine"===e.value?i("i",{staticClass:"material-icons"},[e._v("person")]):"role"===e.value?i("i",{staticClass:"material-icons"},[e._v("group")]):"full"===e.value?i("i",{staticClass:"material-icons"},[e._v("check")]):"read"===e.value?i("i",{staticClass:"material-icons"},[e._v("remove_red_eye")]):"create"===e.value?i("i",{staticClass:"material-icons"},[e._v("add")]):"on_create"===e.value?i("i",{staticClass:"material-icons"},[e._v("add")]):"update"===e.value?i("i",{staticClass:"material-icons"},[e._v("edit")]):"on_update"===e.value?i("i",{staticClass:"material-icons"},[e._v("edit")]):"always"===e.value?i("i",{staticClass:"material-icons"},[e._v("announcement")]):"indeterminate"===e.value?i("i",{staticClass:"material-icons"},[e._v("remove")]):e._e()]),i("template",{slot:"popover"},[i("div",{staticClass:"popover-content"},e._l(e.options,function(t){return i("button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],key:t,on:{click:function(i){e.$emit("input",t)}}},[i("div",{staticClass:"box",class:t},["none"===t?i("i",{staticClass:"material-icons"},[e._v("close")]):"mine"===t?i("i",{staticClass:"material-icons"},[e._v("person")]):"role"===t?i("i",{staticClass:"material-icons"},[e._v("group")]):"full"===t?i("i",{staticClass:"material-icons"},[e._v("check")]):"read"===t?i("i",{staticClass:"material-icons"},[e._v("remove_red_eye")]):"create"===t?i("i",{staticClass:"material-icons"},[e._v("add")]):"on_create"===t?i("i",{staticClass:"material-icons"},[e._v("add")]):"update"===t?i("i",{staticClass:"material-icons"},[e._v("edit")]):"on_update"===t?i("i",{staticClass:"material-icons"},[e._v("edit")]):"always"===t?i("i",{staticClass:"material-icons"},[e._v("announcement")]):e._e()]),"none"===t?[e._v(e._s(e.$t("permission_states.none")))]:e._e(),"mine"===t?[e._v(e._s(e.$t("permission_states.mine")))]:e._e(),"role"===t?[e._v(e._s(e.$t("permission_states.role")))]:e._e(),"full"===t?[e._v(e._s(e.$t("permission_states.full")))]:e._e(),"read"===t?[e._v(e._s(e.$t("permission_states.read")))]:e._e(),"create"===t?[e._v(e._s(e.$t("permission_states.create")))]:e._e(),"on_create"===t?[e._v(e._s(e.$t("permission_states.on_create")))]:e._e(),"update"===t?[e._v(e._s(e.$t("permission_states.update")))]:e._e(),"on_update"===t?[e._v(e._s(e.$t("permission_states.on_update")))]:e._e(),"always"===t?[e._v(e._s(e.$t("permission_states.always")))]:e._e()],2)}))])],2)},Qu=[],Xu={name:"permission-toggle",props:{options:{type:Array,default:()=>[]},value:{type:String,default:"none"}}},Yu=Xu,Ju=(i("23e7"),Object(B["a"])(Yu,Gu,Qu,!1,null,"598c428c",null));Ju.options.__file="permissions-toggle.vue";var Zu=Ju.exports,eh={name:"v-permissions-row",components:{VPermissionsToggle:Zu},props:{permission:{type:Object,required:!0},statuses:{type:Object,default:null},permissionName:{type:String,required:!0},fields:{type:Object,default:()=>({})},system:{type:Boolean,default:!1}},data(){return{active:!1,fieldsSelect:!1,statusSelect:!1}},computed:{collapsable(){return null!=this.statuses},blacklist(){if(!this.fieldsSelect||!this.permission)return;const e=this.fieldsSelect.status,t=e?this.permission[e]:this.permission;return{read:t.read_field_blacklist||[],write:t.write_field_blacklist||[]}},fieldState(){if(!this.permission)return this.$t("all");if(this.statuses){let e=!0;return this.$lodash.forEach(this.permission,t=>{(t.read_field_blacklist.length>0||t.write_field_blacklist.length>0)&&(e=!1)}),!e}const e=this.permission.read_field_blacklist||[],t=this.permission.write_field_blacklist||[];return 0!==e.length||0!==t.length},userCreatedField(){return this.$lodash.find(this.fields,e=>e.type&&"user_created"===e.type.toLowerCase())},permissionOptions(){return this.userCreatedField?["none","mine","role","full"]:["none","full"]}},methods:{setAll(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=e?{create:"full",read:"full",update:"full",delete:"full",comment:"full",explain:"none",read_field_blacklist:[],write_field_blacklist:[],status_blacklist:[]}:{create:"none",read:"none",update:"none",delete:"none",comment:"none",explain:"none",read_field_blacklist:[],write_field_blacklist:[],status_blacklist:[]};if(this.statuses){const e=[];return Object.keys(this.statuses).forEach(i=>{Object.keys(t).forEach(s=>{e.push({collection:this.permissionName,permission:s,value:t[s],status:i})})}),this.$emit("input",e)}return this.$emit("input",Object.keys(t).map(e=>({collection:this.permissionName,permission:e,value:t[e]})))},emitValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.$emit("input",{collection:this.permissionName,permission:e,value:t,status:i})},getCombinedVal(e){if(!this.statuses)return null;let t=this.permission[Object.keys(this.statuses)[0]][e];return this.$lodash.forEach(this.permission,(i,s)=>{"$create"!==s&&i[e]!==t&&(t="indeterminate")}),t},getFieldSettingsPerStatus(e){const t=this.permission[e].read_field_blacklist,i=this.permission[e].write_field_blacklist;return 0!==t.length||0!==i.length},setAllStatuses(e,t){Object.keys(this.statuses).forEach(i=>{this.emitValue(e,t,i)})},toggleField(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.fieldsSelect.status,s=t?this.blacklist.write:this.blacklist.read,n=t?"write_field_blacklist":"read_field_blacklist";return s.includes(e)?this.emitValue(n,s.filter(t=>t!==e),i):this.emitValue(n,[...s,e],i)},toggleStatus(e){if(!this.statuses)return;const t=this.statusSelect.status,i=this.permission[t].status_blacklist;return i.includes(e)?this.emitValue("status_blacklist",i.filter(t=>t!==e),t):this.emitValue("status_blacklist",[...i,e],t)}}},th=eh,ih=(i("4299"),Object(B["a"])(th,Wu,Hu,!1,null,"532a523a",null));ih.options.__file="permissions-row.vue";var sh=ih.exports,nh={name:"v-permissions",data(){return{showDirectus:!1}},components:{VPermissionsHeader:zu,VPermissionsRow:sh},props:{permissions:{type:Object,default:()=>({})},statuses:{type:Object,default:()=>({})},fields:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},computed:{directusRows(){const e=this.$lodash.pickBy(this.permissions,(e,t)=>t.startsWith("directus_"));return this.$lodash(e).toPairs().sortBy(0).fromPairs().value()},rows(){const e=this.$lodash.pickBy(this.permissions,(e,t)=>!1===t.startsWith("directus_"));return this.$lodash(e).toPairs().sortBy(0).fromPairs().value()}},methods:{toggleAll(e){const t=[];let i=!0;this.$lodash.forEach(this.permissions,(t,s)=>{s.startsWith("directus_")||(this.statuses[s]?this.$lodash.forEach(t,t=>{"full"===t[e]&&(i=!1)}):"full"===t[e]&&(i=!1))}),Object.keys(this.permissions).forEach(s=>{if(!s.startsWith("directus_"))return this.statuses[s]?Object.keys(this.statuses[s].mapping).forEach(n=>{t.push({collection:s,status:n,permission:e,value:i?"full":"none"})}):void t.push({collection:s,permission:e,value:i?"full":"none"})}),this.$emit("input",t)}}},ah=nh,oh=(i("7748"),Object(B["a"])(ah,Lu,Ru,!1,null,"1b92b11b",null));oh.options.__file="permissions.vue";var lh=oh.exports,rh={name:"settings-permissions",metaInfo(){if(this.role)return{title:`${this.$t("settings")} | ${this.$helpers.formatTitle(this.role.name)} ${this.$t("permissions")}`}},components:{VPermissions:lh},data(){return{role:null,error:null,saving:!1,roleEdits:{},confirmRemove:!1,removing:!1,fields:{},permissionsLoading:!1,savedPermissions:{},permissionEdits:{},permissionFields:{},statuses:null}},computed:{isNew(){return"+"===this.$route.params.id},isSystem(){return!!this.role&&(1===this.role.id||2===this.role.id)},isAdmin(){return 1==this.$route.params.id},collections(){return this.$store.state.collections},breadcrumb(){return this.role?this.isNew?[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("roles"),path:"/settings/roles"},{name:this.$t("creating_role"),path:"/settings/roles/+"}]:[{name:this.$t("settings"),path:"/settings",color:"warning"},{name:this.$t("roles"),path:"/settings/roles"},{name:this.$helpers.formatTitle(this.role.name),path:`/settings/roles/${this.role.id}`}]:[]},editing(){return Object.keys(this.roleEdits).length>0||Object.keys(this.permissionEdits).length>0},permissions(){if(!this.statuses)return null;if(!this.collections)return null;const e={};return Object.keys(this.collections).forEach(t=>{const i=Object.assign({},Bi);if(i.collection=t,null==this.statuses[t])return e[t]=i,e[t].$create=i,this.savedPermissions[t]&&(e[t]=Object(ke["a"])({},e[t],this.savedPermissions[t])),void(this.permissionEdits[t]&&(e[t]=Object(ke["a"])({},e[t],this.permissionEdits[t])));Object.keys(this.statuses[t].mapping).forEach(s=>{e[t]||(e[t]={}),e[t][s]=Object(ke["a"])({},i,{status:s}),this.savedPermissions[t]&&this.savedPermissions[t][s]&&(e[t][s]=Object(ke["a"])({},e[t][s],this.savedPermissions[t][s])),this.permissionEdits[t]&&this.permissionEdits[t][s]&&(e[t][s]=Object(ke["a"])({},e[t][s],this.permissionEdits[t][s]))}),e[t].$create=i}),e}},beforeRouteEnter(e,t,i){const s=e.params.id,n="+"===s;return n?rc.getFields("directus_roles").then(e=>e.data).then(e=>{i(t=>{const i=Object(y["keyBy"])(e.map(e=>Object(ke["a"])({},e,{name:ml()(e.field)})),"field");t.$data.fields=i,t.$data.role=Object(y["mapValues"])(i,e=>e.default_value)})}).catch(e=>{i(t=>{t.$data.error=e})}):Promise.all([rc.getRole(+s),rc.getFields("directus_roles")]).then(e=>{let t=Object(Qc["a"])(e,2),i=t[0],s=t[1];return{role:i.data,fields:Object(y["keyBy"])(s.data.map(e=>Object(ke["a"])({},e,{name:ml()(e.field)})),"field")}}).then(e=>{let t=e.role,s=e.fields;i(e=>{e.$data.role=t,e.$data.fields=s})}).catch(e=>{i(t=>{t.$data.error=e})})},created(){this.loadPermissions()},watch:{$route(){this.loadPermissions()}},methods:{stageValue(e){let t=e.field,i=e.value;this.roleEdits=Object(ke["a"])({},this.roleEdits,{[t]:i})},save(){this.saving=!0;const e=this.$helpers.shortid.generate();this.$store.dispatch("loadingStart",{id:e}),this.saveRole().then(this.savePermissions).then(()=>{this.$store.dispatch("loadingFinished",e),this.saving=!1,this.$router.push("/settings/roles")}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},saveRole(){return 0===Object.keys(this.roleEdits).length?Promise.resolve():this.isNew?this.$api.createRole(this.roleEdits):this.$api.updateRole(this.role.id,this.roleEdits)},savePermissions(){if(0===Object.keys(this.permissionEdits).length)return Promise.resolve();let e=[],t=[];return Object.keys(this.permissionEdits).forEach(i=>{if(this.statuses[i])Object.keys(this.permissionEdits[i]).forEach(s=>{const n=this.savedPermissions[i]&&this.savedPermissions[i][s]&&this.savedPermissions[i][s].id||null;n?t.push(Object(ke["a"])({id:n},this.permissionEdits[i][s])):e.push(Object(ke["a"])({collection:i,status:s,role:this.role.id},this.permissionEdits[i][s]))});else{if(this.permissionEdits[i].$create){const s=this.savedPermissions[i]&&this.savedPermissions[i].$create&&this.savedPermissions[i].$create.id||null;if(s?t.push(Object(ke["a"])({id:s},this.permissionEdits[i].$create)):e.push(Object(ke["a"])({collection:i,status:"$create",role:this.role.id},this.permissionEdits[i].$create)),this.$delete(this.permissionEdits[i],"$create"),0===Object.keys(this.permissionEdits[i]))return}const s=this.savedPermissions[i]&&this.savedPermissions[i].id||null;s?t.push(Object(ke["a"])({id:s},this.permissionEdits[i])):e.push(Object(ke["a"])({collection:i,role:this.role.id},this.permissionEdits[i]))}}),Promise.all([e.length>0?this.$api.createPermissions(e):Promise.resolve(),t.length>0?this.$api.updatePermissions(t):Promise.resolve()])},remove(){if(this.isSystem)return;this.removing=!0;const e=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:e}),this.$api.deleteRole(this.role.id).then(()=>{this.$store.dispatch("loadingFinished",e),this.removing=!1,this.$router.push("/settings/roles")}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},loadPermissions(){if(this.isNew)return;this.permissionsLoading=!0;const e=this.$helpers.shortid.generate();return this.$store.dispatch("loadingStart",{id:e}),Promise.all([this.$api.getAllFields(),this.$api.getPermissions({"filter[role][eq]":this.$route.params.id,limit:-1})]).then(e=>{let t=Object(Qc["a"])(e,2),i=t[0],s=t[1];return{fields:i.data,permissions:s.data}}).then(t=>{let i=t.fields,s=t.permissions;this.$store.dispatch("loadingFinished",e);const n={};s.forEach(e=>{null==e.status?n[e.collection]=Object(ke["a"])({},e):(n[e.collection]||(n[e.collection]={}),n[e.collection][e.status]=Object(ke["a"])({},e))}),this.permissionsLoading=!1,this.savedPermissions=n,this.statuses=this.$lodash.keyBy(i.filter(e=>e.type&&"status"===e.type.toLowerCase()).map(e=>({mapping:e.options.status_mapping,collection:e.collection})),"collection"),this.permissionFields=this.$lodash.mapValues(this.$lodash.groupBy(i,"collection"),e=>this.$lodash.keyBy(e,"field"))}).catch(t=>{this.$store.dispatch("loadingFinished",e),this.$events.emit("error",{notify:this.$t("something_went_wrong_body"),error:t})})},setPermission(e){return Array.isArray(e)?e.forEach(e=>this.stagePermission(e)):this.stagePermission(e)},stagePermission(e){let t=e.collection,i=e.permission,s=e.value,n=e.status,a=void 0===n?null:n;return null===a?this.$set(this.permissionEdits,t,Object(ke["a"])({},this.permissionEdits[t]||{},{[i]:s})):(null==this.permissionEdits[t]&&this.$set(this.permissionEdits,t,{}),this.$set(this.permissionEdits,t,Object(ke["a"])({},this.permissionEdits[t]||{},{[a]:Object(ke["a"])({},this.permissionEdits[t][a]||{},{[i]:s})})))}}},ch=rh,dh=(i("1d1c"),Object(B["a"])(ch,Du,Pu,!1,null,"b061dd10",null));dh.options.__file="permissions.vue";var uh=dh.exports,hh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return!1===e.exists?i("v-not-found"):i("v-ext-page",{attrs:{id:e.id}})},ph=[],mh={name:"page-extension",metaInfo(){const e=this.$store.state.extensions.pages[this.id];return e?{title:e.name}:null},components:{VNotFound:Vc},props:{id:{type:String,required:!0}},data(){return{exists:!1}},beforeRouteEnter(e,t,i){const s=ic.state.extensions.pages,n=e.params.id;let a=!1;return s.hasOwnProperty(n)&&(a=!0),i(e=>{e.exists=a})},beforeRouteUpdate(e,t,i){const s=this.$store.state.extensions.pages,n=this.id;return this.exists=!1,s.hasOwnProperty(n)&&(this.exists=!0),i()}},fh=mh,vh=Object(B["a"])(fh,hh,ph,!1,null,null,null);vh.options.__file="page-extension.vue";var _h=vh.exports,gh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal-debug"},[i("v-header",{attrs:{title:"Debug yo modals"}}),i("label",[e._v("\n    Title\n    "),i("v-input",{model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),i("label",[e._v("\n    Confirm button text\n    "),i("v-input",{model:{value:e.confirmText,callback:function(t){e.confirmText=t},expression:"confirmText"}})],1),i("label",[e._v("\n    Cancel button text\n    "),i("v-input",{model:{value:e.cancelText,callback:function(t){e.cancelText=t},expression:"cancelText"}})],1),i("v-button",{staticClass:"button",on:{click:function(t){e.alert=!0}}},[e._v("ALERT")]),i("v-button",{staticClass:"button",on:{click:function(t){e.confirm=!0}}},[e._v("CONFIRM")]),i("v-button",{staticClass:"button",on:{click:function(t){e.prompt=!0}}},[e._v("PROMPT")]),i("p",[e._v("Prompt entered text: "+e._s(e.promptText))]),e.alert?i("v-alert",{attrs:{message:e.title,confirmText:e.confirmText},on:{confirm:function(t){e.alert=!1}}}):e._e(),e.confirm?i("v-confirm",{attrs:{message:e.title,cancelText:e.cancelText,confirmText:e.confirmText},on:{confirm:function(t){e.confirm=!1},cancel:function(t){e.confirm=!1}}}):e._e(),e.prompt?i("v-prompt",{attrs:{message:e.title,cancelText:e.cancelText,confirmText:e.confirmText,required:""},on:{confirm:function(t){e.prompt=!1},cancel:function(t){e.prompt=!1}},model:{value:e.promptText,callback:function(t){e.promptText=t},expression:"promptText"}}):e._e()],1)},yh=[],bh={metaInfo(){return{title:"Debug Modals"}},data(){return{alert:!1,confirm:!1,prompt:!1,title:"Are you sure you want to log out?",confirmText:"Yes",cancelText:"Cancel",promptText:"I love Directus!"}}},$h=bh,kh=(i("caaf"),Object(B["a"])($h,gh,yh,!1,null,"8387ca6e",null));kh.options.__file="modal-debug.vue";var wh=kh.exports;g["default"].use(ll["a"]);const Ch=window.__DirectusConfig__&&window.__DirectusConfig__.routerMode,xh=window.__DirectusConfig__&&window.__DirectusConfig__.routerBaseUrl,Ih=new ll["a"]({mode:Ch||"hash",base:xh||"/",routes:[{path:"/modals",component:wh},{path:"/",redirect:"/collections"},{path:"/collections",component:Sc},{path:"/collections/:collection",props:!0,component:Wc},{path:"/collections/:collection/:primaryKey",props:!0,component:gd},{path:"/ext/:id",props:!0,component:_h},{path:"/bookmarks/:collection/:bookmarkID",beforeEnter(e,t,i){const s=e.params,n=s.collection,a=s.bookmarkID,o=ic.state.bookmarks.filter(e=>e.id==a)[0],l=o.search_query,r=o.filters,c=o.view_query,d=o.view_options,u=o.view_type;rc.getItems("directus_collection_presets",{"filter[user][eq]":ic.state.currentUser.id,"filter[title][null]":1,"filter[collection][eq]":n,fields:"id"}).then(e=>e.data).then(e=>e&&e.length>=1?e[0]:null).then(e=>{if(e)return rc.updateItem("directus_collection_presets",e.id,{search_query:l,filters:r,view_query:c,view_options:d,view_type:u})}).then(()=>{return i({path:`/collections/${n}?b=${o.id}`})}).catch(e=>_c.emit("error",{notify:Le.t("something_went_wrong_body"),error:e}))}},{path:"/collections/directus_files",redirect:"/files"},{path:"/files",component:Zc},{path:"/collections/directus_files/:primaryKey",component:gd,alias:"/files/:primaryKey"},{path:"/collections/directus_users",component:Wc,alias:"/users"},{path:"/collections/directus_users/:primaryKey",component:gd,alias:"/users/:primaryKey"},{path:"/collections/directus_activity",component:Wc,alias:"/activity"},{path:"/collections/directus_activity/:primaryKey",component:gd,alias:"/activity/:primaryKey"},{path:"/debug",component:Gd},{path:"/settings",component:eu},{path:"/settings/global",component:ou},{path:"/settings/collections",component:hu},{path:"/settings/collections/:collection",component:ju,props:!0},{path:"/settings/roles",component:qu},{path:"/settings/roles/:id",component:uh,props:!0},{path:"/settings/interfaces",component:qd},{path:"/settings/interfaces/:id",component:Vd,props:!0},{path:"/login",component:jd,meta:{publicRoute:!0},beforeEnter(e,t,i){return rc.loggedIn?i(!1):i()}},{path:"/logout",beforeEnter(e,t,i){ic.dispatch("logout"),i("/login")}},{path:"*",component:Vc}]});Ih.beforeEach((e,t,i)=>{const s=ic.getters.loggedIn,n=e.matched.some(e=>e.meta.publicRoute);return ic.commit(ha,!1),ic.commit(pa,!1),!1===s?n?i():"/"===t.fullPath?i({path:"/login"}):i({path:"/login",query:{redirect:e.fullPath}}):!1===ic.state.hydrated?kc().then(()=>{if(ic.getters.editing){const e=ic.state.edits,t=e.collection,s=e.primaryKey;return i(`/collections/${t}/${s}`)}return i()}):i()}),Ih.afterEach((e,t)=>{!1===ic.state.hydrating&&"/logout"!==t.path&&ic.dispatch("track",{page:e.path})});var Oh=Ih,Sh=i("2a0c"),Eh=i.n(Sh),jh=i("a75a"),Th=i.n(jh),Fh=i("8a60"),Nh=i.n(Fh),Ah=i("ecde");function Mh(e){const t=e.split(/[- :]/);return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]))}function qh(e){return e.toISOString().slice(0,19).replace("T"," ")}var Dh={sqlToDate:Mh,dateToSql:qh};const Ph={formatTitle:ml.a,date:Dh,convertRange:Eh.a,micromustache:Th.a,filesize:Va.a,shortid:dc.a,componentExists:Ce,formatFilters:vi,enableBodyScroll:mn["enableBodyScroll"],disableBodyScroll:mn["disableBodyScroll"],snarkdown:Ah["a"],mousetrap:Nh.a},Lh={install(e){e.prototype.$helpers=Ph}};g["default"].use(Lh);var Rh=Ph;g["default"].config.productionTip=!1,Object.defineProperties(g["default"].prototype,{$lodash:{value:b.a},$api:{value:rc},$notify:{value:pc},$axios:{value:S.a}}),g["default"].use(_c),g["default"].use(w["a"],{defaultDelay:500,defaultOffset:2}),g["default"].use(I.a),g["default"].use(C["a"],{name:"v-timeago",locale:"en-US",locales:{en:F.a,nl:A.a}}),g["default"].use(j.a),g["default"].component("draggable",k.a),new g["default"]({render:e=>e(ol),router:Oh,i18n:Le,store:ic,api:rc,helpers:Rh}).$mount("#app"),ic.watch(e=>e.currentUser.locale,e=>Ve(e))},5865:function(e,t,i){},"58de":function(e,t,i){"use strict";var s=i("8d23"),n=i.n(s);n.a},"5b09":function(e,t){function i(e){e.key&&"tab"===e.key.toLowerCase()&&(document.body.classList.add("user-is-tabbing"),window.removeEventListener("keydown",i),window.addEventListener("mousedown",s))}function s(){document.body.classList.remove("user-is-tabbing"),window.removeEventListener("mousedown",s),window.addEventListener("keydown",i)}window.addEventListener("keydown",i)},"5b6b":function(e,t,i){"use strict";var s=i("745e"),n=i.n(s);n.a},"5c1e":function(e,t,i){},"5d15":function(e,t,i){"use strict";var s=i("9dc8"),n=i.n(s);n.a},"5eb2":function(e,t,i){"use strict";var s=i("3839"),n=i.n(s);n.a},"605e":function(e,t,i){},6294:function(e,t,i){"use strict";var s=i("7fba"),n=i.n(s);n.a},6426:function(e,t,i){"use strict";var s=i("d9b4"),n=i.n(s);n.a},6471:function(e,t,i){},6544:function(e,t,i){},"66c3":function(e,t,i){"use strict";var s=i("28fe"),n=i.n(s);n.a},6750:function(e,t,i){},"6bff":function(e,t){let i,s=!1;function n(){s=!1,clearTimeout(i),i=setTimeout(()=>{!1===s&&document.body.classList.remove("dragging")},50)}document.body.addEventListener("dragenter",()=>{s=!0,document.body.classList.add("dragging")},!1),document.body.addEventListener("dragover",()=>{s=!0},!1),document.body.addEventListener("dragleave",n,!1),document.body.addEventListener("dragexit",n,!1),document.body.addEventListener("dragend",n,!1),document.body.addEventListener("drop",n,!1)},"6dc4":function(e,t,i){},"6f6d":function(e,t,i){},7008:function(e,t,i){},7288:function(e,t,i){"use strict";var s=i("b2ed"),n=i.n(s);n.a},"72ec":function(e,t,i){},"73d4":function(e,t,i){},"745e":function(e,t,i){},7748:function(e,t,i){"use strict";var s=i("4e86"),n=i.n(s);n.a},"7a1f":function(e,t,i){},"7cf0":function(e,t,i){},"7d60":function(e,t,i){"use strict";var s=i("73d4"),n=i.n(s);n.a},"7d98":function(e,t,i){"use strict";var s=i("400b"),n=i.n(s);n.a},"7ec6":function(e,t,i){"use strict";var s=i("605e"),n=i.n(s);n.a},"7fba":function(e,t,i){},8373:function(e,t,i){"use strict";var s=i("4749"),n=i.n(s);n.a},8556:function(e,t,i){"use strict";var s=i("7008"),n=i.n(s);n.a},8701:function(e,t,i){var s={"./cs-CZ":["65f5","lang-cs-CZ"],"./cs-CZ.js":["65f5","lang-cs-CZ"],"./de-DE":["9e91","lang-de-DE"],"./de-DE.js":["9e91","lang-de-DE"],"./en-US":["1271"],"./en-US.js":["1271"],"./fr-FR":["f18a","lang-fr-FR"],"./fr-FR.js":["f18a","lang-fr-FR"],"./it-IT":["5c0a","lang-it-IT"],"./it-IT.js":["5c0a","lang-it-IT"],"./nl-NL":["c1fc","lang-nl-NL"],"./nl-NL.js":["c1fc","lang-nl-NL"]};function n(e){var t=s[e];return t?Promise.all(t.slice(1).map(i.e)).then(function(){var e=t[0];return i(e)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return Object.keys(s)},n.id="8701",e.exports=n},"8c32":function(e,t,i){"use strict";var s=i("362b"),n=i.n(s);n.a},"8c3f":function(e,t,i){},"8d23":function(e,t,i){},"8e30":function(e,t,i){},"8e74":function(e,t,i){},"8f9b":function(e,t,i){"use strict";var s=i("04ee"),n=i.n(s);n.a},9195:function(e,t,i){"use strict";var s=i("9879"),n=i.n(s);n.a},9224:function(e){e.exports={a:"7.0.9"}},"92ea":function(e,t,i){},9879:function(e,t,i){},9972:function(e,t,i){},"998b":function(e,t,i){},"9b41":function(e,t,i){},"9d03":function(e,t,i){"use strict";var s=i("9de0"),n=i.n(s);n.a},"9dc1":function(e,t,i){"use strict";var s=i("ce4b"),n=i.n(s);n.a},"9dc8":function(e,t,i){},"9dcd":function(e,t,i){"use strict";var s=i("3e5a"),n=i.n(s);n.a},"9de0":function(e,t,i){},a725:function(e,t,i){},aaa4:function(e,t,i){},ae68:function(e,t,i){"use strict";var s=i("1e77"),n=i.n(s);n.a},aeb6:function(e,t,i){"use strict";var s=i("448c"),n=i.n(s);n.a},aef9:function(e,t,i){"use strict";var s=i("b307"),n=i.n(s);n.a},b2ed:function(e,t,i){},b307:function(e,t,i){},b567:function(e,t,i){},b57a:function(e,t,i){"use strict";var s=i("72ec"),n=i.n(s);n.a},b60d:function(e,t,i){"use strict";var s=i("8c3f"),n=i.n(s);n.a},b704:function(e,t,i){"use strict";var s=i("3352"),n=i.n(s);n.a},b8f0:function(e,t,i){},bb19:function(e,t,i){e.exports=i.p+"img/box.713f50cf.svg"},c5d8:function(e,t,i){"use strict";var s=i("92ea"),n=i.n(s);n.a},c61b:function(e,t,i){},caaf:function(e,t,i){"use strict";var s=i("230c"),n=i.n(s);n.a},cae2:function(e,t,i){"use strict";var s=i("998b"),n=i.n(s);n.a},cbd8:function(e,t,i){},cdfb:function(e,t,i){},ce4b:function(e,t,i){},d053:function(e,t,i){},d144:function(e,t,i){"use strict";var s=i("1218"),n=i.n(s);n.a},d185:function(e,t,i){},d38e:function(e,t,i){},d9b4:function(e,t,i){},dc4d:function(e,t,i){"use strict";var s=i("d053"),n=i.n(s);n.a},dc98:function(e,t,i){},de04:function(e,t,i){"use strict";var s=i("c61b"),n=i.n(s);n.a},dead:function(e,t,i){},df04:function(e,t,i){"use strict";var s=i("6544"),n=i.n(s);n.a},e008:function(e,t,i){},e4c9:function(e,t,i){},e578:function(e,t,i){"use strict";var s=i("e5c1"),n=i.n(s);n.a},e5c1:function(e,t,i){},e706:function(e,t,i){"use strict";var s=i("40eb"),n=i.n(s);n.a},eac0:function(e,t,i){"use strict";var s=i("0a2d"),n=i.n(s);n.a},eaf5:function(e,t,i){"use strict";var s=i("5c1e"),n=i.n(s);n.a},ebe3:function(e,t,i){},ec05:function(e,t,i){"use strict";var s=i("b567"),n=i.n(s);n.a},ec3c:function(e,t,i){"use strict";var s=i("6750"),n=i.n(s);n.a},ecee:function(e,t,i){"use strict";var s=i("dead"),n=i.n(s);n.a},f58f:function(e,t,i){"use strict";var s=i("aaa4"),n=i.n(s);n.a},f8d5:function(e,t,i){},fc6d:function(e,t,i){},fcea:function(e,t,i){"use strict";var s=i("9b41"),n=i.n(s);n.a}});
//# sourceMappingURL=app.1859ebba.js.map