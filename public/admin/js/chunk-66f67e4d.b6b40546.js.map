{"version":3,"sources":["webpack:///./src/interfaces/many-to-one/input.vue?b4f5","webpack:///src/interfaces/many-to-one/input.vue","webpack:///./src/interfaces/many-to-one/input.vue?3611","webpack:///./src/interfaces/many-to-one/input.vue","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js","webpack:///./src/interfaces/many-to-one/input.vue?6883"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","relationSetup","attrs","name","_v","_s","$t","id","placeholder","options","selectOptions","value","valuePK","icon","on","input","$event","$emit","count","threshold","type","click","showListing","_e","directives","rawName","expression","line-fg-color","line-bg-color","to","title","buttons","save","text","color","loading","selectionSaving","disabled","newSelected","action-required","close","dismissModal","populateDropdown","onSearchInput","collection","relation","collection_one","selection","filters","view-query","viewQuery","view-type","viewType","view-options","viewOptions","setViewOptions","query","setViewQuery","select","emitValue","staticRenderFns","inputvue_type_script_lang_js_","mixins","interface_default","a","data","error","items","viewOptionsOverride","viewTypeOverride","viewQueryOverride","filtersOverride","computed","relatedPrimaryKeyField","$lodash","find","fields","primary_key","field","isObject","$helpers","micromustache","compile","template","Object","defineProperty","_this","length","mapValues","keyBy","item","preferences","JSON","parse","concat","toConsumableArray","objectSpread","created","fetchItems","debounce","watch","methods","_this2","params","meta","limit","promise_default","all","$api","getItems","getItem","then","_ref2","_ref3","slicedToArray","_ref3$","singleRes","total_count","catch","console","_this3","exists","forEach","res","$events","emit","notify","updates","q","many_to_one_inputvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","module","exports","props","String","required","default","Number","readonly","Boolean","newItem","values","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_input_vue_vue_type_style_index_0_id_3b4bdaf1_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_input_vue_vue_type_style_index_0_id_3b4bdaf1_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-66f67e4d.b6b40546.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"interface-many-to-one\"},[(_vm.relationSetup === false)?_c('div',{staticClass:\"notice\"},[_c('p',[_c('v-icon',{attrs:{\"name\":\"warning\"}}),_vm._v(\"\\n      \"+_vm._s(_vm.$t(\"interfaces-many-to-many-relation_not_setup\"))+\"\\n    \")],1)]):[_c('v-select',{attrs:{\"name\":_vm.name,\"id\":_vm.name,\"placeholder\":_vm.options.placeholder || '',\"options\":_vm.selectOptions,\"value\":_vm.valuePK,\"icon\":_vm.options.icon},on:{\"input\":function($event){return _vm.$emit('input', $event)}}}),(_vm.count > _vm.options.threshold)?_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showListing = true}}}):_vm._e(),_c('v-spinner',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"spinner\",attrs:{\"line-fg-color\":\"var(--light-gray)\",\"line-bg-color\":\"var(--lighter-gray)\"}}),(_vm.showListing)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('select_existing'),\"buttons\":{\n          save: {\n            text: 'Save',\n            color: 'accent',\n            loading: _vm.selectionSaving,\n            disabled: _vm.newSelected === null\n          }\n        },\"action-required\":\"\"},on:{\"close\":_vm.dismissModal,\"save\":_vm.populateDropdown}},[_c('div',{staticClass:\"search\"},[_c('v-input',{staticClass:\"search-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.$t('search')},on:{\"input\":_vm.onSearchInput}})],1),_c('v-items',{staticClass:\"items\",attrs:{\"collection\":_vm.relation.collection_one.collection,\"selection\":_vm.selection,\"filters\":_vm.filters,\"view-query\":_vm.viewQuery,\"view-type\":_vm.viewType,\"view-options\":_vm.viewOptions},on:{\"options\":_vm.setViewOptions,\"query\":_vm.setViewQuery,\"select\":_vm.emitValue}})],1)],1):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"interface-many-to-one\">\n    <div v-if=\"relationSetup === false\" class=\"notice\">\n      <p>\n        <v-icon name=\"warning\" />\n        {{ $t(\"interfaces-many-to-many-relation_not_setup\") }}\n      </p>\n    </div>\n\n    <template v-else>\n      <v-select\n        :name=\"name\"\n        :id=\"name\"\n        :placeholder=\"options.placeholder || ''\"\n        :options=\"selectOptions\"\n        :value=\"valuePK\"\n        :icon=\"options.icon\"\n        @input=\"$emit('input', $event)\"\n      ></v-select>\n\n      <button v-if=\"count > options.threshold\" type=\"button\" @click=\"showListing = true\"></button>\n\n      <v-spinner\n        v-show=\"loading\"\n        line-fg-color=\"var(--light-gray)\"\n        line-bg-color=\"var(--lighter-gray)\"\n        class=\"spinner\"\n      ></v-spinner>\n\n      <portal to=\"modal\" v-if=\"showListing\">\n        <v-modal\n          :title=\"$t('select_existing')\"\n          :buttons=\"{\n            save: {\n              text: 'Save',\n              color: 'accent',\n              loading: selectionSaving,\n              disabled: newSelected === null\n            }\n          }\"\n          @close=\"dismissModal\"\n          @save=\"populateDropdown\"\n          action-required\n        >\n          <div class=\"search\">\n            <v-input\n              type=\"search\"\n              :placeholder=\"$t('search')\"\n              class=\"search-input\"\n              @input=\"onSearchInput\"\n            />\n          </div>\n          <v-items\n            class=\"items\"\n            :collection=\"relation.collection_one.collection\"\n            :selection=\"selection\"\n            :filters=\"filters\"\n            :view-query=\"viewQuery\"\n            :view-type=\"viewType\"\n            :view-options=\"viewOptions\"\n            @options=\"setViewOptions\"\n            @query=\"setViewQuery\"\n            @select=\"emitValue\"\n          ></v-items>\n        </v-modal>\n      </portal>\n    </template>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/interface\";\n\nexport default {\n  name: \"interface-many-to-one\",\n  mixins: [mixin],\n  data() {\n    return {\n      loading: false,\n      error: null,\n      items: [],\n      count: null,\n\n      showListing: false,\n      selectionSaving: false,\n      newSelected: null,\n\n      viewOptionsOverride: {},\n      viewTypeOverride: null,\n      viewQueryOverride: {},\n      filtersOverride: []\n    };\n  },\n  computed: {\n    relationSetup() {\n      if (!this.relation) return false;\n      return true;\n    },\n    relatedPrimaryKeyField() {\n      return this.$lodash.find(this.relation.collection_one.fields, {\n        primary_key: true\n      }).field;\n    },\n    valuePK() {\n      if (this.$lodash.isObject(this.value)) return this.value[this.relatedPrimaryKeyField];\n\n      return this.value;\n    },\n    render() {\n      return this.$helpers.micromustache.compile(this.options.template);\n    },\n    selection() {\n      if (!this.value) return [];\n\n      if (this.newSelected) {\n        return [this.newSelected];\n      }\n\n      if (this.valuePK) {\n        return [{ [this.relatedPrimaryKeyField]: this.valuePK }];\n      }\n\n      return [];\n    },\n    selectOptions() {\n      if (this.items.length === 0) return {};\n\n      return this.$lodash.mapValues(\n        this.$lodash.keyBy(this.items, this.relatedPrimaryKeyField),\n        item => this.render(item)\n      );\n    },\n    preferences() {\n      return typeof this.options.preferences === \"string\"\n        ? JSON.parse(this.options.preferences)\n        : this.options.preferences;\n    },\n    filters() {\n      if (this.relationSetup === false) return null;\n      return [...((this.preferences && this.preferences.filters) || []), ...this.filtersOverride];\n    },\n    viewOptions() {\n      if (this.relationSetup === false) return null;\n\n      const viewOptions = (this.preferences && this.preferences.viewOptions) || {};\n      return {\n        ...viewOptions,\n        ...this.viewOptionsOverride\n      };\n    },\n    viewType() {\n      if (this.relationSetup === false) return null;\n      if (this.viewTypeOverride) return this.viewTypeOverride;\n      return (this.preferences && this.preferences.viewType) || \"tabular\";\n    },\n    viewQuery() {\n      if (this.relationSetup === false) return null;\n      const viewQuery = (this.preferences && this.preferences.viewQuery) || {};\n      return {\n        ...viewQuery,\n        ...this.viewQueryOverride\n      };\n    }\n  },\n  created() {\n    if (this.relationSetup) {\n      this.fetchItems();\n    }\n\n    this.onSearchInput = this.$lodash.debounce(this.onSearchInput, 200);\n  },\n  watch: {\n    relation() {\n      if (this.relationSetup) {\n        this.fetchItems();\n      }\n    }\n  },\n  methods: {\n    emitValue(selection) {\n      if (selection.length === 1) {\n        this.newSelected = selection[0];\n      } else if (selection.length === 0) {\n        this.newSelected = null;\n      } else {\n        this.newSelected = selection[selection.length - 1];\n      }\n\n      this.$emit(\"input\", this.newSelected);\n    },\n    fetchItems() {\n      if (this.relation == null) return;\n\n      const collection = this.relation.collection_one.collection;\n\n      this.loading = true;\n\n      const params = {\n        fields: \"*.*\",\n        meta: \"total_count\",\n        limit: this.options.threshold\n      };\n\n      return Promise.all([\n        this.$api.getItems(collection, params),\n        this.value ? this.$api.getItem(collection, this.valuePK) : null\n      ])\n        .then(([{ meta, data: items }, singleRes]) => {\n          if (singleRes) {\n            this.items = [...items, singleRes.data];\n          } else {\n            this.items = items;\n          }\n\n          this.loading = false;\n          this.count = meta.total_count;\n        })\n        .catch(error => {\n          console.error(error); // eslint-disable-line\n          this.error = error;\n          this.loading = false;\n        });\n    },\n    populateDropdown() {\n      let exists = false;\n      this.selectionSaving = true;\n\n      this.items.forEach(item => {\n        if (item[this.relatedPrimaryKeyField] === this.newSelected[this.relatedPrimaryKeyField]) {\n          exists = true;\n        }\n      });\n\n      if (exists === false) {\n        this.$api\n          .getItem(\n            this.relation.collection_one.collection,\n            this.newSelected[this.relatedPrimaryKeyField]\n          )\n          .then(res => res.data)\n          .then(item => {\n            this.$emit(\"input\", this.newSelected);\n            this.items = [...this.items, item];\n            this.selectionSaving = false;\n            this.showListing = false;\n          })\n          .catch(error => {\n            console.error(error); // eslint-disable-line\n            this.$events.emit(\"error\", {\n              notify: this.$t(\"something_went_wrong_body\"),\n              error\n            });\n          });\n      } else {\n        this.$emit(\"input\", this.newSelected);\n        this.selectionSaving = false;\n        this.showListing = false;\n      }\n    },\n    dismissModal() {\n      this.showListing = false;\n      this.selectionSaving = false;\n      this.newSelected = null;\n    },\n    setViewOptions(updates) {\n      this.viewOptionsOverride = {\n        ...this.viewOptionsOverride,\n        ...updates\n      };\n    },\n    setViewQuery(updates) {\n      this.viewQueryOverride = {\n        ...this.viewQueryOverride,\n        ...updates\n      };\n    },\n    onSearchInput(value) {\n      this.setViewQuery({\n        q: value\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.interface-many-to-one {\n  position: relative;\n  max-width: var(--width-medium);\n}\n\n.v-select {\n  margin-top: 0;\n}\n\nbutton {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  border: var(--input-border-width) solid var(--lighter-gray);\n  border-radius: var(--border-radius);\n  transition: border var(--fast) var(--transition);\n\n  &:hover {\n    transition: none;\n    border-color: var(--light-gray);\n  }\n}\n\n.spinner {\n  position: absolute;\n  right: -50px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.search {\n  position: sticky;\n  left: 0;\n  top: 0;\n  &-input {\n    border-bottom: 1px solid var(--lightest-gray);\n    padding: 12px;\n\n    & >>> input {\n      border-radius: 0;\n      border: none;\n      padding-left: var(--page-padding);\n      height: var(--header-height);\n\n      &::placeholder {\n        color: var(--light-gray);\n      }\n    }\n  }\n}\n\n.items {\n  height: calc(100% - var(--header-height) - 1px);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=3b4bdaf1&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=3b4bdaf1&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b4bdaf1\",\n  null\n  \n)\n\nexport default component.exports","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    }\n  }\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=3b4bdaf1&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=3b4bdaf1&lang=scss&scoped=true&\""],"sourceRoot":""}