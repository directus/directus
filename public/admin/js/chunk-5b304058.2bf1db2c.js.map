{"version":3,"sources":["webpack:///./src/interfaces/many-to-one/input.vue?8ac2","webpack:///src/interfaces/many-to-one/input.vue","webpack:///./src/interfaces/many-to-one/input.vue?3611","webpack:///./src/interfaces/many-to-one/input.vue","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js","webpack:///./src/interfaces/many-to-one/input.vue?095d"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","relationSetup","attrs","name","_v","_s","$t","id","placeholder","options","selectOptions","disabled","readonly","value","valuePK","icon","on","input","$event","$emit","count","threshold","type","click","showListing","_e","directives","rawName","expression","line-fg-color","line-bg-color","to","title","buttons","save","text","color","loading","selectionSaving","newSelected","action-required","close","dismissModal","populateDropdown","onSearchInput","collection","relation","collection_one","selection","filters","view-query","viewQuery","view-type","viewType","view-options","viewOptions","setViewOptions","query","setViewQuery","select","emitValue","staticRenderFns","inputvue_type_script_lang_js_","mixins","interface_default","a","data","error","items","viewOptionsOverride","viewTypeOverride","viewQueryOverride","filtersOverride","computed","relatedPrimaryKeyField","_","find","fields","primary_key","field","isObject","$helpers","micromustache","compile","template","Object","defineProperty","_this","length","mapValues","keyBy","item","preferences","JSON","parse","concat","toConsumableArray","objectSpread","created","fetchItems","debounce","watch","methods","_this2","params","meta","limit","promise_default","all","$api","getItems","getItem","then","_ref2","_ref3","slicedToArray","_ref3$","singleRes","total_count","catch","console","_this3","exists","forEach","res","$events","emit","notify","updates","q","many_to_one_inputvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","module","exports","props","String","required","default","Number","Boolean","newItem","values","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_input_vue_vue_type_style_index_0_id_6f233b0c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_input_vue_vue_type_style_index_0_id_6f233b0c_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-5b304058.2bf1db2c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"interface-many-to-one\"},[(_vm.relationSetup === false)?_c('div',{staticClass:\"notice\"},[_c('p',[_c('v-icon',{attrs:{\"name\":\"warning\"}}),_vm._v(\"\\n      \"+_vm._s(_vm.$t(\"interfaces-many-to-many-relation_not_setup\"))+\"\\n    \")],1)]):[_c('v-select',{attrs:{\"name\":_vm.name,\"id\":_vm.name,\"placeholder\":_vm.options.placeholder || '',\"options\":_vm.selectOptions,\"disabled\":_vm.readonly,\"value\":_vm.valuePK,\"icon\":_vm.options.icon},on:{\"input\":function($event){return _vm.$emit('input', $event)}}}),(_vm.count > _vm.options.threshold)?_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showListing = true}}}):_vm._e(),_c('v-spinner',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"spinner\",attrs:{\"line-fg-color\":\"var(--light-gray)\",\"line-bg-color\":\"var(--lighter-gray)\"}}),(_vm.showListing)?_c('portal',{attrs:{\"to\":\"modal\"}},[_c('v-modal',{attrs:{\"title\":_vm.$t('select_existing'),\"buttons\":{\n          save: {\n            text: 'Save',\n            color: 'accent',\n            loading: _vm.selectionSaving,\n            disabled: _vm.newSelected === null\n          }\n        },\"action-required\":\"\"},on:{\"close\":_vm.dismissModal,\"save\":_vm.populateDropdown}},[_c('div',{staticClass:\"search\"},[_c('v-input',{staticClass:\"search-input\",attrs:{\"type\":\"search\",\"placeholder\":_vm.$t('search')},on:{\"input\":_vm.onSearchInput}})],1),_c('v-items',{staticClass:\"items\",attrs:{\"collection\":_vm.relation.collection_one.collection,\"selection\":_vm.selection,\"filters\":_vm.filters,\"view-query\":_vm.viewQuery,\"view-type\":_vm.viewType,\"view-options\":_vm.viewOptions},on:{\"options\":_vm.setViewOptions,\"query\":_vm.setViewQuery,\"select\":_vm.emitValue}})],1)],1):_vm._e()]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"interface-many-to-one\">\n    <div v-if=\"relationSetup === false\" class=\"notice\">\n      <p>\n        <v-icon name=\"warning\" />\n        {{ $t(\"interfaces-many-to-many-relation_not_setup\") }}\n      </p>\n    </div>\n\n    <template v-else>\n      <v-select\n        :name=\"name\"\n        :id=\"name\"\n        :placeholder=\"options.placeholder || ''\"\n        :options=\"selectOptions\"\n        :disabled=\"readonly\"\n        :value=\"valuePK\"\n        :icon=\"options.icon\"\n        @input=\"$emit('input', $event)\"\n      ></v-select>\n\n      <button v-if=\"count > options.threshold\" type=\"button\" @click=\"showListing = true\"></button>\n\n      <v-spinner\n        v-show=\"loading\"\n        line-fg-color=\"var(--light-gray)\"\n        line-bg-color=\"var(--lighter-gray)\"\n        class=\"spinner\"\n      ></v-spinner>\n\n      <portal to=\"modal\" v-if=\"showListing\">\n        <v-modal\n          :title=\"$t('select_existing')\"\n          :buttons=\"{\n            save: {\n              text: 'Save',\n              color: 'accent',\n              loading: selectionSaving,\n              disabled: newSelected === null\n            }\n          }\"\n          @close=\"dismissModal\"\n          @save=\"populateDropdown\"\n          action-required\n        >\n          <div class=\"search\">\n            <v-input\n              type=\"search\"\n              :placeholder=\"$t('search')\"\n              class=\"search-input\"\n              @input=\"onSearchInput\"\n            />\n          </div>\n          <v-items\n            class=\"items\"\n            :collection=\"relation.collection_one.collection\"\n            :selection=\"selection\"\n            :filters=\"filters\"\n            :view-query=\"viewQuery\"\n            :view-type=\"viewType\"\n            :view-options=\"viewOptions\"\n            @options=\"setViewOptions\"\n            @query=\"setViewQuery\"\n            @select=\"emitValue\"\n          ></v-items>\n        </v-modal>\n      </portal>\n    </template>\n  </div>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/interface\";\n\nexport default {\n  name: \"interface-many-to-one\",\n  mixins: [mixin],\n  data() {\n    return {\n      loading: false,\n      error: null,\n      items: [],\n      count: null,\n\n      showListing: false,\n      selectionSaving: false,\n      newSelected: null,\n\n      viewOptionsOverride: {},\n      viewTypeOverride: null,\n      viewQueryOverride: {},\n      filtersOverride: []\n    };\n  },\n  computed: {\n    relationSetup() {\n      if (!this.relation) return false;\n      return true;\n    },\n    relatedPrimaryKeyField() {\n      return _.find(this.relation.collection_one.fields, {\n        primary_key: true\n      }).field;\n    },\n    valuePK() {\n      if (_.isObject(this.value)) return this.value[this.relatedPrimaryKeyField];\n\n      return this.value;\n    },\n    render() {\n      return this.$helpers.micromustache.compile(this.options.template);\n    },\n    selection() {\n      if (!this.value) return [];\n\n      if (this.newSelected) {\n        return [this.newSelected];\n      }\n\n      if (this.valuePK) {\n        return [{ [this.relatedPrimaryKeyField]: this.valuePK }];\n      }\n\n      return [];\n    },\n    selectOptions() {\n      if (this.items.length === 0) return {};\n\n      return _.mapValues(_.keyBy(this.items, this.relatedPrimaryKeyField), item =>\n        this.render(item)\n      );\n    },\n    preferences() {\n      return typeof this.options.preferences === \"string\"\n        ? JSON.parse(this.options.preferences)\n        : this.options.preferences;\n    },\n    filters() {\n      if (this.relationSetup === false) return null;\n      return [...((this.preferences && this.preferences.filters) || []), ...this.filtersOverride];\n    },\n    viewOptions() {\n      if (this.relationSetup === false) return null;\n\n      const viewOptions = (this.preferences && this.preferences.viewOptions) || {};\n      return {\n        ...viewOptions,\n        ...this.viewOptionsOverride\n      };\n    },\n    viewType() {\n      if (this.relationSetup === false) return null;\n      if (this.viewTypeOverride) return this.viewTypeOverride;\n      return (this.preferences && this.preferences.viewType) || \"tabular\";\n    },\n    viewQuery() {\n      if (this.relationSetup === false) return null;\n      const viewQuery = (this.preferences && this.preferences.viewQuery) || {};\n      return {\n        ...viewQuery,\n        ...this.viewQueryOverride\n      };\n    }\n  },\n  created() {\n    if (this.relationSetup) {\n      this.fetchItems();\n    }\n\n    this.onSearchInput = _.debounce(this.onSearchInput, 200);\n  },\n  watch: {\n    relation() {\n      if (this.relationSetup) {\n        this.fetchItems();\n      }\n    }\n  },\n  methods: {\n    emitValue(selection) {\n      if (selection.length === 1) {\n        this.newSelected = selection[0];\n      } else if (selection.length === 0) {\n        this.newSelected = null;\n      } else {\n        this.newSelected = selection[selection.length - 1];\n      }\n\n      this.$emit(\"input\", this.newSelected);\n    },\n    fetchItems() {\n      if (this.relation == null) return;\n\n      const collection = this.relation.collection_one.collection;\n\n      this.loading = true;\n\n      const params = {\n        fields: \"*.*\",\n        meta: \"total_count\",\n        limit: this.options.threshold\n      };\n\n      return Promise.all([\n        this.$api.getItems(collection, params),\n        this.value ? this.$api.getItem(collection, this.valuePK) : null\n      ])\n        .then(([{ meta, data: items }, singleRes]) => {\n          if (singleRes) {\n            this.items = [...items, singleRes.data];\n          } else {\n            this.items = items;\n          }\n\n          this.loading = false;\n          this.count = meta.total_count;\n        })\n        .catch(error => {\n          console.error(error); // eslint-disable-line\n          this.error = error;\n          this.loading = false;\n        });\n    },\n    populateDropdown() {\n      let exists = false;\n      this.selectionSaving = true;\n\n      this.items.forEach(item => {\n        if (item[this.relatedPrimaryKeyField] === this.newSelected[this.relatedPrimaryKeyField]) {\n          exists = true;\n        }\n      });\n\n      if (exists === false) {\n        this.$api\n          .getItem(\n            this.relation.collection_one.collection,\n            this.newSelected[this.relatedPrimaryKeyField]\n          )\n          .then(res => res.data)\n          .then(item => {\n            this.$emit(\"input\", this.newSelected);\n            this.items = [...this.items, item];\n            this.selectionSaving = false;\n            this.showListing = false;\n          })\n          .catch(error => {\n            console.error(error); // eslint-disable-line\n            this.$events.emit(\"error\", {\n              notify: this.$t(\"something_went_wrong_body\"),\n              error\n            });\n          });\n      } else {\n        this.$emit(\"input\", this.newSelected);\n        this.selectionSaving = false;\n        this.showListing = false;\n      }\n    },\n    dismissModal() {\n      this.showListing = false;\n      this.selectionSaving = false;\n      this.newSelected = null;\n    },\n    setViewOptions(updates) {\n      this.viewOptionsOverride = {\n        ...this.viewOptionsOverride,\n        ...updates\n      };\n    },\n    setViewQuery(updates) {\n      this.viewQueryOverride = {\n        ...this.viewQueryOverride,\n        ...updates\n      };\n    },\n    onSearchInput(value) {\n      this.setViewQuery({\n        q: value\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.interface-many-to-one {\n  position: relative;\n  max-width: var(--width-medium);\n}\n\n.v-select {\n  margin-top: 0;\n}\n\nbutton {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  border: var(--input-border-width) solid var(--lighter-gray);\n  border-radius: var(--border-radius);\n  transition: border var(--fast) var(--transition);\n\n  &:hover {\n    transition: none;\n    border-color: var(--light-gray);\n  }\n}\n\n.spinner {\n  position: absolute;\n  right: -50px;\n  top: 50%;\n  transform: translateY(-50%);\n}\n\n.search {\n  position: sticky;\n  left: 0;\n  top: 0;\n  &-input {\n    border-bottom: 1px solid var(--lightest-gray);\n    padding: 12px;\n\n    & >>> input {\n      border-radius: 0;\n      border: none;\n      padding-left: var(--page-padding);\n      height: var(--header-height);\n\n      &::placeholder {\n        color: var(--light-gray);\n      }\n    }\n  }\n}\n\n.items {\n  height: calc(100% - var(--header-height) - 1px);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=6f233b0c&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=6f233b0c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f233b0c\",\n  null\n  \n)\n\nexport default component.exports","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    }\n  }\n};\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=6f233b0c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=6f233b0c&lang=scss&scoped=true&\""],"sourceRoot":""}