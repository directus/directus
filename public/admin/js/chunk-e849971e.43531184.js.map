{"version":3,"sources":["webpack:///./src/interfaces/checkboxes/input.vue?85f6","webpack:///src/interfaces/checkboxes/input.vue","webpack:///./src/interfaces/checkboxes/input.vue?9cec","webpack:///./src/interfaces/checkboxes/input.vue","webpack:///./src/interfaces/checkboxes/input.vue?72c1","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","subgrid","options","single","attrs","readonly","model","value","callback","$$v","choices","expression","_l","choice","index","key","id","_e","on","$event","checked","directives","name","rawName","$t","domProps","target","composing","$set","addCustom","_v","_s","staticRenderFns","mixins","data","watch","deep","handler","initialized","_","isEqual","newValue","wrap","$emit","created","initChoices","methods","allow_other","filter","obj","custom","component","module","exports","props","type","String","required","default","length","Number","Boolean","collection","Object","newItem","relation","fields","values","width","val","includes"],"mappings":"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","file":"js/chunk-e849971e.43531184.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('draggable',{staticClass:\"interface-checkboxes\",class:{ subgrid: !_vm.options.single },attrs:{\"element\":\"div\",\"disabled\":_vm.readonly},model:{value:(_vm.choices),callback:function ($$v) {_vm.choices=$$v},expression:\"choices\"}},[_vm._l((_vm.choices),function(choice,index){return _c('div',{key:choice.id,staticClass:\"choice\"},[(_vm.options.draggable)?_c('v-icon',{staticClass:\"drag-handle\",attrs:{\"name\":\"drag_indicator\"}}):_vm._e(),(choice.custom)?[_c('button',{on:{\"click\":function($event){_vm.choices[index].checked = !_vm.choices[index].checked}}},[_c('v-icon',{attrs:{\"color\":\"blue-grey-800\",\"name\":choice.checked ? 'check_box' : 'check_box_outline_blank'}})],1),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.choices[index].key),expression:\"choices[index].key\"}],attrs:{\"placeholder\":_vm.$t('other') + '...'},domProps:{\"value\":(_vm.choices[index].key)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.choices[index], \"key\", $event.target.value)}}})]:_c('v-checkbox',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(choice.value),expression:\"choice.value\"}],attrs:{\"id\":choice.id,\"name\":\"list-sorting\",\"value\":choice.key,\"disabled\":_vm.readonly,\"label\":choice.value,\"checked\":choice.checked},on:{\"change\":function($event){_vm.choices[index].checked = !_vm.choices[index].checked}}})],2)}),(_vm.options.allow_other)?_c('button',{on:{\"click\":_vm.addCustom}},[_vm._v(_vm._s(_vm.$t(\"add_new\"))+\"...\")]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <draggable\n    v-model=\"choices\"\n    element=\"div\"\n    class=\"interface-checkboxes\"\n    :class=\"{ subgrid: !options.single }\"\n    :disabled=\"readonly\"\n  >\n    <div v-for=\"(choice, index) in choices\" :key=\"choice.id\" class=\"choice\">\n      <v-icon v-if=\"options.draggable\" class=\"drag-handle\" name=\"drag_indicator\" />\n\n      <template v-if=\"choice.custom\">\n        <button @click=\"choices[index].checked = !choices[index].checked\">\n          <v-icon\n            color=\"blue-grey-800\"\n            :name=\"choice.checked ? 'check_box' : 'check_box_outline_blank'\"\n          />\n        </button>\n        <input v-model=\"choices[index].key\" :placeholder=\"$t('other') + '...'\" />\n      </template>\n\n      <v-checkbox\n        v-else\n        :id=\"choice.id\"\n        v-tooltip=\"choice.value\"\n        name=\"list-sorting\"\n        :value=\"choice.key\"\n        :disabled=\"readonly\"\n        :label=\"choice.value\"\n        :checked=\"choice.checked\"\n        @change=\"choices[index].checked = !choices[index].checked\"\n      />\n    </div>\n    <button v-if=\"options.allow_other\" @click=\"addCustom\">{{ $t(\"add_new\") }}...</button>\n  </draggable>\n</template>\n\n<script>\nimport mixin from \"@directus/extension-toolkit/mixins/interface\";\nimport shortid from \"shortid\";\n\nexport default {\n  name: \"InterfaceCheckboxes\",\n  mixins: [mixin],\n  data() {\n    return {\n      choices: []\n    };\n  },\n  watch: {\n    choices: {\n      deep: true,\n      handler(val) {\n        if (this.initialized !== true) return;\n        let newValue = val.filter(choice => choice.checked).map(choice => choice.key);\n\n        if (_.isEqual(this.value, newValue)) {\n          return;\n        }\n\n        if (this.options.wrap) {\n          newValue = [\"\", ...newValue, \"\"];\n        }\n\n        this.$emit(\"input\", newValue);\n      }\n    }\n  },\n  created() {\n    this.initChoices();\n  },\n  methods: {\n    initChoices() {\n      const optionChoices = _.clone(this.options.choices || []);\n      const initialValues = this.value ? this.value : [];\n      let choices = initialValues\n        .filter(key => key) // filter out empty strings\n        .map(key => {\n          return {\n            id: shortid.generate(),\n            key: key,\n            value: optionChoices[key],\n            custom: optionChoices.hasOwnProperty(key) === false,\n            checked: true\n          };\n        });\n\n      // Remove custom values if \"allow_other\" is not enabled\n      if (!this.options.allow_other) {\n        choices = choices.filter(function(obj) {\n          return obj.custom !== true;\n        });\n      }\n\n      const nonChecked = Object.keys(optionChoices)\n        .filter(key => {\n          return initialValues.includes(key) === false;\n        })\n        .map(key => {\n          return {\n            id: shortid.generate(),\n            key: key,\n            value: optionChoices[key],\n            custom: false,\n            checked: false\n          };\n        });\n\n      choices = [...choices, ...nonChecked];\n\n      this.choices = choices;\n      this.initialized = true;\n    },\n    addCustom() {\n      this.choices = [\n        ...this.choices,\n        {\n          id: shortid.generate(),\n          key: \"\",\n          custom: true,\n          checked: true\n        }\n      ];\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.interface-checkboxes {\n  padding-top: calc(\n    (var(--input-height) - 24px) / 2\n  ); // [input height] - 24px (icon height) / 2 (top padding)\n}\n\n.drag-handle {\n  color: var(--input-border-color);\n  cursor: grab;\n}\n\n.choice {\n  display: flex;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: var(--input-font-size);\n\n  .form-checkbox {\n    width: 100%;\n  }\n\n  input {\n    border: 0;\n    border-bottom: 1px solid var(--blue-grey-400);\n    width: 100%;\n    margin-left: 4px;\n    width: 100%;\n    max-width: max-content;\n  }\n\n  input:hover {\n    border-color: var(--blue-grey-800);\n  }\n\n  input:focus {\n    border-color: var(--blue-grey-900);\n  }\n\n  input::placeholder {\n    color: var(--blue-grey-300);\n  }\n}\n\nbutton {\n  text-align: left;\n  color: var(--accent);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=819693f8&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=819693f8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"819693f8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=819693f8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=819693f8&lang=scss&scoped=true&\"","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // Name of the collection\n    collection: {\n      type: String,\n      default: null\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    },\n    width: {\n      type: String,\n      default: null,\n      validator(val) {\n        return [\n          'half',\n          'half-left',\n          'half-right',\n          'full',\n          'fill'\n        ].includes(val);\n      }\n    }\n  }\n};\n"],"sourceRoot":""}