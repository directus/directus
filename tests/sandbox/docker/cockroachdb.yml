services:
  cockroachdb:
    # change in the YY.R component denotes a major release
    image: cockroachdb/cockroach:latest-v23.1
    tmpfs: /cockroach/cockroach-data
    command: start-single-node --cluster-name=example-single-node --insecure
    ports:
      - ${DB_PORT}:26257
      - ${COCKROACH_UI}:8080
    healthcheck:
      test: ['CMD', 'curl', '-f', 'http://localhost:${COCKROACH_UI}/health']
      interval: 5s
      timeout: 5s
      retries: 5
